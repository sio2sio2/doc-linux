

<!DOCTYPE html>

<html lang="es" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>2.10.4. Aplicaciones predeterminadas &#8212; documentación de Linuxnomicón - rolling</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../_static/classic.css?v=2bf1fcf8" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    
    <script src="../../_static/documentation_options.js?v=a621b78a"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/translations.js?v=f85f4cfb"></script>
    
    <link rel="index" title="Índice" href="../../genindex.html" />
    <link rel="search" title="Búsqueda" href="../../search.html" />
    <link rel="next" title="2.10.5. netcat" href="10.netcat.html" />
    <link rel="prev" title="2.10.3. Manual en color" href="03.colores.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="10.netcat.html" title="2.10.5. netcat"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="03.colores.html" title="2.10.3. Manual en color"
             accesskey="P">anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" ><span class="section-number">2. </span>Conceptos básicos</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U"><span class="section-number">2.10. </span>Miscelánea</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2.10.4. </span>Aplicaciones predeterminadas</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="aplicaciones-predeterminadas">
<span id="mimetypes"></span><h1><span class="section-number">2.10.4. </span>Aplicaciones predeterminadas<a class="headerlink" href="#aplicaciones-predeterminadas" title="Link to this heading">¶</a></h1>
<p>Cuando escribimos una orden en la <abbr title="Command Line Interface">CLI</abbr>, cuál es la aplicación con la que se
desea manejar un archivo es información totalmente implícita:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>geeqie<span class="w"> </span>foto_molona.jpeg
</pre></div>
</div>
<p>La orden indica expresamente al sistema que deseamos abrir el archivo
(presumiblemente una foto) con <a class="reference external" href="https://www.geeqie.org/">Geeqie</a>. Hay, en
cambio, otras muchas ocasiones (p.e. cuando en un entorno gráfico pinchamos
sobre el icono que representa la foto) en que es el sistema el que tiene que que
determinar cuál es la aplicación adecuada. Cuál sea depende de cuál sea el tipo
del archivo y, así, un archivo <abbr title="Portable Document Format">PDF</abbr> habrá que consultarlo con un visor para
<abbr title="Portable Document Format">PDF</abbr>s, o una foto <abbr title="Joint Photographic Experts Group">JPEG</abbr> con un visor de imágenes. Para la expresión del tipo
se usa la nomenclatura <abbr title="Multipurpose Internet Mail Extensions">MIME</abbr>, en la que los tipos se expresan, en general, en
la forma <kbd class="kbd docutils literal notranslate">tipo/subtipo</kbd>, de manera que <kbd class="kbd docutils literal notranslate">image/jpeg</kbd> identifica a una
imagen en formato <abbr title="Joint Photographic Experts Group">JPEG</abbr> o <kbd class="kbd docutils literal notranslate">application/pdf</kbd> a un archivo <abbr title="Portable Document Format">PDF</abbr>.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>Consulte <a class="reference external" href="https://developer.mozilla.org/es/docs/Web/HTTP/Basics_of_HTTP/MIME_types">este artículo sobre tipos MIME</a>
de la página de desarrolladores de <a class="reference external" href="https://www.mozilla.org/">Mozilla</a>.</p>
</div>
<p>Así pues, para escoger la aplicación apropiada debemos conocer cuál es el tipo
del recurso. En los sistemas suelen producirse distintas situaciones:</p>
<ul>
<li><p>En ocasiones, se proporciona al sistema directamente el tipo <abbr title="Multipurpose Internet Mail Extensions">MIME</abbr> como
ocurre cuando se accede por <abbr title="HyperText Transfer Protocol">HTTP</abbr> a un recurso alojado en un servidor web y
éste envía el campo de cabecera <kbd class="kbd docutils literal notranslate">Content</kbd>-<kbd class="kbd docutils literal notranslate">Type</kbd> cuyo valor es directamente
el tipo <abbr title="Multipurpose Internet Mail Extensions">MIME</abbr>. Para más información sobre ello consulte <a class="reference internal" href="../../07.serre/02.web/01.desc/index.html#http"><span class="std std-ref">los fundamentos
del protocolo HTTP</span></a>.</p></li>
<li><p>En otras, nuestra intención es abrir un archivo. En este caso, no se nos indica
directamente el tipo, pero se llega a él a través de dos estrategias: la
habitual que consiste en determinarlo a partir de <a class="reference internal" href="../02.informacion/01.filesystem.html#nombres-archivo"><span class="std std-ref">la extensión que
incluye el nombre</span></a> y la menos habitual de usar los <a class="reference external" href="https://en.wikipedia.org/wiki/File_format#Magic_number">números
mágicos</a> y que es
la que usa la aplicación <a class="reference internal" href="../02.informacion/03.ficheros.html#file"><span class="std std-ref">file</span></a>. La primera forma exige un mapeo
que relacione extensiones con tipos <abbr title="Multipurpose Internet Mail Extensions">MIME</abbr><a class="footnote-reference brackets" href="#id4" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p></li>
<li><p>Y en otras se nos ofrece un recurso a través de una <abbr title="Uniform Resource Locator">URL</abbr>, y es necesario
conocer qué aplicación es capaz de gestionar esa <abbr title="Uniform Resource Locator">URL</abbr>. Por ejemplo, que ante
un enlace <a class="reference external" href="ftp://ftp.mozilla.org">ftp://ftp.mozilla.org</a> el sistema sepa
que tiene que usar un determinado cliente <abbr title="File Transfer Protocol">FTP</abbr> y lo abra al pinchar sobre
él. En este caso, hay que asociar una aplicación (un cliente <abbr title="File Transfer Protocol">FTP</abbr> en el ejemplo anterior)
a un protocolo de <abbr title="Uniform Resource Locator">URL</abbr> (<code class="docutils literal notranslate"><span class="pre">ftp://</span></code>), en vez de a un tipo de archivo; por lo
que es –en principio– un problema distinto. Sin embargo, se usa una argucia
para reducir este problema al anterior: cada protocolo se asimila a un tipo
<abbr title="Multipurpose Internet Mail Extensions">MIME</abbr> <kbd class="kbd docutils literal notranslate">x</kbd>-<kbd class="kbd docutils literal notranslate">scheme</kbd>-<kbd class="kbd docutils literal notranslate">handler</kbd>, donde el subtipo es el nombre del propio
protocolo (<kbd class="kbd docutils literal notranslate">x</kbd>-<kbd class="kbd docutils literal notranslate">scheme</kbd>-<kbd class="kbd docutils literal notranslate">handler/ftp</kbd>) y así vuelve a reducirse el problema a
asociar un tipo con una aplicación. Siguiendo esta estrategia, el tipo <abbr title="Multipurpose Internet Mail Extensions">MIME</abbr>
<kbd class="kbd docutils literal notranslate">x</kbd>-<kbd class="kbd docutils literal notranslate">scheme</kbd>-<kbd class="kbd docutils literal notranslate">handler/http</kbd> sirve para representar el protocolo <abbr title="HyperText Transfer Protocol">HTTP</abbr>,
<kbd class="kbd docutils literal notranslate">x</kbd>-<kbd class="kbd docutils literal notranslate">scheme</kbd>-<kbd class="kbd docutils literal notranslate">handler/https</kbd>, el protocolo <abbr title="HyperText Transfer Protocol">HTTP</abbr>s o
<kbd class="kbd docutils literal notranslate">x</kbd>-<kbd class="kbd docutils literal notranslate">scheme</kbd>-<kbd class="kbd docutils literal notranslate">handler/mailto</kbd> las <abbr title="Uniform Resource Locator">URL</abbr>s que representan direcciones de
correo electrónico.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Por ejemplo, si acude a la <a class="reference external" href="https://valide.redsara.es/valide">página de Valide</a>, verá que tiene la posibilidad de
firmar documentos <abbr title="Portable Document Format">PDF</abbr>. Si lo intenta, como los navegadores no tienen esa
capacidad, la acción de firma intenta abrir un recurso mediante el
protocolo <code class="docutils literal notranslate"><span class="pre">afirma://</span></code>. Si en su sistema está definido el tipo <abbr title="Multipurpose Internet Mail Extensions">MIME</abbr>
<kbd class="kbd docutils literal notranslate">x</kbd>-<kbd class="kbd docutils literal notranslate">scheme</kbd>-<kbd class="kbd docutils literal notranslate">handler/afirma</kbd> y asociado éste a la aplicación <a class="reference external" href="https://firmaelectronica.gob.es/Home/Descargas.html">Autofirma</a>,
entonces podrá firmar. En cambio, si no está instalado <a class="reference external" href="https://firmaelectronica.gob.es/Home/Descargas.html">Autofirma</a> o, si
aun estándolo, no existe tal asociación, el sistema no sabrá cómo manejar
ese protocolo, no sabrá cómo firmar y, consecuentemente, no podremos
firmar.</p>
</div>
</li>
</ul>
<img alt="../../_images/mimeapps.png" src="../../_images/mimeapps.png" />
<p>De lo expuesto se desprende que se resolverá completamente el problema si se
hace:</p>
<ol class="arabic simple">
<li><p>Un mapeo entre extensiones y tipos <abbr title="Multipurpose Internet Mail Extensions">MIME</abbr>.</p></li>
<li><p>Un mapeo entre tipos <abbr title="Multipurpose Internet Mail Extensions">MIME</abbr> y aplicaciones.</p></li>
</ol>
<section id="cli">
<span id="mimetypes-cli"></span><h2><span class="section-number">2.10.4.1. </span><abbr title="Command Line Interface">CLI</abbr><a class="headerlink" href="#cli" title="Link to this heading">¶</a></h2>
<p>Aunque en muchas ocasiones el propio usuario invoca la aplicación que quiere
usar, existe la posibilidad de que esto no ocurra: por ejemplo, cuando desde
dentro de un cliente de correo (como <a class="reference internal" href="../../07.serre/03.mail/04-misc/02-cliente/05-mua.html#mutt"><span class="std std-ref">mutt</span></a>) necesitamos abrir un
adjunto.</p>
<p class="rubric">Mapeo de extensiones</p>
<p>Para relacionar extensiones de nombres de archivo y tipos <abbr title="Multipurpose Internet Mail Extensions">MIME</abbr> se usa el
archivo <code class="file docutils literal notranslate"><span class="pre">/etc/mime.types</span></code> incluido en el paquete <a class="extlink-deb reference external" href="https://packages.debian.org/stable/media-types">media-types</a>. Nada
más echar un vistazo al archivo, se comprende cómo funciona: está constituido
por líneas que expresan en la primera columna el tipo <abbr title="Multipurpose Internet Mail Extensions">MIME</abbr> y en las restantes
las extensiones asociadas. Por ejemplo, las páginas web (<kbd class="kbd docutils literal notranslate">text/html</kbd>)
tienen asociadas las siguientes extensiones:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span><span class="s1">&#39;^text/html&#39;</span><span class="w"> </span>/etc/mime.types
<span class="go">text/html                                    html htm shtml</span>
</pre></div>
</div>
<p class="rubric">Mapeo de aplicaciones</p>
<p>Muchas aplicaciones de texto (p.e. <a class="reference internal" href="../../07.serre/03.mail/04-misc/02-cliente/05-mua.html#mutt"><span class="std std-ref">mutt</span></a>) usan <em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/mailcap">mailcap</a></em>
para conocer qué aplicación está asociada a cada tipo <abbr title="Multipurpose Internet Mail Extensions">MIME</abbr>. La lectura de la
página del manual es suficientemente ilustrativa de cuál es el formato del
archivo <code class="file docutils literal notranslate"><span class="pre">/etc/mailcap</span></code>. También se lee el archivo de usuario
<code class="file docutils literal notranslate"><span class="pre">~/.mailcap</span></code> para que cada usuario pueda personalizar la aplicación a
usar.</p>
<p id="run-mailcap">Directamente en la línea de órdenes, puede usarse la órden
<em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/run-mailcap">run-mailcap</a></em> para abrir un archivo usando la aplicación que exprese el
archivo <code class="file docutils literal notranslate"><span class="pre">mailcap</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>run-mailcap<span class="w"> </span>~/Documentos/lista.txt
</pre></div>
</div>
</section>
<section id="gui">
<span id="mimetypes-gui"></span><h2><span class="section-number">2.10.4.2. </span><abbr title="Graphical User Interface">GUI</abbr><a class="headerlink" href="#gui" title="Link to this heading">¶</a></h2>
<p>La gestión de extensiones, tipos de archivo y aplicaciones se realiza en el
entorno gráfico a través de las <a class="reference external" href="https://www.freedesktop.org/wiki/Software/xdg-utils/">xdg-utils</a> definidas por el proyecto
<a class="reference external" href="https://www.freedesktop.org/wiki/">freedesktop.org</a>. Gracias a ellas, todos los entornos gráficos de <em>Linux</em> tiene
un modo unificado de tratar internamente el problema.</p>
<p>Por lo general, los gestores gráficos de archivos proporcionan un modo sencillo
para fijar o modificar con qué programa quiere abrirse cada tipo de archivo.
Nosotros aquí, sin embargo, trataremos cómo usar directamente las utilidades de
<a class="reference external" href="https://www.freedesktop.org/wiki/">freedesktop.org</a> desde la consola. Esto aproximación, además de ser
independiente de cuál sea el entorno gráfico, nos permite conocer qué estrategia
se sigue internamente.</p>
<p class="rubric" id="index-0"><span id="xdg-mime"></span>Mapeo de extensiones</p>
<p>Se utilizan dos bases de datos distintas:</p>
<ul class="simple">
<li><p>La <em>general</em>, que se encuentra en <code class="file docutils literal notranslate"><span class="pre">/usr/share/mime/</span></code>.</p></li>
<li><p>Con preferencia, la <em>particular</em> a cada usuario, que se encuentra en
<code class="file docutils literal notranslate"><span class="pre">~/.local/share/mime/</span></code>.</p></li>
</ul>
<p>Las bases de datos se manipulan y consultan a través de la orden
<em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/xdg-mime">xdg-mime</a></em>. Así, si queremos saber el tipo del documento
<code class="file docutils literal notranslate"><span class="pre">~/Documentos/redaccion.txt</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>xdg-mime<span class="w"> </span>query<span class="w"> </span>filetype<span class="w"> </span>~/Documentos/redaccion.txt
<span class="go">text/plain</span>
</pre></div>
</div>
<p>ya que en la base de datos la extensión <code class="file docutils literal notranslate"><span class="pre">.txt</span></code> está asociada a ese tipo
<abbr title="Multipurpose Internet Mail Extensions">MIME</abbr>. Mapear (y desmapear) es algo más complicado, ya que se necesita
describir la relación mediante un archivo <abbr title="eXtensible Markup Language">XML</abbr> con este aspecto:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
<span class="nt">&lt;mime-info</span><span class="w"> </span><span class="na">xmlns=</span><span class="s">&#39;http://www.freedesktop.org/standards/shared-mime-info&#39;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;mime-type</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;text/x-foobar&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;comment&gt;</span>Tipo<span class="w"> </span>foobar<span class="w"> </span>de<span class="w"> </span>prueba<span class="nt">&lt;/comment&gt;</span>
<span class="w">    </span><span class="nt">&lt;glob</span><span class="w"> </span><span class="na">pattern=</span><span class="s">&quot;*.bar&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;glob</span><span class="w"> </span><span class="na">pattern=</span><span class="s">&quot;*.foo&quot;</span><span class="nt">/&gt;</span>
<span class="w">    </span><span class="nt">&lt;glob</span><span class="w"> </span><span class="na">pattern=</span><span class="s">&quot;*.foobar&quot;</span><span class="nt">/&gt;</span>
<span class="w">  </span><span class="nt">&lt;/mime-type&gt;</span>

<span class="w">  </span><span class="cm">&lt;!-- Puede añadirse más nodos mime-type para hacer</span>
<span class="cm">       varias asociaciones dentro de un mismo archivo --&gt;</span>
<span class="nt">&lt;/mime-info&gt;</span>
</pre></div>
</div>
<p>Gracias al cual asociamos el tipo <abbr title="Multipurpose Internet Mail Extensions">MIME</abbr> <kbd class="kbd docutils literal notranslate">text/x</kbd>-<kbd class="kbd docutils literal notranslate">foobar</kbd> a las extensiones
<code class="file docutils literal notranslate"><span class="pre">.bar</span></code>, <code class="file docutils literal notranslate"><span class="pre">.foo</span></code> y <code class="file docutils literal notranslate"><span class="pre">.foobar</span></code>. Una vez construido el archivo,
tenemos dos modos de regenerar la base de datos:</p>
<ul>
<li><p>Colocar el archivo en el subdirectorio <code class="file docutils literal notranslate"><span class="pre">packages/</span></code> de una de las dos
bases de datos (dependiendo de si queremos que sea un mapeo general o
particular) y regenerarla:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>mv<span class="w"> </span>foobar.xml<span class="w"> </span>~/.local/share/mime/packages
<span class="gp">$ </span>update-mime-database<span class="w"> </span>~/.local/share/mime
</pre></div>
</div>
</li>
<li><p>Utilizar <strong class="command">xdg-mime</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>xdg-mime<span class="w"> </span>install<span class="w"> </span>--mode<span class="w"> </span>user<span class="w"> </span>foobar.xml
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>El registro de un tipo <abbr title="Multipurpose Internet Mail Extensions">MIME</abbr> debería ir acompañado de la definición
de cuál es el icono gráfico que representa los archivos de tal tipo. Tal
acción se lleva a cabo con <em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/xdg-icon-resource">xdg-icon-resource</a></em>, pero eso no forma
parte del objeto de este epígrafe.</p>
</div>
<p>En ambas alternativas, se ha ilustrado cómo hacer un mapeo dentro de la base
de datos particular al usuario. Hecho éste, podemos probar el nuevo mapeo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Este archivo tiene un formato de prueba&quot;</span><span class="w"> </span>&gt;<span class="w"> </span>/tmp/caca.bar
<span class="gp">$ </span>xdg-mime<span class="w"> </span>query<span class="w"> </span>filetype<span class="w"> </span>/tmp/caca.bar
<span class="go">text/x-foobar</span>
</pre></div>
</div>
<p>Para deshacer el mapeo, tenemos también dos alternativas:</p>
<ul>
<li><p>Borrar el archivo <abbr title="eXtensible Markup Language">XML</abbr> de <code class="file docutils literal notranslate"><span class="pre">packages/</span></code> y regenerar la base de datos:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>rm<span class="w"> </span>~/.local/share/mime/packages/foobar.xml
<span class="gp">$ </span>update-mime-database<span class="w"> </span>~/.local/share/mime
</pre></div>
</div>
</li>
<li><p>Utilizar <strong class="command">xdg-mime</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>xdg-mime<span class="w"> </span>uninstall<span class="w"> </span>--mode<span class="w"> </span>user<span class="w"> </span>~/.local/share/mime/packages/foobar.xml
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>El <abbr title="eXtensible Markup Language">XML</abbr> puede encontrarse en cualquier ubicación, pero es bastante
probable que, después de un tiempo, ya no se encuentre en su ubicación
original. Donde sí debe encontrarse es en el subdirectorio
<kbd class="kbd docutils literal notranslate">packages/</kbd>, así que es de esta ubicación de donde lo sacamos.</p>
</div>
</li>
</ul>
<p class="rubric">Mapeo de aplicaciones</p>
<p>La segunda parte del asunto es asociar aplicaciones a tipos <abbr title="Multipurpose Internet Mail Extensions">MIME</abbr>. Tal
asociación no se hace dentro de las bases de datos anteriores, sino aparte. En
cualquier caso, empecemos por saber consultar cuál aplicación abre por defecto
una archivo de un tipo <abbr title="Multipurpose Internet Mail Extensions">MIME</abbr> determinado:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>xdg-mime<span class="w"> </span>query<span class="w"> </span>default<span class="w"> </span>application/postscript
<span class="go">gimp.desktop</span>
</pre></div>
</div>
<p>Obsérvese que lo que se obtiene no es un ejecutable, sino un archivo
<code class="file docutils literal notranslate"><span class="pre">.desktop</span></code>. Estos archivos son los que utilizan los entornos gráficos para
crear los lanzadores de las aplicaciones y saber cómo tienen que arrancarse,
cómo incluirse en los menús o qué icono debe asociarse a ellas<a class="footnote-reference brackets" href="#id5" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>. <a class="reference external" href="https://www.freedesktop.org/wiki/Specifications/desktop-entry-spec/">Su
especificación</a> también
es obra de <a class="reference external" href="https://www.freedesktop.org/wiki/">freedesktop.org</a>.</p>
<p>Bien, pero ¿de dónde ha salido esta asociación? Si ejecutamos de esta otra
forma, obtendremos más información:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nv">XDG_UTILS_DEBUG_LEVEL</span><span class="o">=</span><span class="m">2</span><span class="w"> </span>xdg-mime<span class="w"> </span>query<span class="w"> </span>default<span class="w"> </span>application/postscript
<span class="go">Checking /home/josem/.config/mimeapps.list</span>
<span class="go">Checking /home/josem/.local/share/applications/mimeapps.list</span>
<span class="go">Checking /home/josem/.local/share/applications/defaults.list and /home/josem/.local/share/applications/mimeinfo.cache</span>
<span class="go">Checking /home/josem/.local/share/applications/defaults.list and /home/josem/.local/share/applications/mimeinfo.cache</span>
<span class="go">Checking /usr/local/share//applications/defaults.list and /usr/local/share//applications/mimeinfo.cache</span>
<span class="go">Checking /usr/local/share//applications/defaults.list and /usr/local/share//applications/mimeinfo.cache</span>
<span class="go">Checking /usr/share//applications/defaults.list and /usr/share//applications/mimeinfo.cache</span>
<span class="go">gimp.desktop</span>
</pre></div>
</div>
<p>Llegamos al mismo resultado, obviamente, pero la orden nos ha ido desglosando en
que archivos se ha buscado la asociación: primero en archivos propios del
usuario (y que, por tanto, serán asociaciones exclusivas para ese usuario) y
después en localizaciones generales. El mapeo se comprueba en el orden que
desglosa el comando; y, cuando se encuentra una, para la búsqueda y devuelve el
resultado.</p>
<p>Se observan, además, dos tipos de archivos: los <code class="file docutils literal notranslate"><span class="pre">.list</span></code> y los
<code class="file docutils literal notranslate"><span class="pre">.cache</span></code>. Lo habitual es que los archivos que se usen sean:</p>
<ol class="arabic simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">~/.config/mimeapps.list</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">~/.local/share/applications/mimeinfo.cache</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">/usr/share/applications/defaults.list</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">/usr/share//applications/mimeinfo.cache</span></code></p></li>
</ol>
<p>Ambos tipos de archivos se generan de distinto modo. Los <code class="file docutils literal notranslate"><span class="pre">.cache</span></code> se
generan a partir de los archivos <code class="file docutils literal notranslate"><span class="pre">.desktop</span></code> que habitualmente incluyen un
campo <kbd class="kbd docutils literal notranslate">MimeType</kbd> que desglosa cuáles son los tipos de archivos asociados al
ejecutable correspondiente. Por ejemplo, <code class="file docutils literal notranslate"><span class="pre">chromium.desktop</span></code> trae estos:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span><span class="s2">&quot;^MimeType=&quot;</span><span class="w"> </span>/usr/share/applications/chromium.desktop
<span class="go">MimeType=text/html;text/xml;application/xhtml_xml;application/x-mimearchive;x-scheme-handler/http;x-scheme-handler/https;</span>
</pre></div>
</div>
<p>lo cual asocia el navegador <a class="reference external" href="https://www.chromium.org/">Chromium</a> a los documentos <abbr title="HyperText Markup Language">HTML</abbr>. Este campo, en sí
mismo, no implica la asociación efectiva; pero, si tras la copia del
archivo en el directorio, se ejecuta <em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/update-desktop-database">update-desktop-database</a></em>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>update-desktop-database<span class="w"> </span>/user/share/applications
</pre></div>
</div>
<p>se regenerará en tal directorio el archivo <code class="file docutils literal notranslate"><span class="pre">mimeinfo.cache</span></code> dentro del
cuál se hace la asociación efectiva. El archivo es texto claro, así que puede
leerse simplemente con <a class="reference internal" href="../02.informacion/03.ficheros.html#cat"><span class="std std-ref">cat</span></a>. Como varios archivos <code class="file docutils literal notranslate"><span class="pre">.desktop</span></code>
puede relacionarse con el mismo tipo <abbr title="Multipurpose Internet Mail Extensions">MIME</abbr>, pueden existir varias aplicaciones
apropiadas para un mismo tipo <abbr title="Multipurpose Internet Mail Extensions">MIME</abbr>. En ese caso y en ausencia de una
definición en otro archivo más precedente, ¿cuál es la predeterminada?  En
principio, será simplemente la primera que aparezca asociada al tipo en
<code class="file docutils literal notranslate"><span class="pre">mimeinfo.cache</span></code>. Por ejemplo, para esta línea<a class="footnote-reference brackets" href="#id6" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span>^application/pdf<span class="o">=</span><span class="w"> </span>/usr/share/applications/mimeinfo.cache
<span class="go">application/pdf=gimp.desktop;libreoffice-draw.desktop;org.gnome.Evince.desktop;</span>
</pre></div>
</div>
<p>será <strong class="program">Gimp</strong> la aplicación que abrirá el <abbr title="Portable Document Format">PDF</abbr>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>xdg-mime<span class="w"> </span>query<span class="w"> </span>default<span class="w"> </span>application/pdf
<span class="go">gimp.desktop</span>
</pre></div>
</div>
<p>Sin embargo, un usuario particular puede establecer cualquiera de las otras en
su entorno de escritorio echando mano de <strong class="command">xdg-mime</strong>. Por ejemplo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>xdg-mime<span class="w"> </span>default<span class="w"> </span>org.gnome.Evince.desktop<span class="w"> </span>application/pdf
<span class="gp">$ </span>xdg-mime<span class="w"> </span>query<span class="w"> </span>default<span class="w"> </span>application/pdf
<span class="go">org.gnome.Evince.desktop</span>
</pre></div>
</div>
<p>Estas declaraciones se almacenan en el archivo <code class="file docutils literal notranslate"><span class="pre">.list</span></code> del usuario (por
tanto, <code class="file docutils literal notranslate"><span class="pre">~/.config/mimeapps.list</span></code>) y al tomar precedencia sobre el otro
archivo, prevalecerá. El archivo, supuesto que no existiera o estuviera vacío,
quedará así:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cat<span class="w"> </span>~/.config/mimeapps.list
<span class="go">[Default Applications]</span>
<span class="go">application/pdf=org.gnome.Evince.desktop</span>
</pre></div>
</div>
<p>que evidencia cuál es su sintaxis. Hay, no obstante, algunos limitaciones al
usar la orden para declarar la aplicación predeterminada:</p>
<ul class="simple">
<li><p>El archivo <code class="file docutils literal notranslate"><span class="pre">.desktop</span></code> debe existir.</p></li>
<li><p>El archivo <code class="file docutils literal notranslate"><span class="pre">.desktop</span></code> debe declarar la aplicación como apropiada para el
tipo <abbr title="Multipurpose Internet Mail Extensions">MIME</abbr>.</p></li>
<li><p>La definición siempre se realiza en el archivo <code class="file docutils literal notranslate"><span class="pre">.list</span></code> personal, no en
el general.</p></li>
</ul>
<p>Dada la sencillez de su formato, los archivos <code class="file docutils literal notranslate"><span class="pre">.list</span></code> pueden editarse a
mano, lo cual será indispensable si queremos añadir mapeos en el archivo
<code class="file docutils literal notranslate"><span class="pre">.list</span></code> general.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>Puede consultar todas las posibilidades de <code class="file docutils literal notranslate"><span class="pre">mimeapps.list</span></code>
en <a class="reference external" href="https://wiki.archlinux.org/title/XDG_MIME_Applications#mimeapps.list">esta entrada de la wiki de Archilinux</a>.</p>
</div>
<p id="index-1"><span id="xdg-open"></span>Por último, la orden <em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/xdg-open">xdg-open</a></em> (o, simplemente, <strong class="command">open</strong>) abre
un archivo o <abbr title="Uniform Resource Locator">URL</abbr> con la aplicación que determine como adecuada el sistema. Por
lo tanto:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>xdg-open<span class="w"> </span>https://www.iescastillodeluna.es
</pre></div>
</div>
<p>abrirá esa <abbr title="Uniform Resource Locator">URL</abbr> en el navegador predeterminado. ¿Cuál? Debería saber ya
cómo averiguarlo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>xdg-mime<span class="w"> </span>query<span class="w"> </span>default<span class="w"> </span>x-scheme-handler/https
<span class="go">chromium.desktop</span>
</pre></div>
</div>
<p class="rubric">Enlaces de interés</p>
<ul class="simple">
<li><p><a class="reference external" href="https://www.freedesktop.org/wiki/Specifications/shared-mime-info-spec/">Especificaciones de shared MIME-info</a>.</p></li>
</ul>
<p class="rubric">Notas al pie</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id4" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>Y la segunda, otro mapeo que relaciones números mágicos (o <a class="reference external" href="https://en.wikipedia.org/wiki/List_of_file_signatures">rúbricas de
archivo</a>) con
tipos <abbr title="Multipurpose Internet Mail Extensions">MIME</abbr>.</p>
</aside>
<aside class="footnote brackets" id="id5" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>Estos archivos suelen encontrarse en <code class="file docutils literal notranslate"><span class="pre">/usr/share/applications/</span></code> o,
para un usuario particular, en <code class="file docutils literal notranslate"><span class="pre">~/.local/share/applications</span></code>.</p>
</aside>
<aside class="footnote brackets" id="id6" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">3</a><span class="fn-bracket">]</span></span>
<p>Estamos suponiendo, claro está, que el <code class="file docutils literal notranslate"><span class="pre">mimeinfo.cache</span></code> propio del
usuario (incluido en <code class="file docutils literal notranslate"><span class="pre">~/.local/share/applications</span></code>) no tiene
información al respecto.</p>
</aside>
</aside>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Tabla de contenido</a></h3>
    <ul>
<li><a class="reference internal" href="#">2.10.4. Aplicaciones predeterminadas</a><ul>
<li><a class="reference internal" href="#cli">2.10.4.1. <abbr title="Command Line Interface">CLI</abbr></a></li>
<li><a class="reference internal" href="#gui">2.10.4.2. <abbr title="Graphical User Interface">GUI</abbr></a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Tema anterior</h4>
    <p class="topless"><a href="03.colores.html"
                          title="capítulo anterior"><span class="section-number">2.10.3. </span>Manual en color</a></p>
  </div>
  <div>
    <h4>Próximo tema</h4>
    <p class="topless"><a href="10.netcat.html"
                          title="próximo capítulo"><span class="section-number">2.10.5. </span>netcat</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/02.conbas/99.misc/06.mimetypes.rst.txt"
            rel="nofollow">Mostrar el código</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Búsqueda rápida</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Ir a" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="10.netcat.html" title="2.10.5. netcat"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="03.colores.html" title="2.10.3. Manual en color"
             >anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" ><span class="section-number">2. </span>Conceptos básicos</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" ><span class="section-number">2.10. </span>Miscelánea</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2.10.4. </span>Aplicaciones predeterminadas</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright CC BY 4.0, 2016-2025, José Miguel Sánchez Alés.
      Creado usando <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    </div>
  </body>
</html>