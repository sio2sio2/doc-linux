.. _acls:

Permisos |ACL|
**************
Cuando el sistema de permisos POSIX, esto es, el sistema |UGO|, no es suficiente
y se requiere más granularidad en la definición de permisos, en Linux se puede
recurrir a las listas de centrol de accesos (|ACL| por su acrónimo en inglés).

.. note:: En realidad, las |ACL| también forman parte del estándar POSIX; y `tal
   como se definen en este estándar es como se encuentran implementadas en
   Linux
   <https://www.usenix.org/legacy/publications/library/proceedings/usenix03/tech/freenix03/full_papers/gruenbacher/gruenbacher_html/main.html>`_.

Requisitos
==========
Para poder usar |ACL|\ s debemos cumplir dos requisitos:

* Que el sistema de archivos las soporte y las tenga habilitadas.
* Disponer la herramienta que permite manejarlas.
  
**Habilitación**
   El soporte podemos darlo por descontado ya que los sistemas de archivos
   modernos más usado en *Linux* las soportan (ext4, brtfs, xfs, zfs).

   También es bastante probable que estén ya habilitadas y listas para usarse,
   pero es conveniente cerciorarse. Pueden estar:

   * Habilitadas como opciones de montaje por defecto al haber creado el
     sistema. Podemos comprobar si esto es así\ [#]_ con::

      # tune2fs -l /dev/sda3 | grep 'mount options'
      Default mount options:    user_xattr acl

     suponiendo que la partición sobre la que se asienta el sistema de archivos
     es :file:`/dev/sda3`.

   * Si no están habilitadas como opción por defecto, tenemos dos opciones:

     + Fijar la opción de montaje *acl* en :file:`/etc/fstab`.
     + Habilitarlas como opción de montaje por defecto::

         # tune2fs -o acl /deb/sda3

   .. note:: Para información sobre como habilitar las |ACL| en zfs puede leer
      `este artículo <https://blog.alt255.com/post/posix-acls/>`_.

**Instalación**
   Tan fácil como instalar el paquete::

      # apt install acl

Filosofía de funcionamiento
===========================
Antes de que pasemos a ver cómo se definen es indispensables que entendamos cuál
es su filosofía de funcionamiento.  Las |ACL|\ s POSIX no son un sistema
alternativo al sistema |UGO|, sino complementario. Por tanto, los archivos
siguen teniendo un propietario, un grupo propietario y tres ternas de permisos\
[#]_, pero:

* En adición a ellos pueden añadirse ternas de permisos para aquel usuario o 
  grupo que consideremos pertinente.

* Cuando se definen sobre un directorio, estas nuevas ternas se pueden definir
  como heredables lo cual significa que los archivos y directorios incluidos
  las heredarán.

Operativa
=========

.. rubric:: Notas al pie

.. [#] La orden equivalente en xfs es :manpage:`xfs_info`.
.. [#] E incluso :ref:`permisos especiales <perm-especiales>`, si estos son
   necesarios.

.. |UGO| replace:: :abbr:`UGO (User, Group, Other)`
