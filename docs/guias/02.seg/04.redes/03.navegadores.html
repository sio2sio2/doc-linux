


<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>4.3. Seguridad en la navegación &#8212; documentación de Linuxnomicón - rolling</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/classic.css" />
    <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
    
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/translations.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <link rel="index" title="Índice" href="../../../genindex.html" />
    <link rel="search" title="Búsqueda" href="../../../search.html" />
    <link rel="next" title="5. Almacenamiento" href="../05.discos.html" />
    <link rel="prev" title="4.2. Sistemas activos de seguridad" href="02.sistemas.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="../05.discos.html" title="5. Almacenamiento"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="02.sistemas.html" title="4.2. Sistemas activos de seguridad"
             accesskey="P">anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Seguridad Informática</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../04.redes.html" accesskey="U"><span class="section-number">4. </span>Redes y servicios</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">4.3. </span>Seguridad en la navegación</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <span class="target" id="seg-navegador"></span><section id="seguridad-en-la-navegacion">
<h1><span class="section-number">4.3. </span>Seguridad en la navegación<a class="headerlink" href="#seguridad-en-la-navegacion" title="Enlazar permanentemente con este título">¶</a></h1>
<p>La <em>web</em>, desde sus comienzos a principios de los años 90, ha ido conquistando
paulatinamente nichos en del sector de la Informática, hasta el punto de que en
la actualidad gran parte de la actividad del usuario se desarrolla utilizando
los navegadores:</p>
<ul class="simple">
<li><p>Consulta de información bien por motivos lúdicos bien por
motivos laborales, que fue el propósito que originariamente tuvo.</p></li>
<li><p>Gestiones administrativas o bancarias.</p></li>
<li><p>Foros de discusión, debate y esparcimiento sobre variados asuntos (redes
sociales y foros web), que han desplazado a otros mecanismos como los <a class="reference external" href="https://es.wikipedia.org/wiki/Grupo_de_noticias">grupos
de noticias</a> o <a class="reference external" href="https://es.wikipedia.org/wiki/Lista_de_correo_electr%C3%B3nico">las
listas de distribución de correo</a>.</p></li>
<li><p>Gestión del correo electrónico, que se hace mayoritariamente ahora a través
de clientes web de correo electrónico (<a class="reference external" href="https://es.wikipedia.org/wiki/Webmail">webmail</a>), en vez de aplicaciones que usen
directamente <a class="reference internal" href="../../../07.serre/03.mail/00-proto/index.html#protocolos-correo"><span class="std std-ref">los protocolos SMTP y POP3/IMAP</span></a>.</p></li>
<li><p>Servicios de streaming de audio y vídeo, que en muchos casos son directamente
accesibles desde el navegador, aunque dispongan de una aplicación dedicada.</p></li>
<li><p>Aplicaciones ofimáticas online (<a class="reference external" href="https://www.google.es/intl/es/docs/about">Google Docs</a>, <a class="reference external" href="https://es.wikipedia.org/wiki/Microsoft_Office_365">Office 365</a>) que comienzan a
ser ampliamente utilizadas como alternativa a las de escritorio.</p></li>
</ul>
<p>De hecho, sólo en los dispositivos móviles (donde es común que se creen
aplicaciones dedicadas) y en el sector de los videojuegos, el navegador web no
es una aplicación omnipresente. Esta omnipresencia ha provocado que sobre el
navegador sea la aplicación de escritorio sobre la que más se ha centrado el
<em>malware</em> en los últimos años, razón que justifica que dediquemos un epígrafe
exclusivo a analizar sus riesgos.</p>
<section id="amenazas">
<h2><span class="section-number">4.3.1. </span>Amenazas<a class="headerlink" href="#amenazas" title="Enlazar permanentemente con este título">¶</a></h2>
<p>En los equipos de escritorio, prácticamente toda la relación del usuario con el
exterior se lleva a cabo a través del navegador, por lo que investigar qué hace
el usuario cuando navega proporciona muchísima información sobre su identidad,
sus hábitos y su vida privada.</p>
<p>Todas las amenazas que se ciñen sobre el navegador, pueden resumirse en estos
tres grupos:</p>
<ol class="loweralpha">
<li><p>Engaños al usuario de diverso tipo:</p>
<ul class="simple">
<li><p>Descarga de algún troyano que, tras su instalación, afecta a todo el
sistema<a class="footnote-reference brackets" href="#id9" id="id1">1</a>.</p></li>
<li><p>Instalación en el navegador de un complemento, plug-in o extensión
maliciosos que afectan exclusivamente al propio navegador.</p></li>
<li><p>Fraudes basados en la suplantación de un sitio web legítimo con el fin
de obtener las credenciales de acceso (p.e. el sitio web de un banco).</p></li>
</ul>
<p>Estas amenazas son semejantes a las que afectan a otro tipo de <em>software</em>.</p>
</li>
<li><p>Información de sesiones anteriores que queda almacenada en el propio
navegador y puede ser consultada por personas que también acceden
al sistema.</p></li>
<li><p>Estrategias de rastreo del usuario.</p></li>
</ol>
<p>Analizaremos más adelante estas amenazas, pero antes es preciso tener en cuenta
que muchas de ellas son posibles gracias al hecho de que el navegador es capaz
de ejecutar código, ya que dispone de una máquina virtual de <em>Javascript</em><a class="footnote-reference brackets" href="#id10" id="id2">2</a>:</p>
<table class="motor-js docutils align-default" id="id17">
<caption><span class="caption-text">Motores de Javascript</span><a class="headerlink" href="#id17" title="Enlace permanente a esta tabla">¶</a></caption>
<colgroup>
<col style="width: 24%" />
<col style="width: 31%" />
<col style="width: 45%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Motor</p></th>
<th class="head"><p>Desarrollador</p></th>
<th class="head"><p>Navegador</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>V8</p></td>
<td><p>Google</p></td>
<td><p>Chromium y derivados</p></td>
</tr>
<tr class="row-odd"><td><p>SpiderMonkey</p></td>
<td><p>Fundación Mozilla</p></td>
<td><p>Firefox y derivados</p></td>
</tr>
<tr class="row-even"><td><p><abbr title="SquirrelFish eXtreme">SFX</abbr></p></td>
<td><p>Apple</p></td>
<td><p>Safari</p></td>
</tr>
<tr class="row-odd"><td><p>KJS</p></td>
<td><p>KDE</p></td>
<td><p>Konqueror</p></td>
</tr>
<tr class="row-even"><td><p>Chakra</p></td>
<td><p>Microsoft</p></td>
<td><p>Edge (hasta 2019)</p></td>
</tr>
</tbody>
</table>
<p>En la máquina se ejecuta código de este lenguaje de programación tanto incluido
en las propias páginas web como en los complementos que se instalan en el propio
navegador. Los navegadores disponen de mecanismos para limitar la interacción de
este código con el resto del sistema, por lo que su ejecución no trasciende el
navegador.</p>
<section id="enganos">
<h3><span class="section-number">4.3.1.1. </span>Engaños<a class="headerlink" href="#enganos" title="Enlazar permanentemente con este título">¶</a></h3>
<p>En esta estrategia el punto débil es el propio usuario, de modo que sin un
comportamiento responsable no hay posibilidad de defensa:</p>
<ul class="simple">
<li><p>La descarga de aplicaciones sólo debe realizarse de páginas oficiales y
de <em>software</em> de contrastada reputación<a class="footnote-reference brackets" href="#id11" id="id3">3</a>. Cualquier programa obtenido a
partir de páginas de <a class="reference external" href="https://es.wikipedia.org/wiki/Warez">warez</a> es un
candidato a contener <em>software</em> malicioso.</p></li>
<li><p>Otro tanto pasa con los complementos del navegador, que deberían sólo
descargarse del sitio oficial en que el navegador los ofrece (p.e. <a class="reference external" href="https://addons.mozilla.org/es/firefox/extensions/">para
Firefox</a> o <a class="reference external" href="https://chrome.google.com/webstore/category/extensions">para Chromium</a>).</p></li>
<li><p>La otra estrategia de engaño suele consistir en dirigir al usuario hacia una
página web fraudulenta que imita aquella de la que el atacante quiere obtener
las credenciales. Si el usuario pica e introduce las credenciales en tal
página, el atacante obtendrá las claves de acceso. Para ello, en ocasiones se
recurre, simplemente, a utilizar una <abbr title="Uniform Resource Locator">URL</abbr> semejante a la original, pero en
otras este engaño puede ir acompañado de un <a class="reference internal" href="../../../08.redes/99.ataques/02.tecnicas/01.dns.html#dns-spoofing"><span class="std std-ref">envenenamiento DNS</span></a>.</p></li>
</ul>
</section>
<section id="informacion-almacenada">
<h3><span class="section-number">4.3.1.2. </span>Información almacenada<a class="headerlink" href="#informacion-almacenada" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Durante la navegación, los navegadores almacenan cierta información de ella que
les sirve para facilitar la navegación futura. Si un tercero accede a nuestro
navegador podrá obtener mucha información de cuáles son nuestros gustos y, muy
posiblemente, acceder a algunos datos personales.</p>
<dl>
<dt><strong>Historial</strong></dt><dd><p>El <em class="dfn">historial</em> es la relación de páginas ya visitadas. El navegador las
apunta, junto a la fecha y hora en que se visitaron por última visita.</p>
</dd>
<dt><strong>Caché</strong></dt><dd><p>Para acelerar la navegación, los servidores web al proporcionar recursos
indican cuál es la caducidad de estos. Los servidores suelen utilizar este
dato, para almacenar en su caché esos recursos, de manera que si el usuario
vuelve a pedirlos antes de ser obsoletos, se sirvan directamente sin pedirlos
al servidor.</p>
<p>El problema es que alguien con acceso al sistema, puede acceder a esa caché y
recuperar esos recursos (p.e. fotos).</p>
</dd>
<dt><strong>Contraseñas</strong></dt><dd><p>Por defecto, los navegadores preguntan al usuario si se quieren guardar las
contraseñas que en los formularios están marcadas como tales<a class="footnote-reference brackets" href="#id12" id="id4">4</a>. Una vez
almacenadas el usuario no tendrá que volver a escribirlas, sino que el
navegador la rellenará directamente.</p>
</dd>
<dt><strong>Autocompletado</strong></dt><dd><p>Los navegadores no sólo son capaces de recuperar contraseñas. También
recuerdan los valores que se introdujeron en campos de formulario, de manera
que, cuando se topa con un campo (en esa misma página o en otra cualquiera),
con un mismo atributo <code class="docutils literal notranslate"><span class="pre">name</span></code> sugiere los valores que ya se hayan
introducido. Esa es la razón por la que los navegadores son en muchos casos
capaces de adivinar nuestra dirección de correo, nuestra dirección postal o
nuestro nombre: ya los introdujimos anteriormente en otra página y en ambos
formularios esos campos recibieron el mismo <cite>name</cite> (p.e. «<em>mail</em>» o «<em>email</em>»
para un campo que pida nuestra dirección de correo electrónico).</p>
<p>Como en los formularios de registro es habitual que se nos pida información
personal, entonces esa información personal estará expuesta si un tercero
accede a nuestro ordenador y prueba a rellenar un formulario de registro.</p>
</dd>
</dl>
</section>
<section id="rastreo">
<h3><span class="section-number">4.3.1.3. </span>Rastreo<a class="headerlink" href="#rastreo" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El <em class="dfn">rastreo</em> es el seguimiento que terceros externos realizan de nuestro
comportamiento en la web a través de la información que nosotros mismos les
facilitamos. No interviene, por tanto, un código troyano o el acceso a la
propia máquina, como en los casos anteriores.</p>
<p>El medio más evidente para rastrear a un usuario es su dirección <abbr title="Internet Protocol">IP</abbr> que, en
principio, lo identifica en internet. Sin embargo, este dato no es especialmente
relevante por varias razones:</p>
<ul class="simple">
<li><p>Sólo hay una pequeña parte de usuarios que utilicen siempre una misma <abbr title="Internet Protocol">IP</abbr>
pública. Con todo, esa <abbr title="Internet Protocol">IP</abbr> puede estar siendo compartida por un mismo grupo
de usuarios que salen a internet a través de la misma conexión (familia,
compañeros de trabajo, etc.)</p></li>
<li><p>Hay otros usuarios que, aunque tienen <abbr title="Internet Protocol">IP</abbr> pública, la tienen dinámica, y, en
consecuencia, no los identifica inequívocamente, a menos que se tenga
acceso a los registros del <abbr title="Internet Service Provider">ISP</abbr>.</p></li>
<li><p>Cada vez más usuarios ni siquiera tienen <abbr title="Internet Protocol">IP</abbr> públicas exclusivas, sino
<abbr title="Carrier Grade Network Address Translation">CG-NAT</abbr>, esto es, una <abbr title="Internet Protocol">IP</abbr> pública compartida por muchos abonados al <abbr title="Internet Service Provider">ISP</abbr>.
De nuevo, sólo el <abbr title="Internet Service Provider">ISP</abbr> sería capaz de identificar al usuario.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Hay, con todo, usuarios que ocultan su <abbr title="Internet Protocol">IP</abbr> pública detrás de una
<abbr title="Virtual Private Network">VPN</abbr>. Esto tiene sentido, si se pretenden saltar restricciones geográficas
o burlar requerimientos judiciales de identificación de <abbr title="Internet Protocol">IP</abbr>s. A efectos
de evitar rastreos, es absolutamente ineficaz.</p>
</div>
<p>El <em>rastreo</em>, en realidad, se basa en:</p>
<ul>
<li><p><em>Técnicas activas</em> en la medida en que se basan en que se deja cierta información
en el cliente para recuperarla luego:</p>
<ul class="simple">
<li><p><strong>Cookies de rastreo</strong></p></li>
<li><p><strong>Supercookies</strong> (que, en realidad, no son <em>cookies</em>)</p></li>
</ul>
<p>Es un concepto muy similar al del <a class="reference internal" href="../06.desktop/02.malware.html#spyware"><span class="std std-ref">spyware</span></a>, aunque aquí no
hay código programado.</p>
</li>
<li><p><em>Técnicas pasivas</em> que consisten en identificar al usuario por su
<strong>huella digital</strong>, esto es, por la mera información que el propio cliente
ofrece.</p></li>
</ul>
<dl>
<dt><strong>Cookies de rastreo</strong></dt><dd><p>Las <a class="reference internal" href="../../../07.serre/02.web/01.desc/05.cookies.html#cookies"><span class="std std-ref">cookies</span></a> son imprescindibles para lograr establecer
sesiones, ya que el protocolo <abbr title="HyperText Transfer Protocol">HTTP</abbr> carece de la capacidad de crearlas. El
enlace proporcionado explica cómo funcionan: un servidor web envía cierta
información de texto al navegador que éste almacena y devuelve al servidor
siempre que se conecta a él. Hay dos aspectos importantes que influyen en la
naturaleza de las <em>cookies</em>:</p>
<dl class="simple">
<dt><strong>Duración</strong></dt><dd><p>Al enviar una <em>cookie</em>, el servidor establece cuál es su tiempo
de vigencia, tras el cual el navegador la elimina:</p>
<ul class="simple">
<li><p>Si no se especifica tiempo alguno, la <em>cookie</em> es una <em class="dfn">cookie de
sesión</em>, esto es, una <em>cookie</em> que dura lo que dura abierto el navegador.</p></li>
<li><p>Si el tiempo es exageradamente largo (p.e. de años), entonces la <em>cookie</em>
se puede considerar una <em class="dfn">cookie permanente</em>.</p></li>
</ul>
</dd>
<dt><strong>Dominio</strong></dt><dd><p>Las <em>cookies</em> también pueden especificar el dominio sobre el que son
aplicables:</p>
<ul class="simple">
<li><p>Si no especifican dominio, entonces se sobreentiende que la <em>cookie</em>
refiere al dominio del propio servidor y es por tanto una <em class="dfn">cookie
propia</em>.</p></li>
<li><p>Si especifican dominio y es distinto al del servidor que la envía, el
navegador enviará la <em>cookie</em> al servidor expresado en el dominio de la
<em>cookie</em>, que es distinto al que la envío: son los que se llaman
<em class="dfn">cookies de terceros</em>. Estas <em>cookies</em> entregan a un segundo
servidor la información generada en un primero.</p></li>
</ul>
</dd>
</dl>
<p>En general, las <em>cookies</em> existen para que el navegador pueda enviar información
(incluso de carácter personal, porque la identidad en una sesión lo es) y, por
tanto, son elementos para el seguimiento del usuario. El problema es cuando este
seguimiento se vuelve ilegítimo. Las <em class="dfn">cookies de rastreo</em> (o <em class="dfn">cookies
de seguimiento</em>) son aquellas <em>cookies</em> de terceros persistentes cuyo propósito
es recabar información del usuario y enviarla a terceros.</p>
<p>Otra técnica de seguimiento no usa estrictamente <em>cookies</em> de terceros, sino
<a class="reference external" href="https://es.wikipedia.org/wiki/Widget">widgets</a> o anuncios de publicidad. Por
ejemplo, imagine que compramos o consultamos un producto en una determina tienda
online y esta nos deja una <em>cookie</em> propia permanente en que nos identifica
con un número único que asocia a nuestro historial de compras y consultas.
Si posteriormente accedemos a una página en que la tienda online se anuncia y
aloja dicho anuncio ella misma, la <em>cookie</em> será enviada y la tienda con esa
información podrá personalizar el anuncio que nos muestra.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>Échele una lectura al artículo <a class="reference external" href="https://privacy.net/stop-cookies-tracking">How cookies track you around the
web and how to stop them</a>, que explica muy detalladamente cómo actúan estas
<em>cookies</em> maliciosas.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Con objeto de limitar el rastreo mediante <em>cookies</em>, existe el
<a class="reference external" href="https://www.boe.es/doue/2016/119/L00001-00088.pdf">Reglamento General de Protección de Datos</a>. A
partir de él, se exige que los sitios web informen de qué
<em>cookies</em> instala el sitio web en el navegador y para qué sirve cada
una (imprescindibles, para publicidad, para preferencias,
etc). Además, el usuario debe ser capaz de escoger cuáles
quiere aceptar y cuáles no. Sin embargo, sólo acatarán este
imperativo legal los sitios afectados por la legislación
comunitaria; cualquier otro que escape a su control puede
seguir instalando indiscriminadamente <em>cookies</em> de rastreo.</p>
</div>
</dd>
</dl>
<dl id="supercookie">
<dt><strong>Supercookies</strong></dt><dd><p>El otro mecanismo de identificación son las <em>supercookies</em>. Toman este
nombre, porque no son <em>cookies</em> y porque son infinitamente más persistentes.
Se basan en las cabeceras <abbr title="HTTP Strict Transport Security">HSTS</abbr> (<span class="target" id="index-0"></span><a class="rfc reference external" href="https://datatracker.ietf.org/doc/html/rfc6797.html"><strong>RFC 6797</strong></a>), que se crearon para evitar el
<a class="reference internal" href="../../../08.redes/99.ataques/02.tecnicas/04.mitm.html#sslstrip"><span class="std std-ref">ataque SSLstrip</span></a>, un ataque de tipo <abbr title="Man In The Middle">MITM</abbr> que es posible
cuando un sitio seguro se consulta como no seguro. Si contactamos de modo no
seguro con el sitio real, este nos redirigirá al modo seguro; pero si
contactamos con un sitio que pretende suplantar al real, como aún la conexión
no es segura, el certificado no puede avalar que el servidor es el real. Para
evitar al ataque, se crearon las cabeceras <abbr title="HTTP Strict Transport Security">HSTS</abbr> que son enviadas por los
servidores para confirmar al navegador que usa siempre certificados e
instarle a usar protocolo seguro, aunque el usuario intente acceder
mediante el protocolo no seguro.</p>
<p>De este modo, si accedemos al sitio «A» este envía una cabecera <abbr title="HTTP Strict Transport Security">HSTS</abbr>, cuya
información almacena el navegador. En posteriores visitas al sitio «A», la
conexión siempre será segura, aunque el usuario intente una conexión no
segura. Además, esta información que obliga al navegador a usar el protocolo
seguro no se elimina cuando se borra el historial de navegación.</p>
<p>Es, pues, este un mecanismo para mejorar la seguridad. El problema es que
posibilita un método de identificación de los usuarios, que es el siguiente:</p>
<ul class="simple">
<li><p>Un sitio <em>web</em> habilita 31 subdominios: «<em>sub</em>»» y <em>sub-1</em>» hasta
«<em>sub-30</em>».</p></li>
<li><p>Todos esos subdominios se caracterizan por enviar la cabecera <abbr title="HTTP Strict Transport Security">HSTS</abbr> cuando
se accede a ellos por el protocolo seguro, pero no por el inseguro; excepto
el primero que envía la cabecera <abbr title="HTTP Strict Transport Security">HSTS</abbr> también por el inseguro.</p></li>
<li><p>El primer dominio sirve para saber si el navegador accede por primera vez;
y el resto de dominios, para generar el identificador único.</p></li>
<li><p>Cuando el navegador accede por primera vez al sitio:</p>
<ul>
<li><p>Se pide hacer una petición no segura a «<em>sub</em>». Que el servidor reciba
esta petición no segura implica que el acceso es el primero. Se devuelve
una respuesta incluyendo la cabecera <abbr title="HTTP Strict Transport Security">HSTS</abbr>.</p></li>
<li><p>Se genera aleatoriamente un número binario de 30 dígitos. Cada dígito
(que puede ser 0 ó 1) se corresponde con uno de los subdominios numerados.</p></li>
<li><p>Se llevan a cabo las peticiones seguras a aquellos subdominios a lo que
correspondió un 1. Consecuentemente el navegador almacenará la cabecera
<abbr title="HTTP Strict Transport Security">HSTS</abbr> de esos subdominios.</p></li>
</ul>
</li>
<li><p>Cuando el navegador accede las restantes veces:</p>
<ul>
<li><p>Se detecta que no es la primera vez, porque, aunque el servidor pide
hacer una petición no segura a «<em>sub</em>», la hará segura como consecuencia
de que recibió en su momento la cabecera <abbr title="HTTP Strict Transport Security">HSTS</abbr>.</p></li>
<li><p>Se insta a hacer peticiones no seguras a todos los subdominios. Si la
petición se vuelve segura se apunta un 1 y, si no lo hace, se apunta un
0.</p></li>
<li><p>Se genera el número binario de 30 dígitos con las treinta respuestas, que
coincidirá para cada cliente con el que se generó automáticamente la
primera vez que se entró. Ya hemos identificado al cliente.</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Obsérvese que existen <span class="math notranslate nohighlight">\(2^{30}\)</span> identificadores diferentes,
esto es algo más de 1.000 millones. Es probable que esto nos sirva para
identificar inequívocamente a nuestros visitantes.</p>
</div>
<p>El navegador <a class="reference external" href="https://es.wikipedia.org/wiki/Safari_(navegador)">Safari</a> implementó <a class="reference external" href="https://nakedsecurity.sophos.com/es/2018/03/20/apple-burns-the-hsts-super-cookie">una limitación en el registro de las
cabeceras HSTS</a>
para evitar el uso de <em>supercookies</em> de rastreo. <a class="reference external" href="https://www.chromium.org">Chromium</a>, por su parte,
<a class="reference external" href="https://www.pixelstech.net/article/1600480115-Chrome-to-block-mixed-content-downloads-in-version-86">no permite a partir de la versión 86 contenido mixto</a>,
esto es, peticiones no seguras desde un sitio que es seguro. Esto, pues,
imposibilita que se pueda establecer la <em>supercookie</em> desde un sitio
principal no seguro.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>En Github hay algunas implementaciones simples de este concepto
cono <a class="reference external" href="https://github.com/ben174/hsts-cookie">esta</a> o <a class="reference external" href="https://github.com/pulsejet/HSTS-SuperCookie">esta otra</a><a class="footnote-reference brackets" href="#id13" id="id5">5</a>.</p>
</div>
</dd>
</dl>
<dl id="browser-fingerprint">
<dt><strong>Huella digital</strong></dt><dd><p>La <em class="dfn">huella digital</em> del cliente<a class="footnote-reference brackets" href="#id14" id="id6">6</a> (<em>fingerprint</em> en inglés) es el
conjunto de información ofrecida por el cliente sobre sí mismo que permite al
otro extremo <strong>individualizarlo</strong> mediante su análisis.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Nótese que utilizamos el término <em>individualizarlo</em> y no
<em>identificarlo</em>, porque la <em>huella digital</em> no nos permite saber físicamente
quién es. Para asociar la <em>huella</em> a la identidad física es necesario algo
más como que el cliente introduzca sus datos personales con un formulario
al hacer una compra o registrarse.</p>
</div>
<p>Para que lo entendamos mejor, las dos técnicas anteriores, que son activas,
consisten en expedir a un cliente un <abbr title="Documento Nacional de Identidad">DNI</abbr> (la <em>cookie</em> o la <em>supercookie</em>
almacenada por éste) que es requerida en una conexión posterior. Esta
técnica, en cambio, es pasiva puesto que no se expida ningún documento: al
conectarse el cliente se le «toman las huellas dactilares» y se comprueba si
tales huellas coinciden con alguna de la base de datos. Si coinciden, ya
tenemos individualizado al cliente; si no coinciden, apuntamos tal huella
para el futuro.</p>
<p>Es obvio que, para que la individualización sea posible, la <em>huella</em> requiere
construirse con el suficiente número de datos. Por ello, el tercero espía
recopila información de distintas fuentes:</p>
<ul class="simple">
<li><p>De las cabeceras <abbr title="HyperText Transfer Protocol">HTTP</abbr>, como el <em>User-Agent</em> o las lenguas preferidas.</p></li>
<li><p>La lista de <em>plugins</em> instalados en el navegador.</p></li>
<li><p>Las características que pueden obtenerse ejecutando código <em>Javascript</em>
(lista de fuentes disponibles, tamaño de la pantalla, etc.)</p></li>
</ul>
<p>Una <em>huella digital</em> particular es la que <a class="reference external" href="https://browserleaks.com/canvas">se construye gracias a la API
Canvas</a>.</p>
<p>Los navegadores modernos han implementado una cabecera <abbr title="HyperText Transfer Protocol">HTTP</abbr> llamada <a class="reference external" href="https://en.wikipedia.org/wiki/Do_Not_Track">Do not
track</a> para pedir a los sitios
web que no realicen seguimiento mediante <em>huella digital</em>. Pero la cabecera no
ha llegado a ser estándar, no hay seguridad de que el otro extremo haga caso
a ella y, además, <a class="reference external" href="https://www.genbeta.com/navegadores/do-not-track-navegadores-esta-muerto-no-solo-no-nos-protege-rastreo-puede-facilitar">favorece la individualización</a>
en la medida es que lo habitual es que no esté marcada.</p>
<p>Existen algunas páginas web que calcula la <em>huella digital</em> de nuestro
navegador y nos indican si es única y, por tanto, somos potencialmente
rastreables a través de ella:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://amiunique.org/">Am I unique?</a>.</p></li>
<li><p><a class="reference external" href="https://panopticlick.eff.org/">Panopticlick</a> (la cual tiene un interesante
<a class="reference external" href="https://panopticlick.eff.org/static/browser-uniqueness.pdf">artículo sobre el asunto</a>).</p></li>
<li><p><a class="reference external" href="https://coveryourtracks.eff.org">Cover your tracks</a>.</p></li>
</ul>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>Es muy interesante la lectura del estudio de la <abbr title="Agencia Española de Protección de Datos">AEPD</abbr>
<a class="reference external" href="https://www.aepd.es/sites/default/files/2019-09/estudio-fingerprinting-huella-digital.pdf">Fingerprinting o Huella digital del dispositivo</a>.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>Es interesante el complemento <a class="reference external" href="https://chrome.google.com/webstore/detail/amiunique/pigjfndpomdldkmoaiiigpbncemhjeca">AmIUnique</a>
que analiza periódicamente nuestra huella digital y nos muestra un gráfico
con su evolución en el tiempo.</p>
</div>
</dd>
</dl>
</section>
</section>
<section id="contramedidas">
<h2><span class="section-number">4.3.2. </span>Contramedidas<a class="headerlink" href="#contramedidas" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Dependiendo de cuál sea la amenaza que intentemos atajar, así será la
contramedida apropiada.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Centraremos la exposición de complementos en el navegador <a class="reference external" href="https://www.chromium.org">Chromium</a>,
por ser el más habitual. En muchos casos, el mismo complemento tendrá versión
para <a class="reference external" href="https://www.mozilla.org/es-ES/firefox">Firefox</a>.</p>
</div>
<section id="antimalware">
<h3><span class="section-number">4.3.2.1. </span><em>Antimalware</em><a class="headerlink" href="#antimalware" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Frente a los engaños al usuarios, además de apelar a su responsabilidad, se
puede instalar algún antivirus residente que analice los archivos que el
usuario descarga o ejecuta. Para las suplantaciones de sitios web que se basan
en cambiar ligeramente la <abbr title="Uniform Resource Locator">URL</abbr> y fingirse el sitio original, la solución es
más complicada, porque hay que fiarlo al buen criterio del usuario.</p>
</section>
<section id="acceso-a-la-informacion-almacenada">
<h3><span class="section-number">4.3.2.2. </span>Acceso a la información almacenada<a class="headerlink" href="#acceso-a-la-informacion-almacenada" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Para evitar la inspección de información almacenada (historial, contraseñas,
datos de autocompletado y caché), los navegadores proporcionan en su
configuración (bajo «Privacidad y Seguridad») la posibilidad de hacerlo. Sin
embargo, esta posibilidad requiere la operación manual del usuario. Normalmente,
mantener estos datos guardados en el navegador sólo cobra importancia cuando al
mismo navegador pueden acceder otras personas porque se comparte la máquina.</p>
<p>Las <em>cookies</em>, requieren tratamiento especial, aunque también son información de
navegación, así que junto al resto también pueden eliminarse usando la misma
acción. Para ellas hay más posibilidades:</p>
<ul class="simple">
<li><p>Se pueden bloquear las <em>cookies de terceros</em>, aunque en los últimos tiempos
esto tiene el efecto secundario de impedir la autenticación en sitios a través
de terceros como <a class="reference external" href="https://www.google.com">Google</a> o <a class="reference external" href="https://www.facebook.com">Facebook</a>.</p></li>
<li><p>El navegador puede configurarse para eliminar todas las cookies al cerrar la
sesión del navegador.</p></li>
<li><p>También es posible borrar selectivamente <em>cookies</em> según el sitio web al que
pertenecen.</p></li>
</ul>
<p>Para el tratamiento de las contraseñas tenemos varias estrategias:</p>
<ul>
<li><p>Deshabilitar el gestor de contraseñas e impedir que se almacenen.</p></li>
<li><p>Usar el gestor de contraseñas de manera que éstas siempre se cifren, para lo
cual:</p>
<ul>
<li><p><a class="reference external" href="https://www.mozilla.org/es-ES/firefox">Firefox</a> permite en su configuración establecer una contraseña maestra. Esta
contraseña es necesaria para descifrar las almacenadas y, en consecuencia,
el autocompletado no se producirá si la desconocemos.</p></li>
<li><p><a class="reference external" href="https://www.chromium.org">Chromium</a> no permite definir contraseña maestra, y en <em>Windows</em> no hay forma de
protegerlas, pero en <em>Linux</em> es capaz de cifrar las contraseñas almacenadas
mediante el llavero del sistema operativo si este es <a class="reference external" href="https://es.wikipedia.org/wiki/GNOME_Keyring">gnome-keyring</a> o
<a class="reference external" href="https://es.wikipedia.org/wiki/KWallet">kwallet</a><a class="footnote-reference brackets" href="#id15" id="id7">7</a>.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p><a class="reference external" href="https://www.chromium.org">Chromium</a> identifica por las variables de entorno si se encuentra
en <em>Gnome</em> o <em>KDE</em> y en función de ellas usa uno u otro gestor de
contraseñas. <a class="reference external" href="https://es.wikipedia.org/wiki/KWallet">kwallet</a> está integrado en <em>KDE</em>, pero <a class="reference external" href="https://es.wikipedia.org/wiki/GNOME_Keyring">gnome-keyring</a> puede
usarse en entornos gráficos distintos a <em>Gnome</em>. Para saber cómo
instalar y configurar este último fuera de ese escritorio consulte <a class="reference internal" href="../../../04.servidor/10.ssh/04.adicional.html#gnome-keyring-ssh"><span class="std std-ref">el
apartado en que tratamos gnome-keyring para usarlo como agente SSH</span></a>.</p>
<p>Una vez hecho eso, deberá asegurarse de arrancar
<a class="reference external" href="https://www.chromium.org">Chromium</a> con la opción <kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">-</kbd>-<kbd class="kbd docutils literal notranslate">password</kbd>-<kbd class="kbd docutils literal notranslate">store=gnome</kbd></kbd>, ya que no
habrá variables de entorno que le avisen de que debe usar tal gestor de
contraseñas. La confirmación de que las contraseñas se almacenan cifradas
puede tenerla imitando lo que propugna  <a class="reference external" href="https://rtfm.co.ua/en/chromium-linux-keyrings-secret-service-passwords-encryption-and-store/">este artículo sobre el tema</a>.</p>
</div>
</li>
</ul>
</li>
<li><p>Puede optarse por utilizar gestores de contraseñas externos a través de
complementos como <a class="reference external" href="https://chrome.google.com/webstore/detail/lastpass-free-password-ma/hdokiejnpimakedhajhdlcegeplioahd">LastPass</a> o <a class="reference external" href="https://chrome.google.com/webstore/detail/1password-x-%E2%80%93-password-ma/aeblfdkhhhdcdjpifhhbdiojplfjncoa">1Password X</a>. Algunos de estos gestores
almacenan las contraseñas en la nube con lo que pueden recuperarse desde otro
ordenador.</p></li>
</ul>
<p>Aparte de las estrategias preventivas anteriores hay dos buenas herramientas que
podemos utilizar para lidiar con esta información sensible:</p>
<dl>
<dt><a class="reference external" href="https://es.wikipedia.org/wiki/Modo_privado">Modo incógnito</a></dt><dd><p>Los navegadores modernos suelen incorporar el llamado «Modo incógnito» que
consiste en que ninguna información de navegación (las cinco categorías
vistas) es almacenada. Es especialmente útil en máquinas compartidas en que
ninguna persona con la que compartamos la máquina sabrá absolutamente nada de
lo que hemos hecho con el ordenador.</p>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>Es importante recalcar que el modo incógnito protege la
privacidad de los aspectos relacionados bajo este epígrafe, pero no impide
individualizarnos mediante <a class="reference internal" href="#browser-fingerprint"><span class="std std-ref">huella digital</span></a>.</p>
</div>
</dd>
<dt><a class="reference external" href="https://chrome.google.com/webstore/detail/cookie-autodelete/fhcgjolkccmbidfldomjliifgaodjagh">Cookie Autodelete</a></dt><dd><p>Es un complemento (tanto para <a class="reference external" href="https://www.chromium.org">Chromium</a> como para <a class="reference external" href="https://www.mozilla.org/es-ES/firefox">Firefox</a>) que borra
automáticamente las <em>cookies</em> después de haber abandonado el dominio al que
pertenecen pasado el tiempo que configuremos (p.e. cinco minutos). Pueden
confeccionarse una lista blanca de sitios de los que no se eliminará la
cookie.</p>
<p>Es una alternativa de menor privacidad que el modo incógnito, pero que se
recuerden historial, datos de formulario, etc. facilita mucho la navegación,
por lo que, si no se comparte el navegador, es una buena alternativa.</p>
</dd>
</dl>
</section>
<section id="antirrastreo-activo">
<h3><span class="section-number">4.3.2.3. </span>Antirrastreo activo<a class="headerlink" href="#antirrastreo-activo" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Existen varios complementos que pueden instalarse para dificultar de forma activa
las acciones de rastreo:</p>
<dl>
<dt><a class="reference external" href="https://chrome.google.com/webstore/detail/noscript/doojmbjmlfjjnbmnoijecmcbfeoakpjm">NoScript</a></dt><dd><p>Bloquea todo el código <em>Javascript</em> y sólo permite aquel que vayamos marcando
como confiable.  La seguridad es mayúscula, pero
actualmente casi todos los sitios web requieren <em>Javascript</em> para funcionar,
por lo que, sobre todo al principio, requerirá constantemente que permitamos
la ejecución del código de las páginas.</p>
</dd>
<dt><a class="reference external" href="https://privacybadger.org/">Privacy Badger</a></dt><dd><p>Es un complemento para detectar rastreo mediante <em>cookies</em> o <em>supercookies</em>.
No detecta rastreo por <em>huella digital</em> (excepto, según afirman, la basada en
la <a class="reference external" href="https://developer.mozilla.org/es/docs/Web/HTML/Canvas">API de Canvas</a><a class="footnote-reference brackets" href="#id16" id="id8">8</a>)</p>
</dd>
<dt><a class="reference external" href="https://chrome.google.com/webstore/detail/canvas-blocker-fingerprin/nomnklagbgmgghhjidfhnoelnjfndfpd">Canvas Blocker</a></dt><dd><p>Bloque el rastreo por huella digital basado en la <a class="reference external" href="https://developer.mozilla.org/es/docs/Web/HTML/Canvas">API de Canvas</a>.</p>
</dd>
<dt><a class="reference external" href="https://chrome.google.com/webstore/detail/random-user-agent/einpaelgookohagofgnnkcfjbkkgepnp/related">Random User-Agent</a></dt><dd><p>Altera periódicamente (según la configuración) la cabecera <em>User-Agent</em> que
el navegador envía a los servidores web. Si este es uno de los datos que se
usan para generar la <em>huella digital</em> entonces lograremos cambiar cada cierto
tiempo de huella y, por tanto, dejar de ser rastreables. Del mismo palo son:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://chrome.google.com/webstore/detail/font-fingerprint-defender/fhkphphbadjkepgfljndicmgdlndmoke">Font Fingerprint Defender</a>, que altera al azar el valor de las fuentes
(compruébese utilizando <a class="reference external" href="https://webbrowsertools.com/font-fingerprint/">esta prueba de fuentes</a>)</p></li>
<li><p><a class="reference external" href="https://chrome.google.com/webstore/detail/webgl-fingerprint-defende/olnbjpaejebpnokblkepbphhembdicik">WebGL Fingerprint Defender</a>, que altera el valor el valor de WebGL
(compruébese utilizando <a class="reference external" href="https://webbrowsertools.com/webgl-fingerprint/">esta prueba de WebGL</a>).</p></li>
</ul>
</dd>
<dt><a class="reference external" href="https://www.localcdn.org/">LocalCDN</a></dt><dd><p>Muchas librerías de <em>Javascript</em>, iconos u hojas de estilo <abbr title="Cascading Style Sheets">CSS</abbr> se almacenan
en redes de distribución de contenidos (<abbr title="Content Delivery Network">CDN</abbr> por sus siglas en inglés), que
son servidores distribuidos a lo largo del mundo que alojan copias de esos
archivos. En principio favorecen la navegación, porque son capaces de servir
los archivos desde servidores más cercanos al cliente. Pero si tales
servicios no son de pago, entonces lo más probable es que saquen beneficio de
recolectar datos:</p>
<blockquote>
<div><p><em>Cuando un servicio es gratuito, el producto eres tú.</em></p>
</div></blockquote>
<p>La extensión <a class="reference external" href="https://www.localcdn.org/">LocalCDN</a> actúa como un <abbr title="Content Delivery Network">CDN</abbr> local, de suerte que intercepta
las peticiones a estos <abbr title="Content Delivery Network">CDN</abbr> e inyecta el código local almacenado, evitando
la consulta a estos <abbr title="Content Delivery Network">CDN</abbr>s. Evita el posible rastreo y, además, acelera la
navegación.</p>
</dd>
</dl>
</section>
<section id="ocultacion-del-origen">
<h3><span class="section-number">4.3.2.4. </span>Ocultación del origen<a class="headerlink" href="#ocultacion-del-origen" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Aunque ocultar el origen (la dirección <abbr title="Internet Protocol">IP</abbr> y la ubicación en caso de
dispositivos móviles) no impide que nuestro navegador pueda ser individualizado,
en ocasiones, puede desearse hacerlo por distintos motivos. Para ello hay dos
opciones:</p>
<dl>
<dt><a class="reference internal" href="../../../07.serre/04.vpn/index.html#vpn"><span class="std std-ref">Un servicio VPN</span></a></dt><dd><p>Trataremos los fundamentos en <a class="reference internal" href="../04.redes.html#seg-red-ser"><span class="std std-ref">la unidad sobre Redes y servidores</span></a>. Es conveniente aquí, sin embargo, notar que estos servicios
pueden ser:</p>
<ul class="simple">
<li><p>De pago que permite establecer una conexión <abbr title="Virtual Private Network">VPN</abbr> a todo el sistema
mediante algún protocolo (<a class="reference internal" href="../../../07.serre/04.vpn/02.wireguard/index.html#wireguard"><span class="std std-ref">Wireguard</span></a> o <a class="reference internal" href="../../../07.serre/04.vpn/01.openvpn/index.html#openvpn"><span class="std std-ref">OpenVPN</span></a> habitualmente), o mediante complementos del navegador.</p></li>
<li><p>Gratuitos mediante complementos de navegador (<a class="reference external" href="https://chrome.google.com/webstore/detail/vpn-free-betternet-unlimi/gjknjjomckknofjidppipffbpoekiipm/related">1clickVPN</a>, <a class="reference external" href="https://chrome.google.com/webstore/detail/setupvpn-lifetime-free-vp/oofgbpoabipfcfjapgnbbjjaenockbdp">SetupVPN</a>,
<a class="reference external" href="https://chrome.google.com/webstore/detail/vpn-free-betternet-unlimi/gjknjjomckknofjidppipffbpoekiipm/related">Betternet</a>, <a class="reference external" href="https://chrome.google.com/webstore/detail/hideme-proxy/ohjocgmpmlfahafbipehkhbaacoemojp/related">Hide.me</a>).</p></li>
</ul>
<p>Estos últimos son absolutamente desaconsejables.</p>
</dd>
<dt><a class="reference external" href="https://www.torproject.org">Proyecto TOR</a></dt><dd><p>El proyecto <abbr title="The Onion Router">TOR</abbr> habilita una serie de encaminadores intermedios que ocultan
a cada extremo de la conexión cuál es el otro extremo. Para usar estos
encaminadores el cliente debe conectarse a través de un <a class="reference internal" href="../../../07.serre/05.proxies/index.html#socks"><span class="std std-ref">proxy SOCKS</span></a>. Esta red puede usarse:</p>
<ul class="simple">
<li><p>Para acceder a la <a class="reference external" href="https://es.wikipedia.org/wiki/Internet_profunda">Internet Profunda</a> del <a class="reference external" href="https://es.wikipedia.org/wiki/.onion">dominio .onion</a>.</p></li>
<li><p>Para acceder a la Internet pública ocultando al servidor la <abbr title="Internet Protocol">IP</abbr> del
cliente, que sería el caso que nos ocupa. Sin embargo, aunque el destino no
sepa realmente nuestra <abbr title="Internet Protocol">IP</abbr> sí puede detectar que la petición procede de la
red <abbr title="The Onion Router">TOR</abbr> y bloquear la conexión.</p></li>
</ul>
<p>El proyecto desarrolla para el acceso a la red <abbr title="The Onion Router">TOR</abbr> una versión modificada
del navegador <a class="reference external" href="https://www.mozilla.org/es-ES/firefox">Firefox</a> orientada a la seguridad y la privacidad llamada <a class="reference external" href="https://www.torproject.org/download/">Tor
browser</a>.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>No obstante, la existencia del navegador, para el acceso al dominio
<code class="docutils literal notranslate"><span class="pre">.onion</span></code> y a la internet pública a través de la red <abbr title="The Onion Router">TOR</abbr> no es
necesario este navegador. El <em>proxy</em> SOCKS es instalable por separado
(<code class="code docutils literal notranslate"><span class="pre">ape</span> <span class="pre">install</span> <span class="pre">tor</span></code>) y puede configurarse el navegador para usarlo.
Eso sí, si esta acción se realiza por mantener el anonimato y la
privacidad habría que preocuparse de incorporar a nuestro navegador las
contramedidas expuestas bajo este epígrafe.</p>
</div>
</dd>
</dl>
</section>
</section>
<section id="ejercicios-sobre-seguridad-en-el-navegador">
<h2><span class="section-number">4.3.3. </span>Ejercicios sobre seguridad en el navegador<a class="headerlink" href="#ejercicios-sobre-seguridad-en-el-navegador" title="Enlazar permanentemente con este título">¶</a></h2>
<ol class="arabic">
<li><p>Utilizando <em>Firefox</em> o <em>Chromium</em> ilustre mediante capturas de pantalla:</p>
<ol class="loweralpha simple">
<li><p>Cómo deshabilitar que el navegador guarde contraseñas.</p></li>
<li><p>Sólo en <em>Firefox</em>: cómo habilitar una contraseña maestra que dé acceso
a las contraseñas almacenadas por el gestor.</p></li>
<li><p>Cómo impedir la aceptación de <em>cookies de terceros</em>.</p></li>
<li><p>Cómo borrar las cookies de un sitio web particular.</p></li>
<li><p>Cómo borrar manualmente toda la información privada almacenada en el
navegador.</p></li>
<li><p>Cómo abrir una ventana de incógnito. Pruébese a rellenar el formulario
de alguna página y, luego, accédase otra vez al formulario para ver que
los datos no se han almacenado.</p></li>
</ol>
<p>Por otro lado:</p>
<ol class="loweralpha simple" start="7">
<li><p>Instale un complemento que controle las <em>cookies</em> y se asegure de que se
borren automáticamente 5 minutos después de haber abandonado la página.
Compruebe que realmente ocurre esto.</p></li>
<li><p>Instale los complementos adecuados para evitar el seguimiento con <em>huella
digital</em>. Use las páginas indicadas en los apuntes para comprobar su
efectividad.</p></li>
<li><p>Evite el uso de <abbr title="Content Delivery Network">CDN</abbr>s.</p></li>
</ol>
</li>
<li><p>El ejercicio consiste en utilizar la red <abbr title="The Onion Router">TOR</abbr> de las siguientes formas:</p>
<ol class="loweralpha">
<li><p>Utilice el navegador que proporciona el propio proyecto, para acceder
tanto al dominio <code class="docutils literal notranslate"><span class="pre">.onion</span></code> como a la Internet pública. Documente los
siguientes pasos:</p>
<ul class="simple">
<li><p>Descargue el <a class="reference external" href="https://www.torproject.org/download/">navegador del proyecto TOR</a> para el sistema operativo que
esté utilizando.</p></li>
<li><p>Ábralo para:</p>
<ul>
<li><p>Comprobar que la <abbr title="Internet Protocol">IP</abbr> que observa un servidor web de la Internet
pública no es su <abbr title="Internet Protocol">IP</abbr> pública (puede usar <a class="reference external" href="https://api.ipify.org/?format=text">ipify.org</a>).</p></li>
<li><p>Acceder a un sitio del dominio <code class="docutils literal notranslate"><span class="pre">.onion</span></code> como el buscador
<a class="reference external" href="https://3g2upl4pq6kufc4m.onion/">duckduckgo</a>.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>Acceda tanto al dominio <code class="docutils literal notranslate"><span class="pre">.onion</span></code> como a la Internet pública con un
navegador convencional (<em>Firefox</em> y también <em>Chromium</em>), para lo cual
documente lo siguiente:</p>
<ul>
<li><p>La instalación del paquete <em>tor</em>.</p></li>
<li><p>Este paquete crea un <em>proxy</em> SOCKS v5 que escucha en un puerto de la
interfaz local. ¿Qué puerto es? Demuéstrelo.</p></li>
<li><p>Primero configure <em>Firefox</em> para que use este <em>SOCKS</em> en el apartado de
«Configuración de la red».</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Por defecto, <em>Firefox</em> sigue haciendo las consultas <abbr title="Domain Name Server">DNS</abbr>
directamente y no a través del proxy <em>SOCKS</em>. Para corregirlo tiene
que establecer a verdadera la variable
<code class="docutils literal notranslate"><span class="pre">network.proxy.socks_remote_dns</span></code> (a la que se accede a través de la
dirección «<a class="reference external" href="about:config">about:config</a>»).</p>
</div>
</li>
<li><p>Configure ahora <em>Chromium</em> para que haga lo propio. Esto puede lograrse
indicando cuál es el <em>proxy</em> SOCKS en la línea de órdenes:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>chromium --temp-profile --proxy-server<span class="o">=</span><span class="s1">&#39;socks5://ip:puerto&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p><em>Chromium</em> siempre usa el <em>proxy</em> para resolver nombres si la
consulta web se hace a través del <em>proxy</em>.</p>
</div>
</li>
<li><p>En ambos navegadores, haga las dos mis pruebas que en el caso anterior.</p></li>
</ul>
</li>
<li><p>Configure un navegador convencional (<em>Firefox</em> y también <em>Chromium</em>) para
acceder a la Internet pública directamente y al dominio <code class="docutils literal notranslate"><span class="pre">.onion</span></code> a
través de la red <abbr title="The Onion Router">TOR</abbr>. Documente los pasos:</p>
<ul>
<li><p>Debe crear un archivo <abbr title="Proxy Auto-Config">PAC</abbr> (p.e. llamado <code class="file docutils literal notranslate"><span class="pre">torproxy.pac</span></code>) con el
siguiente contenido:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span><span class="w"> </span><span class="nx">FindProxyForURL</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span><span class="w"> </span><span class="nx">host</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="nx">tor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;SOCKS5 IP:PUERTO&quot;</span><span class="p">;</span><span class="w">      </span><span class="c1">// Sustituya IP y PUERTO</span><span class="w"></span>
<span class="w">   </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<span class="w">       </span><span class="nx">shExpMatch</span><span class="p">(</span><span class="nx">host</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;*.onion&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">||</span><span class="w"></span>
<span class="w">       </span><span class="nx">url</span><span class="w"> </span><span class="o">===</span><span class="w"> </span><span class="s1">&#39;https://api.ipify.org/?format=json&#39;</span><span class="w"></span>
<span class="w">      </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nx">tor</span><span class="p">;</span><span class="w"></span>
<span class="w">   </span><span class="p">}</span><span class="w"></span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="s2">&quot;DIRECT&quot;</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>Este fichero hace que se use el <em>proxy</em> exclusivamente para los dominios
<code class="docutils literal notranslate"><span class="pre">.onion</span></code> y para una dirección concreta que devuelve la <abbr title="Internet Protocol">IP</abbr> de
conexión.</p>
</li>
<li><p>Utilice el archivo en la «Configuración de red» de <em>Firefox</em>.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>EL fichero es una <abbr title="Uniform Resource Locator">URL</abbr> de configuración que puede expresarse
como <code class="file docutils literal notranslate"><span class="pre">file:///path/absoluto/torproxy.pac</span></code>. Como en el caso
anterior deberá configurar el navegador para que se hagan las
peticiones <abbr title="Domain Name Server">DNS</abbr> a través del <em>proxy</em>.</p>
</div>
</li>
<li><p>Utilice el archivo en <em>Chromium</em> para lo cual tendrá que recurrir a la
línea de órdenes:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>chromium --temp-profile --proxy-pac-url<span class="o">=</span><span class="s1">&#39;data:application/x-javascript-config;base64,&#39;</span><span class="k">$(</span>base64 -w0 /path/torproxy.pac<span class="k">)</span>
</pre></div>
</div>
</li>
<li><p>En ambos navegadores, compruebe que:</p>
<ul class="simple">
<li><p>Accedemos al dominio <code class="docutils literal notranslate"><span class="pre">.onion</span></code>.</p></li>
<li><p>Que si consultamos nuestra <abbr title="Internet Protocol">IP</abbr> a través de la dirección incluida en
el fichero <abbr title="Proxy Auto-Config">PAC</abbr> obtenemos una dirección que no es nuestra (lo que
significa que accedemos a través de la red <abbr title="The Onion Router">TOR</abbr>).</p></li>
<li><p>Que si consultamos nuestra <abbr title="Internet Protocol">IP</abbr> a través de otra dirección (p.e.
usando la misma URL pero con el formato «text» en vez de «json»),
obtenemos nuestra <abbr title="Internet Protocol">IP</abbr>.</p></li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Este modo manual de usar el archivo <abbr title="Proxy Auto-Config">PAC</abbr> es bastante esotérico
y sólo responde a nuestra necesidad de hacer pruebas. Estos archivos,
por lo general, se sirven a través de <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr> (véase  <a class="reference external" href="https://es.wikipedia.org/wiki/Web_Proxy_Autodiscovery_Protocol">WPAD</a>) y
permiten configurar de manera automática el <em>proxy</em> de todos los
clientes que configuran automáticamente su red sin tener que hacer
configuraciones específicas en cada uno de ellos.</p>
</div>
</li>
</ol>
</li>
</ol>
<p class="rubric">Notas al pie</p>
<dl class="footnote brackets">
<dt class="label" id="id9"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Hay otra manera de que desde el navegador se afecte a todo el sistema:
los plugins (como el de <a class="reference external" href="https://es.wikipedia.org/wiki/Applet_Java">Java</a> o el de <a class="reference external" href="https://es.wikipedia.org/wiki/Adobe_Flash_Player">Flash</a>). Estos, sin embargo, han ido
desapareciendo paulatinamente de los navegadores, hasta el punto de que ya no
es posible ejecutarlos en los más modernos.</p>
</dd>
<dt class="label" id="id10"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p>De acuerdo, en realidad, <em>ECMAScript</em>, que es la versión normalizada del
lenguaje <em>Javascript</em> creado originariamente por <a class="reference external" href="https://es.wikipedia.org/wiki/Netscape_Communications_Corporation">Netscape</a>.</p>
</dd>
<dt class="label" id="id11"><span class="brackets"><a class="fn-backref" href="#id3">3</a></span></dt>
<dd><p>Y a veces, <a class="reference external" href="https://www.elespanol.com/omicrono/software/20200128/antivirus-avast-espio-vendio-datos-identificarte-internet/463203848_0.html">ni eso</a>.</p>
</dd>
<dt class="label" id="id12"><span class="brackets"><a class="fn-backref" href="#id4">4</a></span></dt>
<dd><p>Un elemento <a class="reference external" href="https://developer.mozilla.org/es/docs/Web/HTML/Elemento/input">&lt;input&gt;</a> de tipo
<code class="docutils literal notranslate"><span class="pre">password</span></code>.</p>
</dd>
<dt class="label" id="id13"><span class="brackets"><a class="fn-backref" href="#id5">5</a></span></dt>
<dd><p>La segunda se basa en la primera, pero usando una configuración de
<a class="reference internal" href="../../../07.serre/02.web/02.nginx/index.html#n-ginx"><span class="std std-ref">nginx</span></a> apropiada y es más simple. Parece tener, sin embargo,
algún error de implementación.</p>
</dd>
<dt class="label" id="id14"><span class="brackets"><a class="fn-backref" href="#id6">6</a></span></dt>
<dd><p>También se referencia como <em>del dispositivo</em> o <em>del navegador</em>.
Preferimos utilizar la expresión <em>del cliente</em>, porque la información que se
ofrece es alguna propia del sistema y alguna propia de la aplicación que
conecta con internet.</p>
</dd>
<dt class="label" id="id15"><span class="brackets"><a class="fn-backref" href="#id7">7</a></span></dt>
<dd><p>Es cierto que en este caso no podemos decir con propiedad que se use el
gestor de contraseñas del navegador, porque <a class="reference external" href="https://www.chromium.org">Chromium</a> lo que estará haciendo
en realidad es usar el gestor de contraseñas del sistema.</p>
</dd>
<dt class="label" id="id16"><span class="brackets"><a class="fn-backref" href="#id8">8</a></span></dt>
<dd><p>Parece, no obstante, no detectarlo o no ser completamente efectivo. La
página de prueba <a class="reference external" href="https://browserleaks.com/canvas">browserleaks.com</a> es
capaz de hacer el análisis.</p>
</dd>
</dl>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../../index.html">Tabla de contenido</a></h3>
    <ul>
<li><a class="reference internal" href="#">4.3. Seguridad en la navegación</a><ul>
<li><a class="reference internal" href="#amenazas">4.3.1. Amenazas</a><ul>
<li><a class="reference internal" href="#enganos">4.3.1.1. Engaños</a></li>
<li><a class="reference internal" href="#informacion-almacenada">4.3.1.2. Información almacenada</a></li>
<li><a class="reference internal" href="#rastreo">4.3.1.3. Rastreo</a></li>
</ul>
</li>
<li><a class="reference internal" href="#contramedidas">4.3.2. Contramedidas</a><ul>
<li><a class="reference internal" href="#antimalware">4.3.2.1. <em>Antimalware</em></a></li>
<li><a class="reference internal" href="#acceso-a-la-informacion-almacenada">4.3.2.2. Acceso a la información almacenada</a></li>
<li><a class="reference internal" href="#antirrastreo-activo">4.3.2.3. Antirrastreo activo</a></li>
<li><a class="reference internal" href="#ocultacion-del-origen">4.3.2.4. Ocultación del origen</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ejercicios-sobre-seguridad-en-el-navegador">4.3.3. Ejercicios sobre seguridad en el navegador</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Tema anterior</h4>
    <p class="topless"><a href="02.sistemas.html"
                          title="capítulo anterior"><span class="section-number">4.2. </span>Sistemas activos de seguridad</a></p>
  </div>
  <div>
    <h4>Próximo tema</h4>
    <p class="topless"><a href="../05.discos.html"
                          title="próximo capítulo"><span class="section-number">5. </span>Almacenamiento</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/guias/02.seg/04.redes/03.navegadores.rst.txt"
            rel="nofollow">Mostrar el código</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Búsqueda rápida</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Ir a" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="../05.discos.html" title="5. Almacenamiento"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="02.sistemas.html" title="4.2. Sistemas activos de seguridad"
             >anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" >Seguridad Informática</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../04.redes.html" ><span class="section-number">4. </span>Redes y servicios</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">4.3. </span>Seguridad en la navegación</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Derechos de autor CC BY 4.0, 2016-2022, José Miguel Sánchez Alés.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>
  </body>
</html>