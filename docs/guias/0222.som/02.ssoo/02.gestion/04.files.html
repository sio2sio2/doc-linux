


<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>2.2.4. Gestión de archivos &#8212; documentación de Linuxnomicón - rolling</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/classic.css" />
    <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
    
    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/translations.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    
    <link rel="index" title="Índice" href="../../../../genindex.html" />
    <link rel="search" title="Búsqueda" href="../../../../search.html" />
    <link rel="next" title="2.2.5. Gestión de la seguridad" href="05.seg.html" />
    <link rel="prev" title="2.2.3. Gestión de Entrada/Salida" href="03.io.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="05.seg.html" title="2.2.5. Gestión de la seguridad"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="03.io.html" title="2.2.3. Gestión de Entrada/Salida"
             accesskey="P">anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Sistemas Operativos Monopuesto</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" ><span class="section-number">2. </span>Sistemas operativos</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../02.gestion.html" accesskey="U"><span class="section-number">2.2. </span>Funciones</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2.2.4. </span>Gestión de archivos</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="gestion-de-archivos">
<h1><span class="section-number">2.2.4. </span>Gestión de archivos<a class="headerlink" href="#gestion-de-archivos" title="Enlazar permanentemente con este título">¶</a></h1>
<p>Los datos almacenados en las memorias de almacenamiento (discos duros, tarjetas
de memoria, etc.) se almacenan de forma permanente y, aunque también lo hacen en
formato binario, la manera de hacerlo es totalmente distinta a la que se
practica en la memoria principal. Como, además, los dispositivos de
almacenamiento son muy dispares, el sistema operativo se encarga de abstraer al
usuario y las aplicaciones de las particularidades del acceso y la escritura a
través de la <em>gestión de archivos</em>.</p>
<p>Esta gestión la llevan a cabo los <abbr title="Sistemas Operativos">SSOO</abbr> a través de un componente denominado
<em class="dfn">sistema de archivos</em><a class="footnote-reference brackets" href="#id9" id="id1">1</a>.</p>
<section id="organizacion-del-dispositivo">
<h2><span class="section-number">2.2.4.1. </span>Organización del dispositivo<a class="headerlink" href="#organizacion-del-dispositivo" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Para que se puedan leer y escribir archivos sobre un dispositivo, se requiere
primero dividirlo en partes que reciben el nombre de <em class="dfn">particiones</em><a class="footnote-reference brackets" href="#id10" id="id2">2</a>. A
cada partición es posible asignarle un sistema de archivos distinto, que haga a
la partición apta para la contención de archivos y directorios. Al proceso de
dotar de un sistema de archivos a una partición se le denomina <em class="dfn">formatear</em>.</p>
<p>Una vez creado el sistema operativo, el sistema operativo será capaz de definir
una serie de operaciones sobre archivos como crear, borrar, mover, modificar o
leer, que serán las que ordenen usuario y aplicaciones sobre el
dispositivo y que podrán ser completadas gracias al controlador del dispositivo.</p>
</section>
<section id="sistemas-de-archivos">
<h2><span class="section-number">2.2.4.2. </span>Sistemas de archivos<a class="headerlink" href="#sistemas-de-archivos" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El <em class="dfn">sistema de archivos</em> es el componente del sistema operativo encargado
de administración y gestionar las memorias de almacenamiento. Sus principales
funciones son:</p>
<ul class="simple">
<li><p>Estructurar la información en archivos y directorios (contenedores de archivos).</p></li>
<li><p>Asignar espacio en el dispositivo a los archivos.</p></li>
<li><p>Permitir el acceso a estos archivos.</p></li>
<li><p>Gestionar el espacio libre disponible.</p></li>
</ul>
<p>Existen distintos sistemas de archivos que serán usados dependiendo del sistema
operativo instalado en el equipo. Por lo general, los sistemas operativos
soportan varios sistemas de archivos, aunque usan preferentemente uno o varios
sobre el resto.</p>
<section id="caracteristicas">
<span id="sf-caract"></span><h3><span class="section-number">2.2.4.2.1. </span>Características<a class="headerlink" href="#caracteristicas" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Los sistemas de archivos pueden disponer o carecer de ciertas características:</p>
<dl class="simple">
<dt><strong>Tamaño máximo</strong> (<em>MA</em>/<em>MS</em>)</dt><dd><p>Los sistemas de archivos tienen limitados el tamaño máximo de archivo
y el tamaño máximo del propio sistema de archivos. En los que se usan
modernamente, estos tamaños son lo suficientemente grandes como para no ser
una preocupación, excepto en el sistema <abbr title="File Allocation Table">FAT</abbr>, que aún se usa por su
simplicidad en dispositivos externos de almacenamiento (4 GiB en ambos
casos).</p>
</dd>
<dt><strong>Journaling</strong></dt><dd><p>Cuando disponen de <em>journaling</em> los sistemas de archivos son capaces de
gestionar transacciones<a class="footnote-reference brackets" href="#id11" id="id3">3</a>. El <em>journaling</em> sirve para combatir la
corrupción de datos, por lo que un sistema que carezca de él será más
propenso a corromperse ante un apagado inesperado de la máquina.</p>
</dd>
<dt><strong>Seguridad</strong></dt><dd><p>Un sistema de archivos habilita la seguridad de los archivos cuando incluye
en las propiedades de los archivos qué acciones sobre el propio archivo
pueden hacer los distintos usuarios. Se profundizará en este aspecto al tratar
<a class="reference internal" href="05.seg.html#seg-ssoo"><span class="std std-ref">el próximo epígrafe</span></a>.</p>
</dd>
<dt><strong>Fragmentación</strong></dt><dd><p>Como en el caso de la memoria principal, las escrituras y borrados provocan
la fragmentación de los datos en los sistemas de archivos. Por lo general,
estos siguen estrategias para minimizar y corregir la fragmentación. Una
excepción, es <abbr title="File Allocation Table">FAT</abbr> que no dispone de estos mecanismos y que, en
consecuencia, tiende a presentar una gran fragmentación.</p>
</dd>
<dt><strong>Cuotas</strong> (<em>Q</em>)</dt><dd><p>Las cuotas permiten establecer cuál es el uso máximo que un usuario puede
hacer del sistema de archivos. Por ejemplo, habilitaría para que no pudiera
ocupar más de 1GiB en total. Por supuesto, requiere que el sistema tenga
implementada la seguridad, porque de lo contrario no se podrá conocer a quién
pertenece el archivo.</p>
</dd>
<dt><strong>Compresión</strong> (<em>Z</em>)</dt><dd><p>La compresión propicia que los archivos, de forma transparente, se almacenen
comprimidos en el sistema de archivos, lo que permite ahorrar espacio de
almacenamiento.</p>
</dd>
<dt><strong>Instantáneas</strong></dt><dd><p>Esta característica da la posibilidad de guardar el estado exacto de un
sistema de archivos en un instante dado. Esto permitiría retrotraerse a ese
instante en cualquier momento futuro.</p>
</dd>
<dt><strong>Espacios virtuales</strong></dt><dd><p>Es la capacidad del sistema de archivos para constituir una partición virtual
(llamada volumen) uniendo distintas particiones físicas de un mismo disco o
discos distintos.</p>
</dd>
<dt><strong>Cifrado</strong></dt><dd><p>El sistema de archivos puede también tener la capacidad de cifrar los datos
de forma transparente al almacenarlos sin necesidad de <em>software</em> adicional.</p>
</dd>
<dt><strong>RAID</strong></dt><dd><p>La capacidad de constituir un sistema <abbr title="Redundant Array of Inexpensive Disks">RAID</abbr> posibilita crear almacenamientos
tolerantes a fallos o mejorar los rendimientos de lectura y escritura.
Consulte <a class="reference internal" href="../../../../05.discos/06.raid/index.html#raid"><span class="std std-ref">la sección del manual de linux dedicada a RAIDs</span></a>
para más información.</p>
</dd>
</dl>
<table class="filesystems docutils align-default" id="id17">
<caption><span class="caption-text">Sistemas de archivos habituales</span><a class="headerlink" href="#id17" title="Enlace permanente a esta tabla">¶</a></caption>
<colgroup>
<col style="width: 15%" />
<col style="width: 32%" />
<col style="width: 8%" />
<col style="width: 8%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
<col style="width: 4%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Nombre</p></th>
<th class="head"><p>Sistema operativo<a class="footnote-reference brackets" href="#id12" id="id4">4</a></p></th>
<th class="head"><p>MA</p></th>
<th class="head"><p>MSA</p></th>
<th class="head"><p>J</p></th>
<th class="head"><p>S</p></th>
<th class="head"><p>Q</p></th>
<th class="head"><p>F</p></th>
<th class="head"><p>Z</p></th>
<th class="head"><p>I</p></th>
<th class="head"><p>E</p></th>
<th class="head"><p>C</p></th>
<th class="head"><p>R</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>FAT12</p></td>
<td><p>QDOS/MSDOS</p></td>
<td><p>10MiB</p></td>
<td><p>32MiB</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>FAT16</p></td>
<td><p>MSDOS</p></td>
<td><p>4GiB</p></td>
<td><p>4GiB</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>FAT32</p></td>
<td><p>Windows 9*</p></td>
<td><p>4GiB</p></td>
<td><p>8TiB</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>HPFS</p></td>
<td><p>OS/2</p></td>
<td><p>2GiB</p></td>
<td><p>2TiB</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>X</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>NTFS<a class="footnote-reference brackets" href="#id13" id="id5">5</a></p></td>
<td><p>Rama NT de Windows</p></td>
<td><p>16EiB</p></td>
<td><p>16EiB</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>X</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>ext2</p></td>
<td><p>Linux (obsoleto)</p></td>
<td><p>2TiB</p></td>
<td><p>32TiB</p></td>
<td><p>-</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>ext4</p></td>
<td><p>Linux</p></td>
<td><p>16TiB</p></td>
<td><p>1EiB</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>X</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>btrfs</p></td>
<td><p>Linux</p></td>
<td><p>16EiB</p></td>
<td><p>16EiB</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>XFS</p></td>
<td><p>Linux</p></td>
<td><p>8EiB</p></td>
<td><p>8EiB</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>F2FS</p></td>
<td><p>Linux</p></td>
<td><p>4TiB</p></td>
<td><p>16TiB</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>X</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>HFS</p></td>
<td><p>MacOs clásico</p></td>
<td><p>2GiB</p></td>
<td><p>2TiB</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>X</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>HFS+</p></td>
<td><p>MacOS v10</p></td>
<td><p>8EiB</p></td>
<td><p>8EiB</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>APFS</p></td>
<td><p>MacOS &gt;=v10.3</p></td>
<td><p>8EiB</p></td>
<td><p>8EiB</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>JFS</p></td>
<td><p>AIX</p></td>
<td><p>4PiB</p></td>
<td><p>32PiB</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>UFS<a class="footnote-reference brackets" href="#id14" id="id6">6</a></p></td>
<td><p>Solaris, *BSD</p></td>
<td><p>8ZiB</p></td>
<td><p>8ZiB</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>ZFS</p></td>
<td><p>Solaris, FreeBSD</p></td>
<td><p>16EiB</p></td>
<td><p>256ZiB</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
</tbody>
</table>
<p>Además, para los dispositivos opticos se utiliza un sistema de archivos
particular estandarizado denominado <em>CDFS</em> (y su sucesor <abbr title="Universal Disk Format">UDF</abbr>), también
conocido por la norma <em>ISO</em> en que se define: ISO-9660.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>También existen sistemas de archivos en red como <abbr title="Network File System">NFS</abbr> o <abbr title="Common Internet File System">CIFS</abbr>, cuya
utilidad es hacer accesible un sistema de archivos remoto. Se escapan al
propósito de este módulo.</p>
</div>
</section>
<section id="estructura-logica">
<span id="sf-log"></span><h3><span class="section-number">2.2.4.2.2. </span>Estructura lógica<a class="headerlink" href="#estructura-logica" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La estructura lógica es la visión de los datos que el sistema de archivos ofrece
a usuarios y aplicaciones. En ella los datos se agrupan en archivos, de manera
que un <em class="dfn">archivo</em> es un conjunto de datos que constituyen una unidad y se
manipulan como tal, la cual:</p>
<ul class="simple">
<li><p>Ocupa cierto espacio en el dispositivo.</p></li>
<li><p>Tiene un nombre para poder referirla. Su localización física (los bloques que
ocupa) es indiferente para aplicaciones y usuarios, ya que el nombre es la
referencia que usarán para acceder a ellos.</p></li>
<li><p>Tiene asociadas unas propiedades que determinan cómo pueda llegar a ser usado.</p></li>
<li><p>Constituye bien un programa, bien una información que debe ser interpretada
por un programa para que pueda ser útil. Por ejemplo, un archivo puede ser una
foto, que requerirá un visor de imágenes para poder ser vista; o un documento
<abbr title="Portable Document Format">PDF</abbr> que requerirá de un programa capaz de interpretarlos y mostrarlos, etc.</p></li>
</ul>
<p>Los archivos en el sistema de archivos se estructuran gracias a los directorios,
que permiten agrupar archivos. De este modo, todo archivo está incluído dentro
de un directorio. En consecuencia, un directorio (que es un archivo) también se
encuentra incluido dentro de otro directorio, al que se denomina
<em class="dfn">directorio padre</em>. Para que el nivel de directorios no sea infinito debe
existir un directorio que no tenga directorio padre, o mejor dicho, sea
directorio padre de sí mismo: a este directorio cuyo padre es él mismo se le
denomina <em class="dfn">directorio raíz</em> del sistema de archivos y de él parte la
estructura que adopta la forma de un árbol invertido, de ahí el nombre de árbol
de directorios:</p>
<img alt="../../../../_images/arbol.png" src="../../../../_images/arbol.png" />
<p>Para identificar inequivocamente a un archivo no se usa exclusivamente el
nombre, ya que puede haber dos archivos distintos de igual nombre en distintos
directorios, sino el nombre con la ruta para llegar a él. Hay dos rutas:</p>
<ul class="simple">
<li><p>La <strong>ruta absoluta</strong>, que es la lista ordenada de directorios a partir del
directorio raíz que debe seguirse para alcanzar el archivo. Por ejemplo, para
llegar al archivo <code class="file docutils literal notranslate"><span class="pre">passwd</span></code> hay que pasar por el directorio raíz, el
directorio <code class="file docutils literal notranslate"><span class="pre">etc</span></code> y, finalmente, se alcanza el archivo. En los sistemas
<em>UNIX</em> el directorio raíz se representa como <code class="file docutils literal notranslate"><span class="pre">/</span></code> que es justamente el
carácter que también se usa para separar los elementos de la lista. Por ese
motivo la ruta es: <code class="file docutils literal notranslate"><span class="pre">/etc/passwd</span></code>. En un sistema <em>Windows</em>, en cambio,
el caracter es <code class="file docutils literal notranslate"><span class="pre">\</span></code>, así que la ruta se expresa: <code class="file docutils literal notranslate"><span class="pre">\etc\passwd</span></code>.
Como la ruta absoluta de un archivo es única para cada archivo, este puede ser
un identificador válido para referir al archivo.</p></li>
<li><p>La <strong>ruta relativa</strong>, que es la ruta para llegar al archivo partiendo del
directorio en que nos encontremos trabajando. Como podemos cambiar de
directorio de trabajo, la ruta relativa no es única, sino que cambia según
cuál sea este directorio de trabajo.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Abundaremos enormemente en esto al estudiar de forma práctica los
sistemas operativos.</p>
</div>
<section id="propiedades">
<h4><span class="section-number">2.2.4.2.2.1. </span>Propiedades<a class="headerlink" href="#propiedades" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Los <em>archivos</em> tienen distintas propiedades:</p>
<dl>
<dt><strong>Nombre</strong></dt><dd><p>Todos los archivos tienen un <strong>nombre</strong> que los identifica inequívocamente. Cómo sea
el nombre dependerá del sistema de archivo en particular. En muchos sistemas
modernos la longitud está limitada a 255 <em>bytes</em>, aunque en otros más antiguos
como <abbr title="File Allocation Table">FAT</abbr>, la longitud era muchos más reducida: 8 <em>bytes</em> para el nombre en sí
y 3 para la extensión.</p>
<p>Además, es común que los nombres se descompongan en nombre y extensión, aunque en
muchos archivos esta descomposición es a efectos prácticos más que porque el
sistema de archivos haga tal división. La extensión está constituida por los
caracteres que siguen al último carácter punto. Por ejemplo:</p>
<table class="ej-nombres docutils align-default">
<colgroup>
<col style="width: 40%" />
<col style="width: 33%" />
<col style="width: 28%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Nombre completo</p></th>
<th class="head"><p>Nombre</p></th>
<th class="head"><p>Extensión</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>protesta.pdf</p></td>
<td><p>protesta</p></td>
<td><p>pdf</p></td>
</tr>
<tr class="row-odd"><td><p>index.html</p></td>
<td><p>index</p></td>
<td><p>html</p></td>
</tr>
<tr class="row-even"><td><p>retrato.jpg</p></td>
<td><p>retrato</p></td>
<td><p>jpg</p></td>
</tr>
<tr class="row-odd"><td><p>capitulo.1.txt</p></td>
<td><p>capitulo.1</p></td>
<td><p>txt</p></td>
</tr>
</tbody>
</table>
<p>y sirve para identificar el tipo de contenido del archivo y, en consecuencia,
con qué programa debe tratarse.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>Puede echarle un ojo a las <a class="reference external" href="https://es.wikipedia.org/wiki/Extensi%C3%B3n_de_archivo">extensiones más habituales</a>.</p>
</div>
</dd>
<dt><strong>Fechas</strong></dt><dd><p>Cada archivo tiene asociadas varias fechas que indican un momento concreto
relacionado con el propio archivo (cuando se creó, cuando se modificó por
última vez, etc.). Analizaremos más detenidamente esto al tratar de forma
práctica los sistemas operativos tras la <a class="reference internal" href="../../04.inst/index.html#som-inst"><span class="std std-ref">unidad dedicada a su
instalación</span></a>.</p>
</dd>
<dt><strong>Propietario</strong></dt><dd><p>Es el usuario que posee el archivo.</p>
</dd>
<dt><strong>Permisos</strong></dt><dd><p>Son los que determinan quiénes están autorizados para realizar una
determinada acción sobre el archivo (leerlo, modificarlo, etc.). Su análisis
se pospone hasya cuando utilicemos en la práctica los sistemas operativos tras
la <a class="reference internal" href="../../04.inst/index.html#som-inst"><span class="std std-ref">unidad dedicada a su instalación</span></a>.</p>
</dd>
<dt><strong>Tipo</strong></dt><dd><p>Al tipo dedicaremos un epígrafe aparte.</p>
</dd>
</dl>
</section>
<section id="tipos">
<h4><span class="section-number">2.2.4.2.2.2. </span>Tipos<a class="headerlink" href="#tipos" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Hay, fundamentelmente, dos tipos de archivos:</p>
<dl class="simple">
<dt><strong>Regulares</strong></dt><dd><p>Son los archivos que contienen información, bien porque contiene un programa
total o parcialmente, bien porque contienen datos cuya finalidad es que sean
procesados por un programa.</p>
</dd>
<dt><strong>Directorios</strong></dt><dd><p>Son archivos cuya misión es ser contenedores de archivos de cualquier tipo,
incluidos otros directorios.</p>
</dd>
</dl>
<p>También es común en los sistemas de archivos encontrar un tercer tipo:</p>
<dl class="simple">
<dt><strong>Enlaces</strong></dt><dd><p>Son simplemente enlaces hacia otros archivos. Esto permite localizar un
mismo contenido en dos ubicaciones distintas.</p>
</dd>
</dl>
<p>Además, en los sistemas <em>UNIX</em> todo se representa mediante un archivo, por lo
que existen todo un conjunto de <strong>archivos especiales</strong> cuya misión no es
almacenar información, sino representar dispositivos físicos o virtuales de
E/S. De este modo existen:</p>
<dl class="simple">
<dt><strong>De bloque</strong></dt><dd><p>Son archivos que representan <a class="reference internal" href="03.io.html#disp-block"><span class="std std-ref">dispositivos de bloques</span></a>. Por
ejemplo, en un <em>Linux</em> el archivo <code class="file docutils literal notranslate"><span class="pre">/dev/sda</span></code> es un archivo de bloques
que representa el primer disco duro (dispositivo físico de bloques).</p>
</dd>
<dt><strong>De caracteres</strong></dt><dd><p>Son archivos que representan <a class="reference internal" href="03.io.html#disp-char"><span class="std std-ref">dispositivos de caracteres</span></a>. Por
ejemplo, en un linux el archivo <code class="file docutils literal notranslate"><span class="pre">/dev/psaux</span></code> es un archivo de
caracteres que representa al ratón (dispositivo físico de caracteres).</p>
</dd>
<dt><strong>De tubería</strong></dt><dd><p>Son archivos que representan <em>tuberías</em> (<em>pipelines</em> en la terminología
inglesa), las cuales son un canal para comunicar dos procesos de un mismo
sistema entre sí, de modo que los datos de salida de uno pasan como datos de
entrada al otro.</p>
</dd>
<dt><strong>De socket</strong></dt><dd><p>Son archivos que representan <em>sockets</em>, los cuales actúan como canal de
comunicación entre dos o más procesos de un mismo sistema.</p>
</dd>
</dl>
</section>
</section>
<section id="estructura-fisica">
<span id="sf-fis"></span><h3><span class="section-number">2.2.4.2.3. </span>Estructura física<a class="headerlink" href="#estructura-fisica" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Físicamente un disco se compone de <em class="dfn">sectores</em>, que es la unidad mínima que
puede ser leída o escrita en un disco. Si escribiéramos o leyéramos a bajo
nivel, esto es, prescindiendo de las estructuras que crea el sistema de
archivos, leeríamos o escribiríamos como mínimo en cada acceso un sector. En los
discos magnéticos el tamaño del sector es típicamente de 512 <em>bytes</em>, pero en
los discos <abbr title="Solid-State Drive">SSD</abbr> el tamaño habitual es <strong>4</strong>KiB.</p>
<p>En cambio, cuando creamos un sistema de archivos este divide el espacio en
<em class="dfn">bloques</em><a class="footnote-reference brackets" href="#id15" id="id7">7</a>, constituidos por sectores contiguos, y que son la unidad
mínima que usando el sistema de archivos podremos leer o escribir.</p>
<p>Cuando se almacena en disco un archivo este ocupará un determinado número de
bloques que, dependiendo de los mecanismos de asignación que utilice el sistema
de archivos, serán contiguos o no. Como un bloque es la unidad mínima, un mismo
bloque no puede estar ocupado por más de un archivo, por lo que lo habitual es
que el último bloque ocupado por dicho archivo no esté totalmente lleno y el
espacio restante quede inútil, provocando una <em class="dfn">fragmentación interna</em>. Por
tanto, disminuir el tamaño de bloque reduce la <em>fragmentación interna</em>, pero a
costa de perjudicar el rendimiento, ya que hay que leer mayor número de bloques
que, además, es probable que no sean contiguos:</p>
<img alt="../../../../_images/bloques.png" src="../../../../_images/bloques.png" />
<p>El tamaño de bloque, pues, más apropiado debe lograr un equilibrio entre la
<em>fragmentación</em> interna y el rendimiento.</p>
<p>El concepto de <em>fragmentación</em> como pérdida de capacidad de almacenamiento es el
que hemos descrito ahora y se analizó también para las memorias <abbr title="Random Access Memory">RAM</abbr>. Sin
embargo, al hablar de <em class="dfn">fragmentación en el sistema de archivos</em> solemos
referirmos a la fragmentación de los archivos dentro del disco, esto es, a que
el contenido de un archivo no se almacene en bloques contiguos, sino repartido
en dos o más conjuntos de bloques contiguos. Esta fragmentación no afecta a la
capacidad de almacenamiento y en discos <abbr title="Solid-State Drive">SSD</abbr> esto no tiene excesiva
importancia, pero en discos mecánicos, en los que hay que desplazar el cabezal
para leer y escribir, la <em>fragmentación</em> afecta considerablemente al
rendimiento, por lo que un sistema de archivos que habilite mecanismos para
limitar la fragmentación es deseable. Este es el concepto de fragmentación que
se usó al analizar las <a class="reference internal" href="#sf-caract"><span class="std std-ref">características de los sistemas de archivos</span></a>.</p>
<p>Otro problema que debe resolver el sistema de archivo es conocer cuáles son los
distintos bloques en los que está almacenado un archivo. Hay distintas técnicas:</p>
<dl>
<dt><strong>Asignación adyacente</strong></dt><dd><p>Consiste en que el archivo ocupe siempre bloques adyacentes. Es muy sencillo
ya que sólo es necesario saber cuál es el bloque en el que comienza el
archivo. El problema es la enorme <em class="dfn">fragmentación externa</em> que provoca
esta estrategia.</p>
</dd>
<dt><strong>Asignación por lista enlazada</strong></dt><dd><p>Consiste en almacenar en cada bloque, además del propio archivo, la dirección
del siguiente bloque. El último bloque no apuntará a ninguno por lo que se
sabrá que es el último.</p>
</dd>
<dt><strong>Asignación por lista enlazada y tabla</strong></dt><dd><p>Es una variante del anterior en que se dispone una tabla que contiene un
registro por cada bloque del sistema de archivos, de manera que el registro 0
se corresponde con el bloque 0, el registro 1 con el bloque 1, etc. Estos
registros contienen la dirección del siguiente registro (o bloque) y el
bloque se usa exclusivamente para almacenar la información del archivo. Como
la tabla se carga en memoria, seguir la secuencia de bloques que constituyen
un archivo es mucho más rápido, ya que no hay que acceder a disco. La
contraprestación es que la tabla puede ocupar mucho espacio en memoria si el
sistema de archivos es muy grande.</p>
<p>Esta técnica es la que usan los sistemas de archivos <abbr title="File Allocation Table">FAT</abbr>16 y <abbr title="File Allocation Table">FAT</abbr>32,
siendo el número el tamaño en <em>bits</em> de las direcciones.</p>
</dd>
<dt><strong>Asignación basada en inodos</strong></dt><dd><p>Es la típica de los sistemas de archivos propios de <em>UNIX</em>. En ellos hay:</p>
<ul class="simple">
<li><p>Un <em class="dfn">superbloque</em> que es un bloque que contiene las características del
sistema de archivos y sin cuya lectura es imposible saber cómo leer el
resto del sistema.</p></li>
<li><p>Un conjunto de bloques que contienen los datos (esto es el contenido de los
archivos).</p></li>
<li><p>Un conjunto de bloques que contienen unas estructuras llamadas <em>inodos</em><a class="footnote-reference brackets" href="#id16" id="id8">8</a>.</p></li>
</ul>
<p>Cada <em>inodo</em> tiene un número identificativo único y contiene los metadatos
asociados a un único archivo, esto es, sus propiedades (propietario, tamaño
en <em>bytes</em>, permisos, etc, pero no el nombre) y una tabla de direcciones:</p>
<ul class="simple">
<li><p>Las primeras direcciones apuntan directamente a bloques de datos: son las
llamadas <em class="dfn">entradas directas</em>.</p></li>
<li><p>Las últimas direcciones no apuntan directamente a bloques de datos, sino a
bloques que a su vez contienen direcciones. Así, una <em class="dfn">entrada indirecta
simple</em> apunta a un bloque que contiene direcciones que apuntan a bloques
de datos: una <em class="dfn">entrada indirecta doble</em> apunta a un bloque que
contiene direcciones que apuntan a bloques que contienen direcciones que
apuntan a bloques de datos, etc.</p></li>
</ul>
<p>Podemos ilustrarlo con un esquema tomado directamente de <a class="reference external" href="https://es.wikipedia.org">Wikipedia</a>:</p>
<a class="reference internal image-reference" href="https://upload.wikimedia.org/wikipedia/commons/0/09/Ext2-inode.svg"><img alt="https://upload.wikimedia.org/wikipedia/commons/0/09/Ext2-inode.svg" src="https://upload.wikimedia.org/wikipedia/commons/0/09/Ext2-inode.svg" width="600" /></a>
<p>Por ejemplo, en el sistema de archivos descrito por el estándar <abbr title="Portable Operating System Interface for uniX">POSIX</abbr> la
tabla de direcciones del inodo contiene 13 entradas, diez de las cuales son
directas, una es indirecta simple, otra indirecta doble y otra indirecta
triple. En este caso, si consideramos que:</p>
<ul class="simple">
<li><p>Los bloques tienen 1KB de tamaño.</p></li>
<li><p>Las direcciones son de 32 <em>bits</em> (4 <em>bytes</em>).</p></li>
</ul>
<p>Podemos extraer las siguientes conclusiones:</p>
<ul>
<li><p>El <strong>tamaño máximo</strong> teórico para el sistema de archivos es <span class="math notranslate nohighlight">\(2^{32}\)</span> KB, o
sea, 4 TB, ya que hay <span class="math notranslate nohighlight">\(2^{32}\)</span> direcciones posibles para los bloques
y cada bloque tiene 1KB de tamaño.</p></li>
<li><p>Como cada archivo debe estar descrito por un <em>inodo</em>, la <strong>cantidad máxima de
archivos</strong> posibles depende de cuál sea el máximo número de inodos que puedan
identificarse. El identificador máximo depende de cuál sea el número de
<em>bits</em> que en el código fuente que implementa el sistema de archivos, se hayan
utilizado para representar al identificador. Si los identificadores fueran
de 32 <em>bits</em>, entonces existirían <span class="math notranslate nohighlight">\(2^{32}\)</span> identificadores distintos,
esto es, más de 4 mil millones.</p></li>
<li><p>El <strong>tamaño máximo</strong> de archivo depende de cuál sea el número máximo de
bloques que puedan direccionarse a partir de un inodo. Partiendo de que los
bloques son de 1KB (1024B) y que sus direcciones tiene 32 <em>bits</em> (4B) en
cada bloque podemos almacenar 256 direcciones, esto es, <span class="math notranslate nohighlight">\(2^{8}\)</span>. Por
tanto:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 25%" />
<col style="width: 19%" />
<col style="width: 19%" />
<col style="width: 19%" />
<col style="width: 19%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Entradas</p></th>
<th class="head"><p>Direcciones 1</p></th>
<th class="head"><p>Direcciones 2</p></th>
<th class="head"><p>Direcciones 3</p></th>
<th class="head"><p>Direcciones 4</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Directas</p></td>
<td><p>10</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>Indirectas simples</p></td>
<td><p>1</p></td>
<td><p>256</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>Indirectas dobles</p></td>
<td><p>1</p></td>
<td><p>256</p></td>
<td><p>256</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>Indirectas triples</p></td>
<td><p>1</p></td>
<td><p>256</p></td>
<td><p>256</p></td>
<td><p>256</p></td>
</tr>
</tbody>
</table>
<p>Por tanto, el número de bloques que puede ocupar un archivo es <span class="math notranslate nohighlight">\(10 +
2^8 + 2^{16} + 2^{24}\)</span> y, como cada bloque tiene de tamaño un 1KB, el
mayor tamaño teórico de un archivo es algo mayor a 16 GB. Sin embargo, como
uno de las propiedades que se incluye en el inodo es el tamaño en bytes del
archivo y para eso se usan 32 <em>bits</em>, el tamaño máximo expresable es de
<span class="math notranslate nohighlight">\(2^{32}\)</span> bytes, esto es, 4GB.</p>
</li>
</ul>
<p>Gracias, pues, a los inodos podemos referir en qué bloques de datos se
encuentra el contenido de los archivos y cuáles son las propiedades del
archivos.  Ahora bien, entre esas propiedades no se encuentran el propio
nombre del archivo. Esto es debido a que los directorios son también archivos
cuyo contenido es básicamente una tabla de dos columnas que relaciona los
nombres de los archivos que contiene con el <em>inodo</em> que representa a cada
uno.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>Para un análisis en mayor profundidad de los sistemas de
archivos en UNIX consulte <a class="reference external" href="https://w3.ual.es/~acorral/DSO/Tema_4.pdf">estos apuntes universitarios</a>.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>También es interesante <a class="reference external" href="https://metebalci.com/blog/a-minimum-complete-tutorial-of-linux-ext4-file-system/#:~:text=ext4%20allocates%20storage%20in%20a,of%20blocks%20in%20this%20filesystem.">esta descripción</a>
(en inglés) del sistema de archivos ext4 de <em>Linux</em>.</p>
</div>
</dd>
</dl>
<p class="rubric">Notas al pie</p>
<dl class="footnote brackets">
<dt class="label" id="id9"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>O <em>sistema de ficheros</em>. Es común usar indistintamente el término
<em>archivo</em> o <em>fichero</em> en castellano.</p>
</dd>
<dt class="label" id="id10"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p>Cómo y cuántas particiones pueden realizarse se abordará con detalle en
la próxima unidad.</p>
</dd>
<dt class="label" id="id11"><span class="brackets"><a class="fn-backref" href="#id3">3</a></span></dt>
<dd><p>Una transacción está compuesta por varias acciones cuyo conjunto debe
considerarse atómico, esto es, o se llevan a cabo todas o no debe llevarse a
cabo ninguna. El concepto es ampliable a otros aspectos de la informática.
Para entenderlo consideremos una venta: vender un producto implica por un
lado apuntar el cobro y por otro lado restarlo del inventario. Deben llevarse
a cabo las dos acciones, porque de lo contrario habrá un descuadre.</p>
</dd>
<dt class="label" id="id12"><span class="brackets"><a class="fn-backref" href="#id4">4</a></span></dt>
<dd><p>Los sistemas referidos son los sistemas que lo tienen como sistema
de archivos habitual, no los que son capaces de soportarlo.</p>
</dd>
<dt class="label" id="id13"><span class="brackets"><a class="fn-backref" href="#id5">5</a></span></dt>
<dd><p><abbr title="NT File System">NTFS</abbr> introdujo cifrado en su versión 3.0 a través de una
característica llamada <abbr title="Encrypting File System">EFS</abbr>. Está disponible en todas las versiones de
<em>Windows</em> que no sean <em>Home</em>.</p>
</dd>
<dt class="label" id="id14"><span class="brackets"><a class="fn-backref" href="#id6">6</a></span></dt>
<dd><p><abbr title="Unix File System">UFS</abbr> deriva del sistema de archivos de Berkeley usado en el <abbr title="Berkeley Software Distribution">BSD</abbr>
original. En algunos sistemas como Solaris o FreeBSD ha sido sustituido por
<abbr title="Zettabyte File System">ZFS</abbr>.</p>
</dd>
<dt class="label" id="id15"><span class="brackets"><a class="fn-backref" href="#id7">7</a></span></dt>
<dd><p>En los sistemas de archivos de <em>Windows</em> se usa el término
<em class="dfn">clúster</em> en vez de bloque.</p>
</dd>
<dt class="label" id="id16"><span class="brackets"><a class="fn-backref" href="#id8">8</a></span></dt>
<dd><p>A diferencia de lo que ocurre con los bloques de datos, en cada uno de
los cuales sólo puede haber datos correspondientes a un archivo, en los
bloques que almacenan inodos, sí puede haber varios inodos en un mismo
bloque.</p>
</dd>
</dl>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../../../index.html">Tabla de contenido</a></h3>
    <ul>
<li><a class="reference internal" href="#">2.2.4. Gestión de archivos</a><ul>
<li><a class="reference internal" href="#organizacion-del-dispositivo">2.2.4.1. Organización del dispositivo</a></li>
<li><a class="reference internal" href="#sistemas-de-archivos">2.2.4.2. Sistemas de archivos</a><ul>
<li><a class="reference internal" href="#caracteristicas">2.2.4.2.1. Características</a></li>
<li><a class="reference internal" href="#estructura-logica">2.2.4.2.2. Estructura lógica</a><ul>
<li><a class="reference internal" href="#propiedades">2.2.4.2.2.1. Propiedades</a></li>
<li><a class="reference internal" href="#tipos">2.2.4.2.2.2. Tipos</a></li>
</ul>
</li>
<li><a class="reference internal" href="#estructura-fisica">2.2.4.2.3. Estructura física</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Tema anterior</h4>
    <p class="topless"><a href="03.io.html"
                          title="capítulo anterior"><span class="section-number">2.2.3. </span>Gestión de Entrada/Salida</a></p>
  </div>
  <div>
    <h4>Próximo tema</h4>
    <p class="topless"><a href="05.seg.html"
                          title="próximo capítulo"><span class="section-number">2.2.5. </span>Gestión de la seguridad</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../../../../_sources/guias/0222.som/02.ssoo/02.gestion/04.files.rst.txt"
            rel="nofollow">Mostrar el código</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Búsqueda rápida</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Ir a" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="05.seg.html" title="2.2.5. Gestión de la seguridad"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="03.io.html" title="2.2.3. Gestión de Entrada/Salida"
             >anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >Sistemas Operativos Monopuesto</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" ><span class="section-number">2. </span>Sistemas operativos</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../02.gestion.html" ><span class="section-number">2.2. </span>Funciones</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2.2.4. </span>Gestión de archivos</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Derechos de autor CC BY 4.0, 2016-2022, José Miguel Sánchez Alés.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>
  </body>
</html>