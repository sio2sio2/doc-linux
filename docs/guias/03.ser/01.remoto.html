


<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>1. Administración remota &#8212; documentación de Linuxnomicón - rolling</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/classic.css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/translations.js"></script>
    
    <link rel="index" title="Índice" href="../../genindex.html" />
    <link rel="search" title="Búsqueda" href="../../search.html" />
    <link rel="next" title="2. DHCP" href="02.dhcp.html" />
    <link rel="prev" title="Secuenciación" href="orientaciones/01.sec.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="02.dhcp.html" title="2. DHCP"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="orientaciones/01.sec.html" title="Secuenciación"
             accesskey="P">anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U">Servicios en red</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">1. </span>Administración remota</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="administracion-remota">
<span id="ser-adm-rem"></span><h1><span class="section-number">1. </span>Administración remota<a class="headerlink" href="#administracion-remota" title="Enlazar permanentemente con este título">¶</a></h1>
<p>Los <em>servicios de administración remota</em> permiten el acceso y manipulación de un
equipo desde otro situado en la misma o distinta red. Exigen la autenticación
del usuario remoto, por lo que es fundamental que la comunicación sea segura.</p>
<p>Hay, fundamentalmente, dos tipos de servicios:</p>
<ul class="simple">
<li><p>Los <strong>servicios gráficos</strong> que permiten acceder a sistemas con entorno de
escritorio.</p></li>
<li><p>Los <strong>servicios de terminal de texto</strong> que permiten acceder al entorno de la
<em>shell</em> de un servidor remoto.</p></li>
</ul>
<section id="servicios-graficos">
<h2><span class="section-number">1.1. </span>Servicios gráficos<a class="headerlink" href="#servicios-graficos" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Nos centraremos en tres:</p>
<ol class="arabic simple">
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/Remote_Desktop_Protocol">Remote Desktop Protocol</a>, que es el
protocolo que traen incorporados los <em>Windows</em> modernos para su
administración remota.</p></li>
<li><p><a class="reference external" href="https://es.wikipedia.org/wiki/VNC">VNC</a>, que se basa en <a class="reference external" href="https://es.wikipedia.org/wiki/RFB_protocol">el protocolo
RFB</a> y tiene versiones para
múltiples sistemas operativos tanto como servidor como cliente.</p></li>
<li><p><a class="reference external" href="https://en.wikipedia.org/wiki/TeamViewer_(company)">TeamViewer</a>, que
también funciona en múltiples sistemas operativos y está enfocado al soporte
técnico: facilita que un técnico pueda acceder al ordenador de un cliente a
fin de resolverle algún problema.</p></li>
</ol>
<section id="remote-desktop-protocol-rdp">
<h3><span class="section-number">1.1.1. </span>Remote Desktop Protocol (<abbr title="Remote Desktop Protocol">RDP</abbr>)<a class="headerlink" href="#remote-desktop-protocol-rdp" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Permite gestionar de manera remota un sistema <em>Windows</em> desde cualquier sistema (gracias a que existe <a class="reference external" href="https://www.freerdp.com">FreeRDP</a>, aunque existen otras implementaciones libres). Las claves para su uso son las siguientes:</p>
<p class="rubric">Servidor</p>
<p>Se puede acceder a su configuración a través de <kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">Configuración&gt;Sistema&gt;Escritorio</kbd> <kbd class="kbd docutils literal notranslate">remoto</kbd></kbd>, aunque en la búsqueda basta con escribir «<kbd class="kbd docutils literal notranslate">remoto</kbd>» para que una de las opciones sea «Configuración del escritorio remoto». Por defecto, está deshabilitado, de modo que habrá que habilitarlo:</p>
<img alt="../../_images/conf-rdp.png" src="../../_images/conf-rdp.png" />
<p>Si nuestra intención es conectarnos desde un cliente distinto al de <em>Windows</em>
(p.e. desde <em>Linux</em>), necesitamos deshabilitar en la configuración avanzada la
autenticación a nivel de red:</p>
<img alt="../../_images/conf-rdp-avanzada.png" src="../../_images/conf-rdp-avanzada.png" />
<p class="rubric">Cliente</p>
<p>En <em>Windows</em> el cliente es muy fácil de usar. Basta con ejecutar <strong class="program">mstsc.exe</strong> al que se puede acceder sin recordar el nombre simplemente con escribir en la búsqueda «<kbd class="kbd docutils literal notranslate">remoto</kbd>» y escoger la opción de «Conexión a Escritorio remoto»:</p>
<img alt="../../_images/conex-rdp.png" src="../../_images/conex-rdp.png" />
<p><em>Linux</em> tiene varios clientes competentes: <a class="reference external" href="https://packages.debian.org/stable/rdesktop">rdesktop</a> o <a class="reference external" href="https://packages.debian.org/stable/remmina">remmina</a>
(este último también sirve como cliente VNC).</p>
</section>
<section id="id1">
<h3><span class="section-number">1.1.2. </span><abbr title="Virtual Network Computing">VNC</abbr><a class="headerlink" href="#id1" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Permite la gestión remota de múltiples sistemas desde un cliente que puede correr también en múltiples sistemas. Como para la gestión de un <em>Windows</em> es mejor utilizar su solución nativa (<abbr title="Remote Desktop Protocol">RDP</abbr>), reservaremos esta posibilidad para la gestión remota de un <em>Linux</em>.</p>
<p class="rubric">Servidor</p>
<p>Podemos usar <a class="reference external" href="//https://tigervnc.org">TigerVNC</a>. Si lo usamos, la mejor alternativa es utilizarlo como un módulo de <strong class="program">Xorg</strong>, para lo cual:</p>
<ol class="arabic">
<li><p>Instalamos:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>apt install tigervnc-xorg-extension
</pre></div>
</div>
</li>
<li><p>Se crea el archivo de configuración para la carga del módulo<a class="footnote-reference brackets" href="#id6" id="id2">1</a>:</p>
<div class="highlight-xorg.conf notranslate"><div class="highlight"><pre><span></span><span class="c"># /etc/X11/xorg.conf.d/10-tigervnc.conf</span>
<span class="se">Section</span> <span class="se">&quot;Module&quot;</span>
   <span class="nb">Load</span> <span class="no">&quot;vnc&quot;</span>
<span class="se">EndSection</span>

<span class="se">Section</span> <span class="se">&quot;Screen&quot;</span>
   <span class="nb">Identifier</span> <span class="no">&quot;Screen0&quot;</span>

   <span class="c"># Sin autenticación</span>
   <span class="c">#Option &quot;SecurityTypes&quot; &quot;VeNCrypt,TLSNone&quot;</span>

   <span class="c"># Autenticación mediante contraseña</span>
   <span class="nb">Option</span> <span class="no">&quot;SecurityTypes&quot; &quot;VeNCrypt,TLSVnc&quot;</span>
   <span class="nb">Option</span> <span class="no">&quot;PasswordFile&quot; &quot;/etc/tigervnc/vncpasswd&quot;</span>

   <span class="c"># Autenticación mediante usuario/contraseña local</span>
   <span class="c">#Option &quot;SecurityTypes&quot; &quot;VeNCrypt,TLSPlain&quot;</span>
   <span class="nb">Option</span> <span class="no">&quot;PAMService&quot; &quot;tigervnc&quot;</span>
   <span class="nb">Option</span> <span class="no">&quot;PlainUsers&quot; &quot;usuario,otrousuario&quot;</span>
<span class="se">EndSection</span>
</pre></div>
</div>
</li>
<li><p>El archivo anterior presenta tres alternativas:</p>
<ul>
<li><p>La primera (deshabilitada) permite el acceso al servidor sin contraseña, lo
cual no es nada recomendable.</p></li>
<li><p>La segunda (que es la que está habilitada) exige la autenticación
mediante una contraseña almacenada en un archivo. Si preferimos esta opción,
necesitaremos crear la contraseña dentro de tal archivo con la orden:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>vncpasswd /etc/tigervnc/vncpasswd
</pre></div>
</div>
</li>
<li><p>La tercera (deshabilitada también) permite la autenticación usando
las credenciales de un usuario del sistema. Mediante la opción
<kbd class="kbd docutils literal notranslate">PlainUsers</kbd> definimos la lista de usuarios válidos.</p></li>
</ul>
<p>Para utilizar cualquier otra alternativa, basta con comentar/descomentar las
líneas correspondientes que definen el tipo de seguridad.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>El protocolo <abbr title="Virtual Network Computing">VNC</abbr> original es inseguro y para asegurarlo se puede
tunelizar con <abbr title="Security SHell">SSH</abbr> o con <abbr title="Secure Sockets Layer">SSL</abbr>, o utilizar una <abbr title="Virtual Private Network">VPN</abbr>. Sin embargo, se han
creado posteriormente extensiones que le añaden funcionalidades.  Una de
ellas es «VeNCrypt», que le añade cifrado <abbr title="Secure Sockets Layer">SSL</abbr>, y que se usa en nuestra
configuración propuesta. Por tanto, las comunicaciones entre cliente y
servidor estarán cifradas. Échele un vistazo a <a class="reference internal" href="#tabla-auth-vnc"><span class="std std-ref">la tabla con los
distintos tipos de seguridad</span></a> que podemos definir.</p>
</div>
</li>
<li><p>Reiniciamos el servidor gráfico para que se haga efectiva la carga del módulo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>pkill -1 X
</pre></div>
</div>
</li>
<li><p>Una vez de regreso, comprobamos que el servidor escucha en el puerto <em>5900</em>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ss -4ltn
<span class="go">  State        Recv-Q       Send-Q             Local Address:Port             Peer Address:Port      Process</span>
<span class="go">  LISTEN       0            5                        0.0.0.0:5900                  0.0.0.0:*</span>
</pre></div>
</div>
</li>
</ol>
<p>Si quieren explorarse otros tipos de seguridad, puede tomar como guía esta
tabla:</p>
<table class="auth-vnc docutils align-default" id="id8">
<caption><span class="caption-text">Tipos de seguridad</span><a class="headerlink" href="#id8" title="Enlace permanente a esta tabla">¶</a></caption>
<colgroup>
<col style="width: 11%" />
<col style="width: 13%" />
<col style="width: 10%" />
<col style="width: 38%" />
<col style="width: 28%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="2"><p>Seguridad</p></th>
<th class="head"><p>Cifrado</p></th>
<th class="head"><p>Autenticidad del servidor<a class="footnote-reference brackets" href="#id7" id="id3">2</a></p></th>
<th class="head"><p>Autenticación</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td colspan="2"><p>None</p></td>
<td><p>No</p></td>
<td><p>No</p></td>
<td><p>Ninguna</p></td>
</tr>
<tr class="row-odd"><td colspan="2"><p>VncAuth</p></td>
<td><p>No</p></td>
<td><p>No</p></td>
<td><p>Con contraseña</p></td>
</tr>
<tr class="row-even"><td colspan="2"><p>Plain</p></td>
<td><p>No</p></td>
<td><p>No</p></td>
<td><p>Con usuario/contraseña</p></td>
</tr>
<tr class="row-odd"><td rowspan="6"><p>VeNCrypt</p></td>
<td><p>TLSNone</p></td>
<td><p>Sí</p></td>
<td><p>No</p></td>
<td><p>Ninguna</p></td>
</tr>
<tr class="row-even"><td><p>TLSVnc</p></td>
<td><p>Sí</p></td>
<td><p>No</p></td>
<td><p>Con contraseña</p></td>
</tr>
<tr class="row-odd"><td><p>TLSPlain</p></td>
<td><p>Sí</p></td>
<td><p>No</p></td>
<td><p>Con usuario/contraseña</p></td>
</tr>
<tr class="row-even"><td><p>X509None</p></td>
<td><p>Sí</p></td>
<td><p>Sí</p></td>
<td><p>Ninguna</p></td>
</tr>
<tr class="row-odd"><td><p>X509Vnc</p></td>
<td><p>Sí</p></td>
<td><p>Sí</p></td>
<td><p>Con contraseña</p></td>
</tr>
<tr class="row-even"><td><p>X509Plain</p></td>
<td><p>Sí</p></td>
<td><p>Sí</p></td>
<td><p>Con usuario/contraseña</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Cliente</p>
<p>Existen muchas alternativas:</p>
<ul class="simple">
<li><p>En <em>Linux</em> <a class="reference external" href="https://wiki.gnome.org/Apps/Vinagre">Vinagre</a>, <a class="reference external" href="https://remmina.org">Remmina</a> (válida también para <abbr title="Virtual Network Computing">VNC</abbr>) o el cliente de
<a class="reference external" href="//https://tigervnc.org">TigerVNC</a>, disponible a través del paquete <a class="reference external" href="https://packages.debian.org/stable/tigervnc-viewer">tigervnc-viewer</a> que instala
el ejecutable <strong class="program">vncviewer</strong>).</p></li>
<li><p>En <em>Windows</em>, el mismo cliente de <a class="reference external" href="//https://tigervnc.org">TigerVNC</a> (descargue de su página el cliente
<strong class="program">vncviewer64</strong>).</p></li>
</ul>
<p>En todos estos clientes, para conectar con el servidor, basta con indicar su
<abbr title="Internet Protocol">IP</abbr> (o nombre) y, en caso de que escuche en el puerto <strong>5900</strong> se deberá
indicar también éste. Ahora bien, no se expresa directamente el número de puerto, sino el
número de <em>display</em> que se obtiene al sustraer <em>5900</em> del número de puerto. Por
tanto, un servidor escuchando en el puerto <em>5900</em>, escuchará en el display <em>0</em>;
uno en el puerto <em>5901</em>, en el display <em>1</em>; y así sucesivamente. Por ejemplo, si
el servidor se encuentra en la dirección <em>172.22.9.111</em> y escucha en el display
<em>0</em>, deberemos conectar a él mediante <kbd class="kbd docutils literal notranslate">172.22.9.111:0</kbd>.</p>
</section>
<section id="id4">
<h3><span class="section-number">1.1.3. </span>TeamViewer<a class="headerlink" href="#id4" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="admonition-todo admonition" id="id5">
<p class="admonition-title">Por hacer</p>
<p>Probar el programa TeamViewer y hacer algunas indicaciones.</p>
</div>
</section>
</section>
<section id="servicios-de-terminal-de-texto">
<h2><span class="section-number">1.2. </span>Servicios de terminal de texto<a class="headerlink" href="#servicios-de-terminal-de-texto" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Dos son los servicios de administración remota para línea de comandos:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://es.wikipedia.org/wiki/Telnet">Telnet</a>, ya totalmente en desuso por ser inseguro y, aunque puede asegurarse
mediante <a class="reference internal" href="../../98.apendice/01.cryto/03.aplicaciones/04.ssl.html#ssl"><span class="std std-ref">SSL/TLS</span></a>, por carecer de todas las características adicionales
de su alternativa (transferencia de archivos, autenticación mediante claves
asimétricas, tunelización de conexiones).</p></li>
<li><p><a class="reference internal" href="../../04.servidor/10.ssh/index.html#adm-rem"><span class="std std-ref">SSH</span></a> que es profusamente desarrollado en el manual. De lo
referido en él nos interesa para el curso:</p>
<ul>
<li><p><a class="reference internal" href="../../04.servidor/10.ssh/01.basico.html#ssh-inst"><span class="std std-ref">Su instalación</span></a>.</p></li>
<li><p><a class="reference internal" href="../../04.servidor/10.ssh/01.basico.html#ssh-conf"><span class="std std-ref">Su configuración básica</span></a>.</p></li>
<li><p>La utilización de sus dos clientes principales:</p>
<ul>
<li><p>El <a class="reference internal" href="../../04.servidor/10.ssh/01.basico.html#openssh-cliente"><span class="std std-ref">cliente de openssh</span></a>, usado fundamentalmente en
entornos <em>UNIX</em>.</p></li>
<li><p><a class="reference internal" href="../../04.servidor/10.ssh/01.basico.html#putty-cliente"><span class="std std-ref">Putty</span></a>, ampliamente usado en entornos <em>Windows</em> (aunque su
<em>Powershell</em> incluye el cliente de openssh.</p></li>
</ul>
</li>
<li><p>La <a class="reference internal" href="../../04.servidor/10.ssh/02.certificados.html#ssh-cert"><span class="std std-ref">autenticación con claves</span></a>, aunque podemos limitarla a
claves y que la autenticación con certificado quede para el <a class="reference internal" href="../02.seg/index.html#seg"><span class="std std-ref">módulo de
Seguridad Informática</span></a>.</p></li>
<li><p><a class="reference internal" href="../../04.servidor/10.ssh/03.tuneles.html#tunel-ssh"><span class="std std-ref">Tunelización de conexiones</span></a>.</p></li>
</ul>
</li>
</ul>
<p class="rubric">Notas al pie</p>
<dl class="footnote brackets">
<dt class="label" id="id6"><span class="brackets"><a class="fn-backref" href="#id2">1</a></span></dt>
<dd><p>La ubicación de estos archivos no tiene por qué ser
<code class="file docutils literal notranslate"><span class="pre">/etc/X11/xorg.conf.d</span></code>. Otra ubicación posible es
<code class="file docutils literal notranslate"><span class="pre">/usr/share/X11/xorg.conf.d</span></code>. En cualquier caso, el directorio debería
existir de antemano, así que si no existe en su sistema, deberá investigar
dónde se encuentra en vez de no crear uno.</p>
</dd>
<dt class="label" id="id7"><span class="brackets"><a class="fn-backref" href="#id3">2</a></span></dt>
<dd><p>Con ello referimos si existe algún mecanismo para saber iel cliente si se
conecta al servidor correcto. Los subtipos <code class="docutils literal notranslate"><span class="pre">X509*</span></code> lo logran mediante un
par de claves de servidor que habrá que suministrador en la configuración.</p>
</dd>
</dl>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Tabla de contenido</a></h3>
    <ul>
<li><a class="reference internal" href="#">1. Administración remota</a><ul>
<li><a class="reference internal" href="#servicios-graficos">1.1. Servicios gráficos</a><ul>
<li><a class="reference internal" href="#remote-desktop-protocol-rdp">1.1.1. Remote Desktop Protocol (<abbr title="Remote Desktop Protocol">RDP</abbr>)</a></li>
<li><a class="reference internal" href="#id1">1.1.2. <abbr title="Virtual Network Computing">VNC</abbr></a></li>
<li><a class="reference internal" href="#id4">1.1.3. TeamViewer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#servicios-de-terminal-de-texto">1.2. Servicios de terminal de texto</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Tema anterior</h4>
    <p class="topless"><a href="orientaciones/01.sec.html"
                          title="capítulo anterior">Secuenciación</a></p>
  </div>
  <div>
    <h4>Próximo tema</h4>
    <p class="topless"><a href="02.dhcp.html"
                          title="próximo capítulo"><span class="section-number">2. </span><abbr title="Dynamic Host Configuration Protocol">DHCP</abbr></a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/guias/03.ser/01.remoto.rst.txt"
            rel="nofollow">Mostrar el código</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Búsqueda rápida</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Ir a" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="02.dhcp.html" title="2. DHCP"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="orientaciones/01.sec.html" title="Secuenciación"
             >anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" >Servicios en red</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">1. </span>Administración remota</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Derechos de autor CC BY 4.0, 2016-2022, José Miguel Sánchez Alés.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.5.0.
    </div>
  </body>
</html>