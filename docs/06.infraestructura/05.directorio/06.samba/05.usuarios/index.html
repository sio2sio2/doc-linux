


<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>6.4.2.5. Usuarios y grupos &#8212; documentación de Linuxnomicón - rolling</title>
    <link rel="stylesheet" href="../../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../../../../" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/language_data.js"></script>
    <script src="../../../../_static/translations.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="index" title="Índice" href="../../../../genindex.html" />
    <link rel="search" title="Búsqueda" href="../../../../search.html" />
    <link rel="next" title="6.4.2.6. Impresión" href="../06.print/index.html" />
    <link rel="prev" title="6.4.2.4. Directorios compartidos" href="../04.share/index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="../06.print/index.html" title="6.4.2.6. Impresión"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="../04.share/index.html" title="6.4.2.4. Directorios compartidos"
             accesskey="P">anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" ><span class="section-number">6. </span>Servicios de infraestructura</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../index.html" ><span class="section-number">6.4. </span>Servicio de directorio</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../index.html" accesskey="U"><span class="section-number">6.4.2. </span>Samba</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="usuarios-y-grupos">
<span id="smb-usr"></span><h1><span class="section-number">6.4.2.5. </span>Usuarios y grupos<a class="headerlink" href="#usuarios-y-grupos" title="Enlazar permanentemente con este título">¶</a></h1>
<p>Aunque el servidor ya funciona como <em>controlador de dominio para directorio
activo</em>, es bastante inútil en la medida en que no hay ni usuarios ni grupos
definidos. Para esta tarea es importante tener en cuenta varios aspectos:</p>
<ol class="arabic">
<li><p>Identificadores numéricos <strong>uid</strong> y <strong>gid</strong>:</p>
<p>Los sistemas <em>windows</em> identifican usuarios y grupos a través de un
identificador llamado <em>SID</em> con este aspecto:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">S-1-5-21-967385316-1535922226-3155704407-1106</span>
</pre></div>
</div>
<p>por lo que un servidor <em>samba</em> que emule un <em>controlador de dominio</em> no tiene
necesidad ninguna de manejar <em>uid</em> ni <em>gid</em>. Sin embargo, para tener
disponbles usuarios y grupos en clientes <em>linux</em> es necesario que estos
dispongan de la información que recogen respectivamente los ficheros
<code class="file docutils literal notranslate"><span class="pre">/etc/passwd</span></code> y <code class="file docutils literal notranslate"><span class="pre">/etc/group</span></code>. Para lograr esto, hay dos
alternativas:</p>
<ol class="loweralpha simple">
<li><p>Que el propio directorio activo sea capaz de contener los campos <em>unix</em>,
cosa que se logra al incluir la opción <code class="docutils literal notranslate"><span class="pre">--use-rfc2307</span></code> al crear el
<em>controlador de dominio</em>.</p></li>
<li><p>Que el demonio encargado de facilitar a <a class="reference internal" href="../../../../04.servidor/09.autenticacion/index.html#nss"><span class="std std-ref">NSS</span></a> los campos
cree la información (o parte de la información) al vuelo. En el caso
particular de los identificadores numéricos lo que hará será traducir el
<em>SID</em> a <em>UID</em> o <em>GID</em> según se trate de un identificador de usuario o
grupo.</p></li>
</ol>
</li>
<li><p>La información sobre el usuario se almacena en los sistemas <em>unix</em> en su
directorio personal (<em>home directory</em>), que tradicionalmente se encuentra
dentro de <code class="file docutils literal notranslate"><span class="pre">/home</span></code>, mientra que en los sistemas windows lo hace en los
perfiles de usuario (<em>user profile</em>), que a partir de <em>Windows Vista</em> se
hallan dentro de <code class="file docutils literal notranslate"><span class="pre">C:Users</span></code>. Así pues, cada usuario maneja dos
directorios (o perfiles) personales distintos: uno para el uso de clientes
<em>windows</em> y otro para el uso de clientes <em>linux</em>: no tiene sentido que sean
el mismo directorio, puesto que los sistemas son distintos.</p></li>
<li><p>Los perfiles personales pueden ser locales o remotos. Si son locales se
almacenan en cada cliente; y si son remotos lo harán en el servidor. Lo
primero es sumamente sencillo de implementar, basta que se cree el directorio
personal la primera vez que el usuario entra en ese cliente, cosa que hace
<em>windows</em> automáticamente y cosa que puede hacer también linux si se usa
el módulo <a class="reference internal" href="../../../../04.servidor/09.autenticacion/pam_modules/18.pam_mkhomedir.html#pam-mkhomedir"><span class="std std-ref">pam_mkhomedir</span></a> durante la autenticación. Sin
embargo, no permitirá que el usuario disponga de esas configuraciones y
ficheros, si cambia de máquina cliente.</p></li>
</ol>
<p>Sabido todo lo anterior, nuestros objetivos son los siguientes:</p>
<ol class="arabic simple">
<li><p>Crear en el controlador usuarios que puedan autenticarse tanto en windows
como en linux.</p></li>
<li><p>Que los usuarios guarden sus datos en el servidor, para que los tengan
disponibles en cualquier cliente (perfiles móviles).</p></li>
<li><p>Dado que los perfiles de windows y de linux son distintos, que al entrar en
un cliente <em>windows</em>, le aparezca al usuario en el volumen <em>H:</em> su directorio
personal de <em>linux</em>, así podrá intercambiar ficheros entre un sistema y otro.</p></li>
</ol>
<div class="section" id="preparativos">
<h2><span class="section-number">6.4.2.5.1. </span>Preparativos<a class="headerlink" href="#preparativos" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Antes de crear cualquier usuario, definiremos dos directorios compartidos:</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">/srv/samba/home</span></code>, que servirá para almacenar los directorios personales
de <em>linux</em>.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">/srv/samba/profiles</span></code>, que servirá para almacenar los perfiles
personales de <em>windows</em>.</p></li>
</ul>
<p>Utilizaremos para ellos el método que usa las <em>Windows ACLs</em>. Primeramente hay
que añadir lo siguiente a <code class="file docutils literal notranslate"><span class="pre">/etc/samba/smb.conf</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[home]</span>
<span class="go">   comment = Directorios personales para linux</span>
<span class="go">   path = /srv/samba/home</span>
<span class="go">   read only = No</span>

<span class="go">[Profiles]</span>
<span class="go">   comment = Perfiles de usuario para windows</span>
<span class="go">   path = /srv/samba/profiles</span>
<span class="go">   read only = No</span>
</pre></div>
</div>
<p>y crear ambos directorios con los permisos adecuados:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> mkdir -p /srv/samba/<span class="o">{</span>home,profiles<span class="o">}</span>
<span class="gp">#</span> chgrp domain_admins /srv/samba/<span class="o">{</span>home,profiles<span class="o">}</span>
<span class="gp">#</span> chmod <span class="nv">g</span><span class="o">=</span>rwx /srv/samba/<span class="o">{</span>home,profiles<span class="o">}</span>
</pre></div>
</div>
<p>Por último, recargamos la configuración:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> invoke-rc.d samba-ad-dc reload
</pre></div>
</div>
<p>Hecho esto, debemos rematar los permisos con la ayuda de un cliente <em>windows</em> y
el usuario <em>Administrator</em>, que tiene el privilegio <em>SeDiskOperatorPrivilege</em>,
según la configuración que ya realizamos en <a class="reference internal" href="../04.share/index.html#smb-share"><span class="std std-ref">anterior epígrafe</span></a>.</p>
<dl>
<dt><strong>home</strong></dt><dd><p>Para el caso de los <em>home</em>, en la pestaña de <strong>Permisos de los recursos
compartidos</strong> debemos dejar estos usuarios/grupos y permisos:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 66%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Entidad</p></th>
<th class="head"><p>Permisos</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Usuarios autentificados<a class="footnote-reference brackets" href="#id9" id="id1">1</a></p></td>
<td><p>Control total</p></td>
</tr>
<tr class="row-odd"><td><p>Domain Admins</p></td>
<td><p>Control total</p></td>
</tr>
<tr class="row-even"><td><p>System</p></td>
<td><p>Control total</p></td>
</tr>
</tbody>
</table>
<p>Esto es:</p>
<img alt="Permisos de compartición para home." src="../../../../_images/share_home.jpg" />
<p>En la pestaña de <strong>Seguridad</strong> hay primero que pulsar sobre el botón de
<strong>Opciones avanzadas</strong>, y en la ventana que aparezca pulsar sobre <strong>Cambiar
permisos</strong> y desmarcar la opción <strong>Incluir todos los permisos heredables del
objeto primario de este objeto</strong>:</p>
<img alt="Tick de permisos heredados en la pestaña de seguridad." src="../../../../_images/heredados_seg_home.jpg" />
<p>Acéptese el cambio, hasta volver a la pestaña de <strong>Seguridad</strong> y déjense los
siguientes permisos:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 35%" />
<col style="width: 65%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Entidad</p></th>
<th class="head"><p>Permisos</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Administrator</p></td>
<td><p>Control total</p></td>
</tr>
<tr class="row-odd"><td><p>Usuarios autentificados</p></td>
<td><p>Leer y ejecutar, Ver contenidos de carpeta, Leer</p></td>
</tr>
<tr class="row-even"><td><p>Create Owner</p></td>
<td><p>Control total</p></td>
</tr>
<tr class="row-odd"><td><p>Domain Admins</p></td>
<td><p>Control total</p></td>
</tr>
<tr class="row-even"><td><p>System</p></td>
<td><p>Control total</p></td>
</tr>
</tbody>
</table>
<img alt="Permisos en la pestaña seguridad para home." src="../../../../_images/seg_home.jpg" />
<p>Además, váyase de nuevo a <strong>Opciones avanzadas</strong>, elíjase <strong>Cambiar permisos</strong>,
selecciónese <strong>Usuarios Autentificados</strong>, púlsese <strong>Editar</strong> y en la lista
desplegable <strong>Aplicar a</strong> elíjase <em>Sólo en esta carpeta</em>:</p>
<img alt="Dónde está &quot;Aplicar a&quot; en la seguridad de una carpeta." src="../../../../_images/avanzadas_seg_home.jpg" />
<p>Por último, debe aceptarse todo para que tengan efecto los cambios.</p>
</dd>
<dt><strong>Profiles</strong></dt><dd><p>La configuración de este recurso compartido es diferente. En la pestaña
<strong>Permisos de los recursos compartidos</strong> debemos dejar a <em>Domains Users</em>:</p>
<img alt="Permisos de compartición para Profiles." src="../../../../_images/share_profiles.jpg" />
<p>Y en la pestaña <strong>Seguridad</strong> debe pulsarse sobre <strong>Opciones avanzadas</strong> y
cambiar los permisos para que queden del siguiente modo:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 53%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Entidad</p></th>
<th class="head"><p>Permisos</p></th>
<th class="head"><p>Aplicar a</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Administrator</p></td>
<td><p>Control total</p></td>
<td><p>Esta carpeta, subcarpetas y ficheros</p></td>
</tr>
<tr class="row-odd"><td><p>Domain Users</p></td>
<td><p>Los expresados en <a class="reference internal" href="#img-pup"><span class="std std-ref">la captura</span></a></p></td>
<td><p>Sólo a esta carpeta</p></td>
</tr>
<tr class="row-even"><td><p>Creator Owner</p></td>
<td><p>Control total</p></td>
<td><p>Sólo a subcarpetas y ficheros</p></td>
</tr>
</tbody>
</table>
<p>Es decir:</p>
<img alt="Permisos de seguridad para Profiles" src="../../../../_images/seg_profiles.jpg" />
<p>Los permisos de <em>Domain Users</em> deben ser estos en particular:</p>
<img alt="Permisos específicos de seguridad para &quot;Domain Users&quot; en profiles." id="img-pup" src="../../../../_images/perms_users_profiles.jpg" />
</dd>
</dl>
<p>Una vez completado todo, ya tenemos preparados los dos recursos de disco que
usarán los usuarios. Ahora sólo toca crearlos…</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Los perfiles móviles en <em>linux</em> aún no funcionan. Revise el epígrafe
sobre <a class="reference internal" href="#smb-perfmov"><span class="std std-ref">perfiles móviles</span></a>.</p>
</div>
</div>
<div class="section" id="gestion">
<h2><span class="section-number">6.4.2.5.2. </span>Gestión<a class="headerlink" href="#gestion" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Para gestionar usuarios tenemos dos opciones: usar <em>linux</em> (el propio servidor o
un cliente) o usar la herramienta <abbr title="Remote Server Administration Tools">RSAT</abbr> para administración remota del servidor en un cliente <em>windows</em><a class="footnote-reference brackets" href="#id10" id="id2">2</a>.</p>
<div class="section" id="linux">
<h3><span class="section-number">6.4.2.5.2.1. </span>Linux<a class="headerlink" href="#linux" title="Enlazar permanentemente con este título">¶</a></h3>
<span class="target" id="samba-tool"></span><p id="index-0">La herramienta fundamental para la gestión de usuarios y grupos es
<strong class="command">samba-tool</strong><a class="footnote-reference brackets" href="#id11" id="id3">3</a>, aunque podemos usar otras para consulta y edición.
Como esta labor requiere permisos de administración usaremos la cuenta
<em>Administrator</em>. Lo más cómodo es utilizar <em>kerberos</em> para no tener que
constantemente que identificarnos:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> kinit Administrator@IESPJM.DOMUS
<span class="go">Password for Administrator@IESPJM.DOMUS:</span>
<span class="go">Warning: Your password will expire in 39 days on vie 10 feb 2017 18:22:47 CET</span>
</pre></div>
</div>
<p>La gestión de usuarios se lleva a cabo con <kbd class="kbd docutils literal notranslate">samba-tool user</kbd> más un
subcomando (<kbd class="kbd docutils literal notranslate">create</kbd>, <kbd class="kbd docutils literal notranslate">delete</kbd>, etc.) que indica cuál es la acción a
realizar. Empecemos por crear usuarios, pero antes tengamos presentes varias
presupuestos:</p>
<ol class="arabic simple">
<li><p>Se dejará que el cliente elija dónde montará el directorio personal del
usuario, ya que se incluyó en la configuración de <em>sssd</em> la directiva
<em>fallback_homedir</em>, que establece tal directorio si el directorio activo no
lo proporciona<a class="footnote-reference brackets" href="#id12" id="id4">4</a>.</p></li>
<li><p>Tampoco se fijará en el directorio activo la <em>shell</em> de usuario, ya que se
incluyó la directiva <em>default_shell</em> en los clientes.</p></li>
<li><p>No se fijará <em>UID</em> para el usuario, ya que la configuración propuesta de
<em>sssd</em> se encarga de hacer un mapeo al vuelo entre identificadores <em>unix</em> y
<em>SID</em>. Esta configuración no sólo hace el mapeo, sino que obvia cualquier
<em>UID</em> o <em>GID</em> que se haya fijado en el directorio activo. Como consecuencia,
tampoco se expresará el <em>GID</em> del grupo principal, lo que supone que el
grupo principal siempre será «Domain Users». Por supuesto, tendremos total
libertad para hacer miembro a un usuario particual de cualquier grupo.</p></li>
<li><p>Por la configuración de <em>sssd</em> (directiva <em>override_space</em>), los nombres de
los grupos de <em>windows</em> serán <em>domain_users</em>, <em>domain_admins</em>, etc., donde el
caracter de subrayado sustituye al espacio. Los veremos escritos en
minúsculas, aunque podremos utilizar mayúsuculas si queremos, porque el
directorio activo no es sensible al uso de unas y otras.</p></li>
<li><p>Los directorios personales para linux de los usuarios se almacenarán en el
directorio <code class="file docutils literal notranslate"><span class="pre">/srv/samba/home/&lt;usuario&gt;</span></code> del servidor y se hará accesibles
a los clientes <em>windows</em> a través del volumen <em>H:</em>.</p></li>
<li><p>Los perfiles personales para windows se almacenarán en el directorio
<code class="file docutils literal notranslate"><span class="pre">/srv/samba/profiles/&lt;usuario&gt;</span></code> del servidor.</p></li>
</ol>
<p class="rubric">Creación</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> samba-tool user create zicotropico -H ldap://dc -k yes <span class="se">\</span>
   --given-name<span class="o">=</span>Perico --surname<span class="o">=</span><span class="s2">&quot;de los Palotes&quot;</span> --use-username-as-cn
<span class="go">   --profile-path=\\\\DC\\Profiles\\zicotropico \</span>
<span class="go">   --home-drive=H: --home-directory=\\\\DC\\home\\zicotropico</span>
</pre></div>
</div>
<p>Con esta definición, conseguiremos el siguiente usuario:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> getent passwd zicotropico
<span class="go">[... MOSTRAR LA SALIDA ...]</span>
<span class="gp">$</span> id -Gn zicotropico
<span class="go">domain_users</span>
</pre></div>
</div>
<p>Analicemos un poco cuáles son las opciones que hemos proporcionado al comando
para que cree el usuario:</p>
<dl class="simple">
<dt><strong>–given-name</strong></dt><dd><p>El nombre de pila del usuario. El nombre de usuario</p>
</dd>
<dt><strong>–surname</strong></dt><dd><p>Apellido del usuario.</p>
</dd>
<dt><strong>–use-username-as-cn</strong></dt><dd><p>Determina que el nombre de usuario (o <em>nick</em> o como quiera llamarse) es
es el que se proporciona justamente a continuación de <kbd class="kbd docutils literal notranslate">create</kbd>
(<em>zicotropico</em> en este caso).</p>
</dd>
<dt><strong>–profile-path</strong></dt><dd><p>Lugar donde estará el perfil móvil del usuario. En este caso se encuentra en
un directorio con el mismo nombre que el de usuario en el recurso compartido
<em>Profiles</em> del servidor <em>DC</em>.</p>
</dd>
<dt><strong>–home-directory</strong></dt><dd><p>Lugar donde se encuentra el directorio personal para linux del usuario.
Téngase en cuentra que esta localización (que identifica un recurso
compartido en el servidor) nada tiene que ver con el directorio personal en
un cliente linux. En nuestro caso, como no se define vendrá determiando por
el valor de la directiva <em>fallback_home</em> de <em>sssd</em>. La utilidad de esta
definición es para los clientes <em>windows</em>, ya que estos mostrarán el recurso
indicado con este parámetro en el volumen que indique:</p>
</dd>
<dt><strong>–home-drive</strong></dt><dd><p>Volumen en el que aparecerá el recurso definido por <code class="docutils literal notranslate"><span class="pre">--home-directory</span></code>.</p>
</dd>
</dl>
<p>Obsérvese que, salvo nombre de usuario y contraseña, no hemos definido
directamente ningún campo <em>UNIX</em> de usuario, porque no hace falta ya que:</p>
<ol class="arabic">
<li><p>El nombre de usuario es el escrito tras <kbd class="kbd docutils literal notranslate">create</kbd>.</p></li>
<li><p>La contraseña es la que introdujimos.</p></li>
<li><p>El <strong>uid</strong> lo genera en el cliente <em>sssd</em> a partir del <em>SID</em> (directiva
<em>ldap_id_map</em> a <em>True</em>). Si no hubiera sido este nuestro propósito podríamos
haber escrito uno en la base de datos añadiendo la opción <code class="docutils literal notranslate"><span class="pre">--uid-numer</span></code>.</p>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>La directiva:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ldap_id_map = True</span>
</pre></div>
</div>
<p>deja de leer los <em>uid</em> y <em>gid</em> aunque estos existan.</p>
</div>
</li>
<li><p>El grupo propietario es <em>Domain Users</em>, cuyo <em>gid</em> lo genera <em>sssd</em>. Si no
hubiera sido este nuestro propósito podríamos haber escrito uno en la base de
datos con la opción <code class="docutils literal notranslate"><span class="pre">--gid-</span> <span class="pre">number</span></code>.</p></li>
<li><p>La información <em>gecos</em> la genera <em>sssd</em> (directiva <em>ldap_user_gecos</em>) tomando
el valor de atributo <em>displayName</em> de LDAP. El valor de este atributo es la
concatenación separada por un espacio del nombre y el apellido. Para
<em>zicotrópico</em>, por tanto, <em>Perico de los Palotes</em>. No obstante, si no quiere
usarse la directiva referida y escribir en el propio directorio activo la
información puede usarse la opción <code class="docutils literal notranslate"><span class="pre">--gecos</span></code>.</p></li>
<li><p>El directorio personal lo fija <em>sssd</em> con la directiva <em>fallback_home</em> cuando
falta, como es el caso. Si se quiere indicar uno, puede hacerse con la opción
<code class="docutils literal notranslate"><span class="pre">--unix-home</span></code>.</p></li>
<li><p>La <em>shell</em> del usuario la fija la directiva <em>default_shell</em> de <em>sssd</em>, en
caso de que no haya definida una en el servidor, como es el caso. Si se
hubiera querido indicar una, podría haberse hecho añadiendo la opción
<code class="docutils literal notranslate"><span class="pre">--login-shell</span></code>.</p></li>
</ol>
<p>Aún hay una última tarea por hacer. La creación del usuario, no crea los
directorios en el servidor donde se almacenan sus perfiles personales para
windows y linux.  En <em>windows</em> no supone problema, puesto que el perfil se
generará automáticamente en el primer ingreso. En linux, sin embargo, sí<a class="footnote-reference brackets" href="#id13" id="id5">5</a>,
lo que obliga a crear el directorio personal a mano en el propio servidor:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> <span class="nv">user</span><span class="o">=</span>zicotropico
<span class="gp">#</span> mkdir /srv/samba/home/<span class="nv">$user</span>
<span class="gp">#</span> <span class="nv">uid</span><span class="o">=</span><span class="sb">`</span>wbinfo --sid-to-uid <span class="k">$(</span>wbinfo --name-to-sid <span class="nv">$user</span><span class="k">)</span><span class="sb">`</span>
<span class="gp">#</span> <span class="nv">auid</span><span class="o">=</span><span class="sb">`</span>wbinfo --sid-to-uid <span class="k">$(</span>wbinfo --name-to-sid <span class="s2">&quot;BUILTIN\Administrators&quot;</span><span class="k">)</span><span class="sb">`</span>
<span class="gp">#</span> chown <span class="nv">$auid</span>:users /srv/samba/home/<span class="nv">$user</span>
<span class="gp">#</span> setfacl -m <span class="s2">&quot;g:</span><span class="nv">$uid</span><span class="s2">:7,u:</span><span class="nv">$uid</span><span class="s2">:7,d:g:</span><span class="nv">$uid</span><span class="s2">:7,d:u:</span><span class="nv">$uid</span><span class="s2">:7,&quot;</span> /srv/samba/home/<span class="nv">$user</span>
<span class="gp">#</span> setfacl -m <span class="s2">&quot;g:</span><span class="nv">$auid</span><span class="s2">:7,u:</span><span class="nv">$auid</span><span class="s2">:7,d:g:</span><span class="nv">$auid</span><span class="s2">:7,d:u:</span><span class="nv">$auid</span><span class="s2">:7,&quot;</span> /srv/samba/home/<span class="nv">$user</span>
<span class="gp">#</span> setfacl -x <span class="s2">&quot;g:domain_admins:,d:g:domain_admins:&quot;</span> /srv/samba/home/<span class="nv">$user</span>
<span class="gp">#</span> setfacl -m <span class="s2">&quot;g:users:0,d:g:users:0&quot;</span> /srv/samba/home/<span class="nv">$user</span>
<span class="gp">#</span> tar -C /etc/skel --owner<span class="o">=</span><span class="nv">$uid</span> --group<span class="o">=</span>users -cf - . <span class="p">|</span> <span class="se">\</span>
   tar --strip-component<span class="o">=</span><span class="m">1</span> -C /srv/samba/home/<span class="nv">$user</span> -xvf -
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>Dado que todos los datos de los usuarios se pretenden almacenar en
el controlador de dominio, es indispensable controlar cuánto espacio ocupa
cada usuario, o dicho de otra forma: definir <a class="reference internal" href="../../../../05.discos/03.cuotas/index.html#disk-quota"><span class="std std-ref">cuotas de disco</span></a>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Es más que obvio que crear un usuario usando las herramientas de linux
es algo bastante engorroso. Pero la tarea se presta a escribir un <em>script</em>
parecido a <em>adduser</em> que lo resuelva cómodamente. Por ejemplo,
<a class="reference download internal" download="" href="../../../../_downloads/6fc7597a4ea864057277ec3640ecbc63/addsmbuser"><code class="xref download docutils literal notranslate"><span class="pre">éste</span></code></a>, con el que basta hacer lo siguiente para
crear un usuario:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> addsmbuser zicotropico -pzico -n <span class="s2">&quot;Perico&quot;</span> -s <span class="s2">&quot;de los Palotes&quot;</span>
</pre></div>
</div>
</div>
<p class="rubric">Creado (grupo)</p>
<p>Crear grupos es bastante más fácil:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> samba-tool group add plebe -H ldap://dc -k yes
</pre></div>
</div>
<p>Existe una opción, `` –gid-number``, para incluir el <em>GID</em> a la información del
directorio activo, pero con nuestra configuración sobra.</p>
<p class="rubric">Borrado</p>
<p>Es tan fácil como:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> samba-tool user delete zicotropico -H ldap://dc -k yes
</pre></div>
</div>
<p>Obviamente, la orden no borrar los directorios con sus perfiles.</p>
<p class="rubric">Borrado (grupo)</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> samba-tool group delete plebe -H ldap://dc -k yes
</pre></div>
</div>
<p class="rubric">Cambio de contraseña.</p>
<p>Si es el propio usuario el que desea cambiar la contraseña a un usuario, es tan
fácil como usar el comando <a class="reference internal" href="../../../../02.conbas/05.seguridad/05a.usuarios.html#passwd"><span class="std std-ref">passwd</span></a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> passwd
</pre></div>
</div>
<p>Si es el administrador de <em>samba</em> el que desea cambiar la contraseña, entonces
debe optarse por usar <strong class="command">samba-tools</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> samba-tool user setpassword zicotropico -H ldap://dc -k yes
<span class="go">New Password:</span>
<span class="go">Retype Password:</span>
</pre></div>
</div>
<p class="rubric">Consulta</p>
<p>La consulta más simple es obtener la información <em>unix</em> del usuario<a class="footnote-reference brackets" href="#id14" id="id6">6</a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> getent passwd zicotropico
<span class="go">zicotropico:*:2606:2013:Perico de los Palotes:/home/samba/zicotropico:/bin/bash</span>
</pre></div>
</div>
<p>Del mismo modo, pueden usarse otras herramientas ya vistas como <a class="reference internal" href="../../../../02.conbas/05.seguridad/05a.usuarios.html#id"><span class="std std-ref">id</span></a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> id zicotropico
<span class="go">uid=2606(zicotropico) gid=2013(domain_users) grupos=2013(domain_users)</span>
</pre></div>
</div>
<p>Si se quiere obtener la información completa del directorio activo puede hacerse
aprovechando que es compatible con <em>LDAP</em>. Es posible usar <span class="xref std std-ref">ldapsearch</span> del paquete <em>ldap-utils</em><a class="footnote-reference brackets" href="#id15" id="id7">7</a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ldapsearch -LLLH ldap://dc -QY GSSAPI -b <span class="s1">&#39;dc=iespjm,dc=domus&#39;</span> <span class="nv">cn</span><span class="o">=</span>zicotropico
</pre></div>
</div>
<p>O bien instalar el paquete <em>ldb-tools</em>, cuyas aplicaciones pertenecen a la suite
de <em>samba</em> y permite hacer consultas de un modo bastante similar:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ldbsearch -H ldap://dc -k yes -b <span class="s1">&#39;dc=iespjm,dc=domus&#39;</span> <span class="nv">cn</span><span class="o">=</span>zicotropico
</pre></div>
</div>
<p class="rubric">Consulta (grupo)</p>
<p>Es idéntica que la de usuarios, salvo que la base a usar con <strong class="command">getent</strong>
es <em>group</em>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> getent group plebe
<span class="go">plebe:*:2611:</span>
</pre></div>
</div>
<p>Sin embargo, hay otro tipo de consulta que no tiene sentido para los usuarios y
sí puede hacerse para grupos: saber cuáles son sus miembros:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> samba-tool group listmembers <span class="s2">&quot;Domain Users&quot;</span> -H ldap://dc -k yes
<span class="go">zicotropico</span>
<span class="go">krbtgt</span>
<span class="go">Administrator</span>
</pre></div>
</div>
<p class="rubric">Edición</p>
<p>Para este caso no sirven las herramientas que se usaban para modificar usuarios
locales (<strong class="command">chfn</strong>, <strong class="command">usermod</strong>). Tampoco son muy adecuadas las que
traen los paquetes <em>ldap-utils</em> ni <em>ldb-tools</em>, porque se prestan a cometer errores.</p>
<p>Hay dos alternativas:</p>
<span class="target" id="ldbedit"></span><dl id="index-1">
<dt><strong class="command">ldbedit</strong></dt><dd><p>Permite modificar objetos del directorio activo con un editor, como si de un
fichero se tratara. Requiere el paquete <em>ldb-tools</em>. Esta orden:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ldbedit -e vim -H ldap://dc -k yes <span class="nv">cn</span><span class="o">=</span>zicotropico
</pre></div>
</div>
<p>abrirá con <strong class="program">vim</strong> un «fichero» con los atributos que componen el
usuario <em>zicotropico</em>.  Bastará con hacer las modificaciones que estimemos
oportunas y guardarlas.</p>
</dd>
<dt><strong class="command">pdbedit</strong></dt><dd><p>Permite añadir o modificar usuarios existentes de modo no interactivo (a
diferencia de <strong class="command">lbdedit</strong>). Tiene la limitacion que debe usarse en
el propio controlador de dominio con la cuenta de <em>root</em>. Un ejemplo de uso
es este:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> pdbedit -U zicotropico -D Z:
</pre></div>
</div>
<p>que cambia el volumen en el que se verá el directorio personal de linux.
Cobra especial utilidad en <em>script</em>.</p>
<p>Además de editar, permite ver de un modo muy cómodo las cuentas de usuarios y
máquinas (que son las que acaban su nombre con un dólar):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> pdbedit -L
<span class="go">DC$:2500:</span>
<span class="go">Administrator:2000:</span>
<span class="go">CLIENTEW7$:2607:</span>
<span class="go">CLIENTEL$:2603:</span>
<span class="go">zicotropico:2606:Perico de los Palotes</span>
<span class="go">krbtgt:2002:</span>
<span class="go">nobody:65534:nobody</span>
</pre></div>
</div>
<p>Si se usa la opción <code class="docutils literal notranslate"><span class="pre">-v</span></code> la información es más exhaustiva:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> pdbedit -vLu zicotropico
<span class="go">Unix username:        zicotropico</span>
<span class="go">NT username:</span>
<span class="go">Account Flags:        [U          ]</span>
<span class="go">User SID:             S-1-5-21-967385316-1535922226-3155704407-1106</span>
<span class="go">Primary Group SID:    S-1-5-21-967385316-1535922226-3155704407-513</span>
<span class="go">Full Name:            Perico de los Palotes</span>
<span class="go">Home Directory:       \\DC\home\zicotropico</span>
<span class="go">HomeDir Drive:        Z:</span>
<span class="go">Logon Script:</span>
<span class="go">Profile Path:         \\DC\Profiles\zicotropico</span>
<span class="go">Domain:</span>
<span class="go">Account desc:</span>
<span class="go">Workstations:</span>
<span class="go">Munged dial:</span>
<span class="go">Logon time:           lun, 02 ene 2017 15:05:10 CET</span>
<span class="go">Logoff time:          0</span>
<span class="go">Kickoff time:         jue, 14 sep 30828 04:48:05 CEST</span>
<span class="go">Password last set:    sáb, 31 dic 2016 17:34:28 CET</span>
<span class="go">Password can change:  sáb, 31 dic 2016 17:34:28 CET</span>
<span class="go">Password must change: never</span>
<span class="go">Last bad password   : 0</span>
<span class="go">Bad password count  : 0</span>
<span class="go">Logon hours         : FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF</span>
</pre></div>
</div>
</dd>
</dl>
<p class="rubric">Edición (grupo)</p>
<p>Además de las herramientas vistas para la edición de usuarios, es necesario
conocer cómo añadir o eliminar miembros a un grupo. Se hace a través de
<strong class="command">samba-tool</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> samba-tool group addmembers plebe zicotropico -H ldap://dc -k yes
</pre></div>
</div>
<p>Pueden añadirse varios usuarios a la vez. Para borrar:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> samba-tool group removemembers plebe zicotropico -H ldap://dc -k yes
</pre></div>
</div>
</div>
<div class="section" id="windows">
<h3><span class="section-number">6.4.2.5.2.2. </span>Windows<a class="headerlink" href="#windows" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La gestión de usuarios (y otras como la de <abbr title="Domain Name Server">DNS</abbr>) puede llevarse a cabo con la
herramienta <abbr title="Remote Server Administration Tools">RSAT</abbr> que proporciona <em>Microsoft</em>. La instalación es bastante
sencilla, pero su uso requiere que se hagan antes algunas habilitaciones.</p>
<p>Para ello ha de abrirse el <strong>Panel de Control</strong> y de él escoger la sección
<strong>Programas</strong>. En dicha sección hay un enlace para <strong>Activar o desactivar
las características de Windows</strong>, que abrirá la siguiente ventana emergente:</p>
<img alt="Ventana de activación y desactivación de características de windows" src="../../../../_images/actdescwin.jpg" />
<p>Uno de los <em>ítem</em> es <em>Herramientas de administración remota del servidor</em> y es
dentro de él donde debemos marcar o desmarcar <em>item</em> según lo que deseemos
administrar. Con los <em>ítem</em> que se ven marcados en la captura anterior, basta
para poder gestionar usuarios (y curiosear en el <abbr title="Domain Name Server">DNS</abbr>), que es nuestro
propósito.</p>
<p>Para acceder a la administración de usuarios, puede optarse por dos vías: una
consiste en ejecutar el programa <kbd class="kbd docutils literal notranslate">dsa.msc</kbd> y la otra en hacer aparecer el
ítem <strong>Herramientas administrativas</strong> en el menú de inicio. Lo segundo es más
cómodo, pero si se usó otro usuario para instalarlas, no aparecerá. Para
remediarlo, se puede pulsar con el botón derecho sobre el <strong>Botón de Inicio</strong> y
escoger <strong>Propiedades</strong> en el menú contextual. En la ventana emergente,
confirmando que estamos en la pestaña <strong>Menú de inicio</strong>, damos a
<strong>Personalizar</strong> y escogemos que aparezcan las <em>Herramientas administrativas</em>:</p>
<img alt="Ventana para modificar las propiedades del botón de inicio" src="../../../../_images/binipro.jpg" />
<img alt="Selección de las herramientas administrativas en menú de inicio" src="../../../../_images/itemherradm.jpg" />
<p>Aceptados los cambios, en el menú principal puede verse una entrada
<strong>Herramientas administrativas</strong> entre las cuales está <strong>Usuarios y equipos de
Active Directory</strong>:</p>
<img alt="Entrada para Usuarios y equipos de Active Directory" src="../../../../_images/herradm.jpg" />
<p>Se abrirá la aplicación que de modo bastante sencillo nos permite añadir,
eliminar o modificar usuarios y grupos:</p>
<img alt="Herramienta para la gestión de usuarios y equipos de Active Directory." src="../../../../_images/gesusu.jpg" />
<p>Dado que la aplicación es bastante intuitiva, no requiere demasiadas
explicaciones. Tan sólo indicaremos cómo crear un usuario con las caracterísicas
del ya creado a través de las herramientas nativas de samba.</p>
<p>La creación del usuario <em>pita</em> sería esta:</p>
<img alt="Ventana de definición del usuario" src="../../../../_images/defusu.jpg" />
<img alt="Ventana de introducción de la contraseña del usuario" src="../../../../_images/usupass.jpg" />
<p>Por último, es necesario definir dónde se encuentran sus perfiles, para lo cual
puede pulsarse dos veces sobre el nombre del usuario, que ya deberá aparecer en
la lista de objetos, o pinchar sobre él con el botón izquierdo y escoger en el
menú contextual el ítem <strong>Propiedades</strong>.</p>
<p>Dentro de la ventana emergente, debe escogerse la pestaña <strong>Perfiles</strong> y
definirlos:</p>
<img alt="Ventana de definición de los perfiles del usuario" src="../../../../_images/defperf.jpg" />
<p>Al aceptar los cambios se creará automáticamente en el servidor el directorio
personal de <em>iinux</em> (no el de perfiles de <em>windows</em>, porque este se crea al
ingresar por primera vez). Sin embargo, estará vacío a diferencia del que
creamos a mano que contenía las plantillas de <code class="file docutils literal notranslate"><span class="pre">/etc/skel</span></code>.</p>
</div>
</div>
<div class="section" id="perfiles-moviles">
<span id="smb-perfmov"></span><h2><span class="section-number">6.4.2.5.3. </span>Perfiles móviles<a class="headerlink" href="#perfiles-moviles" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La configuración anterior permite tener pérfiles móviles para los clientes
<em>windows</em>, pero no para los <em>linux</em>, ya que en estos el directorio personal no
estará disponible. La estrategia, en este caso, consistirá en montar el
directorio remoto durante el proceso de autenticación<a class="footnote-reference brackets" href="#id16" id="id8">8</a>. Para ello debe
usarse en los clientes el módulo <a class="reference internal" href="../../../../04.servidor/09.autenticacion/pam_modules/19.pam_mount.html#pam-mount"><span class="std std-ref">pam_mount</span></a>, que se encuentra
en paquete aparte:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get install libpam-mount cifs-utils
</pre></div>
</div>
<p>Además se ha instalado <em>cifs-utils</em>, porque se montarán volúmenes compartidos
con el protocolo <em>cifs</em> (el que usa <em>samba</em>).</p>
<p>El proceso de postinstalación dejará configurado <em>pam</em> para usar el módulo, con
lo que sólo se necesita configurarlo. La idea es que <code class="file docutils literal notranslate"><span class="pre">\DC\home\&lt;usuario&gt;</span></code>
se monte sobre <code class="file docutils literal notranslate"><span class="pre">/home/samba/&lt;usuario&gt;</span></code> cuando el usuario se
autentique con lo que basta con añadir a <code class="file docutils literal notranslate"><span class="pre">/etc/security/pam_mount.conf.xml</span></code>
debajo de la línea que invita a incluir volúmenes lo siguiente:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&lt;volume pgrp=&quot;domain_users&quot; fstype=&quot;cifs&quot; server=&quot;dc&quot; path=&quot;home\%(USER)&quot; mountpoint=&quot;/home/samba/%(USER)&quot; /&gt;</span>
<span class="go">&lt;volume pgrp=&quot;domain_users&quot; fstype=&quot;cifs&quot; server=&quot;dc&quot; path=&quot;Profiles\%(USER).V2&quot; mountpoint=&quot;/home/samba/%(USER)/WinProfile&quot; /&gt;</span>
</pre></div>
</div>
<p>La segunda línea monta el perfil de <em>windows</em> dentro del subdirectorio
<em>WinProfile</em>.</p>
<p class="rubric">Enlaces de interés</p>
<ul class="simple">
<li><p><a class="reference external" href="https://wiki.samba.org/index.php/User_and_Group_management">User and Group management</a></p></li>
<li><p><a class="reference external" href="https://wiki.samba.org/index.php/User_home_drives">User home drives</a></p></li>
<li><p><a class="reference external" href="https://wiki.samba.org/index.php/Implementing_roaming_profiles">Implementing roaming profiles</a></p></li>
</ul>
<p class="rubric">Notas al pie</p>
<dl class="footnote brackets">
<dt class="label" id="id9"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>En la versión inglesa es <em>Authenticated Users</em>.</p>
</dd>
<dt class="label" id="id10"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p><em>RSAT</em> no está incluida en los sistemas windows para clientes y hay
que descargarla, instalarla y configurarla. Lo último lo trataremos en el
epígrafe dedicado a la gestión de usuarios bajo <em>windows</em>. Para su descarga,
basta utilizar el buscador de internet y escribir el nombre y el sistema para
el que se quiere (<em>windows7</em>, <em>windows10</em>); éste facilitará el enlace a la
pagina donde la proprio <em>Microsoft</em> lo ofrece.</p>
</dd>
<dt class="label" id="id11"><span class="brackets"><a class="fn-backref" href="#id3">3</a></span></dt>
<dd><p><strong class="command">samba-tool</strong> sirve para otras muchas tareas. De hecho, se usó
en la <a class="reference internal" href="../02.install-addc/index.html#smb-addc"><span class="std std-ref">instalación del controlador</span></a> para algunas labores de
comprobación y manipulación del <abbr title="Domain Name Server">DNS</abbr>.</p>
</dd>
<dt class="label" id="id12"><span class="brackets"><a class="fn-backref" href="#id4">4</a></span></dt>
<dd><p>Tanto esta directiva <em>fallback_homedir</em> como la que se citará a
continuación, <em>default_shell</em>, respetan los valores que se hayan fijado en el
directorio activo, no los sobrescriben. Por tanto, en casos puntuales, se
pueden establecer al crear (o editar) el usuario</p>
</dd>
<dt class="label" id="id13"><span class="brackets"><a class="fn-backref" href="#id5">5</a></span></dt>
<dd><p>A menos que haya una solución con <a class="reference internal" href="../../../../04.servidor/09.autenticacion/pam_modules/18.pam_mkhomedir.html#pam-mkhomedir"><span class="std std-ref">pam_mkhomedir</span></a>,
que yo no he encontrado.</p>
</dd>
<dt class="label" id="id14"><span class="brackets"><a class="fn-backref" href="#id6">6</a></span></dt>
<dd><p>Téngase en cuenta que un:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> getent passwd
</pre></div>
</div>
<p>no devolverá la información de los usuarios definidos en el controlador
puesto que se dejó comentada la línea:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">enumerate = True</span>
</pre></div>
</div>
<p>en el fichero <code class="file docutils literal notranslate"><span class="pre">sssd.conf</span></code>.</p>
</dd>
<dt class="label" id="id15"><span class="brackets"><a class="fn-backref" href="#id7">7</a></span></dt>
<dd><p>Pero, hay que deshabilitar la resolución inversa añadiendo a
<code class="file docutils literal notranslate"><span class="pre">/etc/ldap/ldap.conf</span></code> la directiva:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">SASL_NOCANON    yes</span>
</pre></div>
</div>
</dd>
<dt class="label" id="id16"><span class="brackets"><a class="fn-backref" href="#id8">8</a></span></dt>
<dd><p><em>Windows</em> sincroniza el directorio remoto con el directorio local del
cliente al iniciar la sesión y al cerrarla, lo cual es bastante más
eficiente. En <em>linux</em> no hay ninguna alternativa prefabricada.</p>
</dd>
</dl>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../../index.html">Tabla de contenido</a></h3>
  <ul>
<li><a class="reference internal" href="#">6.4.2.5. Usuarios y grupos</a><ul>
<li><a class="reference internal" href="#preparativos">6.4.2.5.1. Preparativos</a></li>
<li><a class="reference internal" href="#gestion">6.4.2.5.2. Gestión</a><ul>
<li><a class="reference internal" href="#linux">6.4.2.5.2.1. Linux</a></li>
<li><a class="reference internal" href="#windows">6.4.2.5.2.2. Windows</a></li>
</ul>
</li>
<li><a class="reference internal" href="#perfiles-moviles">6.4.2.5.3. Perfiles móviles</a></li>
</ul>
</li>
</ul>

  <h4>Tema anterior</h4>
  <p class="topless"><a href="../04.share/index.html"
                        title="capítulo anterior"><span class="section-number">6.4.2.4. </span>Directorios compartidos</a></p>
  <h4>Próximo tema</h4>
  <p class="topless"><a href="../06.print/index.html"
                        title="próximo capítulo"><span class="section-number">6.4.2.6. </span>Impresión</a></p>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../../../../_sources/06.infraestructura/05.directorio/06.samba/05.usuarios/index.rst.txt"
            rel="nofollow">Mostrar el código</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Búsqueda rápida</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Ir a" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="../06.print/index.html" title="6.4.2.6. Impresión"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="../04.share/index.html" title="6.4.2.4. Directorios compartidos"
             >anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" ><span class="section-number">6. </span>Servicios de infraestructura</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../index.html" ><span class="section-number">6.4. </span>Servicio de directorio</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../index.html" ><span class="section-number">6.4.2. </span>Samba</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Derechos de autor CC BY 4.0, 2016-2020, José Miguel Sánchez Alés.
      Creado con <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.3.
    </div>
  </body>
</html>