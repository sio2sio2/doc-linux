


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="es">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>8.7.1.1. Conceptos básicos &#8212; documentación de Linuxnomicón - rolling</title>
    <link rel="stylesheet" href="../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../../_static/translations.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="index" title="Índice" href="../../../genindex.html" />
    <link rel="search" title="Búsqueda" href="../../../search.html" />
    <link rel="next" title="8.7.2. nftables" href="../02.nftables/index.html" />
    <link rel="prev" title="8.7.1. netfilter (IPtables)" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="../02.nftables/index.html" title="8.7.2. nftables"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="index.html" title="8.7.1. netfilter (IPtables)"
             accesskey="P">anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >8. Conceptos avanzados de redes</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" >8.7. Cortafuegos</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="index.html" accesskey="U">8.7.1. netfilter (IPtables)</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="conceptos-basicos">
<h1>8.7.1.1. Conceptos básicos<a class="headerlink" href="#conceptos-basicos" title="Enlazar permanentemente con este título">¶</a></h1>
<div class="admonition note">
<p class="first admonition-title">Nota</p>
<p class="last">Centraremos las explicaciones en la principal herramienta:
<strong class="program">iptables</strong>, y añadiremos al final algunas notas para
<strong class="program">ebtables</strong> y <strong class="program">arptables</strong>.</p>
</div>
<p>Es importante tener presente que el cortafuegos no sólo sirve para filtrar
tráfico no autoriza o indeseado, sino también para manipularlo cambiando los
datos de origen o destino, ya sean direcciones (<abbr title="Internet Protocol">IP</abbr> o <abbr title="Media Access Control">MAC</abbr>) o puertos.</p>
<div class="section" id="funcionamiento">
<h2>8.7.1.1.1. Funcionamiento<a class="headerlink" href="#funcionamiento" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Antes de analizar su sintaxis y casos de usos es fundamental entender cómo
funciona. <strong class="program">iptables</strong> dispone de cinco tablas (<em>nat</em>, <em>filter</em>,
<em>mangle</em>, <em>raw</em> y <em>security</em>, aunque las dos últimas no las trataremos) y una
serie de cadenas a las que se añaden las reglas del cortafuegos. Según entra,
sale o atraviesan los paquetes el equipo, se consultan para ellos estas cadenas,
por lo que es necesario conocer cuál es la ruta que siguen a fin de aplicar la
regla en la cadena correcta. Obsérvese la siguiente figura de izquierda a derecha.</p>
<img alt="../../../_images/iptables.png" src="../../../_images/iptables.png" />
<p>Entiéndase que el «<em>proceso interno</em>», es cualquier proceso cliente o servidor
susceptible de enviar y recibir paquetes. Un servidor web o un navegador pueden
ser ejemplo de ello. Otro hito importante representando en la figura es el de «<em>decisión de encaminamiento</em>»,
que define hacia dónde se dirige el paquete: si a un proceso de la propia
máquina o a una máquina externa. Obviamente, esta decisión viene determinada por
la dirección <abbr title="Internet Protocol">IP</abbr> de destino.</p>
<p>Hay tres tipos de paquetes:</p>
<dl class="docutils">
<dt><strong>Paquetes destinados al cortafuegos</strong></dt>
<dd>Representados por la línea roja, el primer conjunto de reglas que se
comprueba con ellos son las incluidas en la cadena <em>PREROUTING</em>, llamada así
porque se aplican tales reglas antes de tomar la decisión de encaminamiento.
Pasadas las reglas, se toma la decisión que por nuestra suposición será un
proceso interno, lo que implica comprobar las reglas de la cadena <em>INPUT</em>. Si
el paquete no es filtrado por alguna de estas últimas reglas, el paquete
alcanzará el proceso al que iba destinado y ahí acabará su vida.</dd>
<dt><strong>Paquetes en tránsito</strong></dt>
<dd>Representados por la línea verde son los paquetes que alcanzan el
cortafuegos, pero cuyo destino es otra máquina, por lo que utilizarán otra
interfaz de red (excepcionalmente puede que sea la misma) para salir hacia su
destino. En su caso la <em>decisión de encaminamiento</em> hace que sigan su curso
atravesando la cadena <em>FORWARD</em>. Si logra atravesar esta cadena, comprobará
a continuación <em>POSTROUTING</em>, pasada la cual se escoge según la dirección de
destino la interfaz de salida y en paquete abandona la máquina.</dd>
</dl>
<p><strong>Paquetes generados por el cortafuegps</strong></p>
</div>
<div class="section" id="sintaxis">
<h2>8.7.1.1.2. Sintaxis<a class="headerlink" href="#sintaxis" title="Enlazar permanentemente con este título">¶</a></h2>
<span class="target" id="ipt-ipset"></span></div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">8.7.1.1. Conceptos básicos</a><ul>
<li><a class="reference internal" href="#funcionamiento">8.7.1.1.1. Funcionamiento</a></li>
<li><a class="reference internal" href="#sintaxis">8.7.1.1.2. Sintaxis</a></li>
</ul>
</li>
</ul>

  <h4>Tema anterior</h4>
  <p class="topless"><a href="index.html"
                        title="capítulo anterior">8.7.1. netfilter (IPtables)</a></p>
  <h4>Próximo tema</h4>
  <p class="topless"><a href="../02.nftables/index.html"
                        title="próximo capítulo">8.7.2. nftables</a></p>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/08.redes/07.cortafuegos/01.iptables/01.basico.rst.txt"
            rel="nofollow">Mostrar el código</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Búsqueda rápida</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Ir a" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="../02.nftables/index.html" title="8.7.2. nftables"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="index.html" title="8.7.1. netfilter (IPtables)"
             >anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >8. Conceptos avanzados de redes</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" >8.7. Cortafuegos</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="index.html" >8.7.1. netfilter (IPtables)</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Derechos de autor CC BY 4.0, 2016-2020, José Miguel Sánchez Alés.
      Creado con <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>