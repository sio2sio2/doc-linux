


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="es">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>8.7.1.3. Extensiones &#8212; documentación de Linuxnomicón - rolling</title>
    <link rel="stylesheet" href="../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/custom.css" />
    
    <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/language_data.js"></script>
    <script type="text/javascript" src="../../../_static/translations.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="index" title="Índice" href="../../../genindex.html" />
    <link rel="search" title="Búsqueda" href="../../../search.html" />
    <link rel="next" title="8.7.1.4. ebtables" href="04.ebtables.html" />
    <link rel="prev" title="8.7.1.2. Uso práctico" href="02.conn.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="04.ebtables.html" title="8.7.1.4. ebtables"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="02.conn.html" title="8.7.1.2. Uso práctico"
             accesskey="P">anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >8. Conceptos avanzados de redes</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" >8.7. Cortafuegos</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="index.html" accesskey="U">8.7.1. netfilter (IPtables)</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="extensiones">
<h1>8.7.1.3. Extensiones<a class="headerlink" href="#extensiones" title="Enlazar permanentemente con este título">¶</a></h1>
<p><strong class="program">iptables</strong> dispone de algunas extensiones que amplían enormemente las
posibilidades del cortafuegos. Repasaremos las más interesantes</p>
<div class="section" id="limit">
<span id="iptables-limit"></span><h2>8.7.1.3.1. limit<a class="headerlink" href="#limit" title="Enlazar permanentemente con este título">¶</a></h2>
<p>En general, las extensiones de limitación (<em>limit</em>, <em>connlimit</em>, <em>haslimit</em>)
permiten establecer límites en el flujo de paquetes.</p>
<table border="1" class="iptables-ext docutils">
<colgroup>
<col width="9%" />
<col width="15%" />
<col width="76%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Extensión</th>
<th class="head" colspan="2">Opción</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="4">limit</td>
<td colspan="2">Límita el flujo de paquetes.</td>
</tr>
<tr class="row-odd"><td>–limit</td>
<td>Ratio máximo admisible.</td>
</tr>
<tr class="row-even"><td rowspan="2">–limit-burst</td>
<td>Ráfaga mayor admisible.</td>
</tr>
<tr class="row-odd"><td>iptables -A FORWARD -i eth0 -p tcp –syn -m limit –limit 5/s –limit-burst 10 -j ACCEPT</td>
</tr>
<tr class="row-even"><td rowspan="5">hashlimit</td>
<td colspan="2">Limita el flujo de paquetes considerando el origen y el destino.</td>
</tr>
<tr class="row-odd"><td>–hashlimit-mode</td>
<td>Qué parámetros se consideran para definir la condición entre <em>srcip</em>, <em>srcport</em>, <em>dstip</em> y
<em>dstport</em>. Si no se especifica, el módulo se comporta como <code class="docutils literal notranslate"><span class="pre">limit</span></code>.</td>
</tr>
<tr class="row-even"><td>–hashlimit-upto</td>
<td>Ratio máximo admisible.</td>
</tr>
<tr class="row-odd"><td rowspan="2">–hashlimit-burst</td>
<td>Ráfaga maypr admisible.</td>
</tr>
<tr class="row-even"><td>iptables -A FORWARD -m conntrack –ctstate DNAT -m hashlimit  –hashlimit-upto 5/s
–hashlimit-burst 10 –haslimit-mode srcip,dstip -j ACCEPT</td>
</tr>
<tr class="row-odd"><td rowspan="3">connlimit</td>
<td colspan="2">Límite de conexiones simultáneas.</td>
</tr>
<tr class="row-even"><td rowspan="2">–connlimit-upto</td>
<td>Número máximo de conexiones simultáneas con un mismo cliente.</td>
</tr>
<tr class="row-odd"><td>iptables -A FORWARD -m conntrack –ctstate DNAT -m connlimit –connlimit-upto 3 -j ACCEPT</td>
</tr>
</tbody>
</table>
<p><em>limit</em> y <em>hashlimit</em> funcionan de forma semenjante: se establece un ratio medio
(<code class="docutils literal notranslate"><span class="pre">--limit</span></code>, <code class="docutils literal notranslate"><span class="pre">--hashlimit-upto</span></code>) y un límite máximo para las ráfagas
(<code class="docutils literal notranslate"><span class="pre">--limit-burst</span></code>, <code class="docutils literal notranslate"><span class="pre">--hashlimit-burst</span></code>) y el sistema funciona de forma
semejante a como lo haría un embudo:</p>
<img alt="../../../_images/limit.png" src="../../../_images/limit.png" />
<p>El ratio representa el caudal de desagüe, pero el embudo posee un vaso que
permite verter puntualmente más agua hasta un límite máximo. Cada paquete viene
representado en el dibujo por una bolita, de modo que se pueden acomular como
máximo el número de paquetes indicado con <code class="docutils literal notranslate"><span class="pre">--limit-burst</span></code>, lo que permite
absorber una ráfaga intensa.</p>
<div class="admonition seealso">
<p class="first admonition-title">Ver también</p>
<p class="last">Una aplicación práctica del uso de este módulo puede verse bajo el
<a class="reference internal" href="../../99.ataques/02.tecnicas/00.dos.html#dos-limit"><span class="std std-ref">epígrafe dedicado a ataques DoS</span></a>.</p>
</div>
</div>
<div class="section" id="set">
<span id="ipt-ipset"></span><h2>8.7.1.3.2. set<a class="headerlink" href="#set" title="Enlazar permanentemente con este título">¶</a></h2>
</div>
<div class="section" id="recent">
<span id="iptables-recent"></span><h2>8.7.1.3.3. recent<a class="headerlink" href="#recent" title="Enlazar permanentemente con este título">¶</a></h2>
</div>
<div class="section" id="registro">
<span id="iptables-log"></span><h2>8.7.1.3.4. Registro<a class="headerlink" href="#registro" title="Enlazar permanentemente con este título">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">8.7.1.3. Extensiones</a><ul>
<li><a class="reference internal" href="#limit">8.7.1.3.1. limit</a></li>
<li><a class="reference internal" href="#set">8.7.1.3.2. set</a></li>
<li><a class="reference internal" href="#recent">8.7.1.3.3. recent</a></li>
<li><a class="reference internal" href="#registro">8.7.1.3.4. Registro</a></li>
</ul>
</li>
</ul>

  <h4>Tema anterior</h4>
  <p class="topless"><a href="02.conn.html"
                        title="capítulo anterior">8.7.1.2. Uso práctico</a></p>
  <h4>Próximo tema</h4>
  <p class="topless"><a href="04.ebtables.html"
                        title="próximo capítulo">8.7.1.4. ebtables</a></p>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/08.redes/07.cortafuegos/01.iptables/03.ext.rst.txt"
            rel="nofollow">Mostrar el código</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Búsqueda rápida</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Ir a" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="04.ebtables.html" title="8.7.1.4. ebtables"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="02.conn.html" title="8.7.1.2. Uso práctico"
             >anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" >8. Conceptos avanzados de redes</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" >8.7. Cortafuegos</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="index.html" >8.7.1. netfilter (IPtables)</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Derechos de autor CC BY 4.0, 2016-2020, José Miguel Sánchez Alés.
      Creado con <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>