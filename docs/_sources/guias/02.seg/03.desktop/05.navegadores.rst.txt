.. _seg-navegador:

Seguridad en la navegación
**************************
La *web*, desde sus comienzos a principios de los años 90, ha ido conquistando
paulatinamente nichos en del sector de la Informática, hasta el punto de que en
la actualidad gran parte de la actividad del usuario se desarrolla utilizando
los navegadores:

* Consulta de información bien por motivos lúdicos bien por
  motivos laborales, que fue el propósito que originariamente tuvo.
* Gestiones administrativas o bancarias.
* Foros de discusión, debate y esparcimiento sobre variados asuntos (redes
  sociales y foros web), que han desplazado a otros mecanismos como los `grupos
  de noticias <https://es.wikipedia.org/wiki/Grupo_de_noticias>`_ o `las
  listas de distribución de correo
  <https://es.wikipedia.org/wiki/Lista_de_correo_electr%C3%B3nico>`_.
* Gestión del correo electrónico, que se hace mayoritariamente ahora a través
  de clientes web de correo electrónico (`webmail
  <https://es.wikipedia.org/wiki/Webmail>`_), en vez de aplicaciones que usen
  directamente :ref:`los protocolos SMTP y POP3/IMAP <protocolos-correo>`.
* Servicios de streaming de audio y vídeo, que en muchos casos son directamente
  accesibles desde el navegador, aunque dispongan de una aplicación dedicada.
* Aplicaciones ofimáticas online (`Google Docs`_, `Office 365`_) que comienzan a
  ser ampliamente utilizadas como alternativa a las de escritorio.

De hecho, sólo en los dispositivos móviles (donde es común que se creen
aplicaciones dedicadas) y en el sector de los videojuegos, el navegador web no
es una aplicación omnipresente. Esta omnipresencia ha provocado que sobre el
navegador sea la aplicación de escritorio sobre la que más se ha centrado el
*malwarte* en los últimos años, razón que justifica que dedicación de un
epígrafe exclusivo a analizar sus riesgos. 

Amenazas
========
En los equipos de escritorio, prácticamente toda la relación del usuario con el exterior se lleva a cabo a través del navegador, por lo que investigar qué hace el usuario cuando navega proporciona muchísima información sobre su identidad, sus hábitos y su vida privada.

Todas las amenazas que se ciñen sobre el navegador, pueden resumirse en estos
tres grupos:

a. Engaños al usuario de diverso tipo:

   + Descarga de algún troyano que, tras su instalación, afecta a todo el
     sistema\ [#]_.
   + Instalación en el navegador de un complemento, plug-in o extensión
     maliciosos que afectan exclusivamente al propio navegador.
   + Fraudes basados en la suplantación de un sitio web legítimo con el fin
     de obtener las credenciales de acceso (p.e. el sitio web de un banco).

   Estas amenazas son semejantes a las que afectan a otro tipo de *software*.

#. Información de sesiones anteriores que queda almacenada en el propio
   navegador y puede ser consultada por personas que también acceden
   al sistema.

#. Estrategias de rastreo del usuario.

Analizaremos más adelante estas amenazas, pero antes es preciso tener en cuenta
que muchas de ellas son posibles gracias al hecho de que el navegador es capaz
de ejecutar código, ya que dispone de una máquina virtual de *Javascript*\ [#]_:

.. table:: Motores de Javascript
   :class: motor-js

   ============== ================== ==========================
    Motor          Desarrollador      Navegador
   ============== ================== ==========================
    V8             Google             Chromium y derivados
    SpiderMonkey   Fundación Mozilla  Firefox y derivados
    |SFX|          Apple              Safari
    KJS            KDE                Konqueror
    Chakra         Microsoft          Edge (hasta 2019)
   ============== ================== ==========================

En la máquina se ejecuta código de este lenguaje de programación tanto incluido
en las propias páginas web como en los complementos que se instalan en el propio
navegador. Los navegadores disponen de mecanismos para limitar la interacción de
este código con el resto del sistema, por lo que su ejecución no trasciende el
navegador.

Engaños
-------
En esta estrategia el punto débil es el propio usuario, de modo que sin un
comportamiento responsable no hay posibilidad de defensa:

+ La descarga de aplicaciones sólo debe realizarse de páginas oficiales y
  de *software* de contrastada reputación\ [#]_. Cualquier programa obtenido a
  partir de páginas de `warez <https://es.wikipedia.org/wiki/Warez>`_ es un
  candidato a contener *software* malicioso.

+ Otro tanto pasa con los complementos del navegador, que deberían sólo
  descargarse del sitio oficial en que el navegador los ofrece (p.e. `para
  Firefox <https://addons.mozilla.org/es/firefox/extensions/>`_ o `para Chromium
  <https://chrome.google.com/webstore/category/extensions>`_).

+ La otra estrategia de engaño suele consistir en dirigir al usuario hacia una
  página web fraudulenta que imita aquella de la que el atacante quiere obtener
  las credenciales. Si el usuario pica e introduce las credenciales en tal
  página, el atacante obtendrá las claves de accesi. Para ello, en ocasiones se
  recurre, simplemente, a utilizar una |URL| semejante a la original, pero en
  otras este engaño puede ir acompañado de un :ref:`envenenamiento DNS
  <dns-spoofing>`.

Información almacenada
----------------------
Durante la navegación, los navegadores almacenan cierta información de ella que
les sirve para facilitar la navagación futura. Si un tercero accede a nuestro
navegador podrá obtener mucha información de cuáles son nuestros gustos y, muy
posiblemente, acceder a algunos datos personales.

**Historial**
   El :dfn:`historial` es la relación de páginas ya visitadas. El navegador las
   apunta, junto a la fecha y hora en que se visitaron por última visita.

**Caché**
   Para acelerar la navagación, los servidores web al proporcionar recursos
   indican cuál es la caducidad de estos. Los servidores suelen utilizar este
   dato, para almacenar en su caché esos recursos, de manera que si el usuario
   vuelve a pedirlos antes de ser obsoletos, se sirvan directamente sin pedirlos
   al servidor.

   El problema es que alguien con acceso al sistema, puede acceder a esa caché y
   recuperar esos recursos (p.e. fotos).

**Contraseñas**
   Por defecto, los navegadores preguntan al usuario si se quieren guardar las
   contraseñas que en los formularios están marcadas como tales\ [#]_. Una vez
   almacenadas el usuario no tendrá que volver a escribirlas, sino que el
   navegador la rellenará directamente. Es cierto que este autocompletado de
   contraseñas puede protegerse con una contraseña maestra en Firefox_
   (directamente en la configuración) o en Chromium_ (a través de `un
   complemento
   <https://chrome.google.com/webstore/detail/set-password-for-your-bro/cjmjgijhapgicbhmniemjkjeaedanank>`_).

**Autocompletado**
   Los navegadores no sólo son capaces de recuperar contraseñas. También
   recuerdan los valores que se introdujeron en campos de formulario, de manera
   que, cuando se topa con un campo (en esa misma página o en otra cualquiera),
   con un mismo atributo ``name`` sugiere los valores que ya se hayan
   introducido. Esa es la razón por la que los navegadores son en muchos casos
   capaces de adivinar nuestra dirección de correo, nuestra dirección pòstal o
   nuestro nombre: ya los introdujimos anteriormente en otra página y en ambos
   formularios esos campos recibieron el mismo `name` (p.e. "*mail*" o "*email*"
   para un campo que pida nuestra dirección de correo electrónico).
   
   Como en los formularios de registro es habitual que se nos pida información
   personal, entonces esa información personal estará expuesta si un tercero
   accede a nuestro ordenador y prueba a rellenar un formulario de registro.

Rastreo
-------

.. https://panopticlick.eff.org/
   https://www.online-tech-tips.com/computer-tips/what-are-tracking-cookies-and-are-they-bad/

Contramedidas
=============
.. todo:: Usos y complementos que minimizan estas amenazas.

.. rubric:: Notas al pie

.. [#] Hay otra manera de que desde el navegador se afecte a todo el sistema:
   los plugins (como el de Java_ o el de Flash_). Estos, sin embargo, han ido
   desapareciendo paulatinamente de los navegadores, hasta el punto de que ya no
   es posible ejecutarlos en los más modernos.

.. [#] De acuerdo, en realidad, *ECMAScript*, que es la versión normalizada del
   lenguaje *Javascript* creado originariamente por Netscape_.
.. [#] Y a veces, `ni eso
   <https://www.elespanol.com/omicrono/software/20200128/antivirus-avast-espio-vendio-datos-identificarte-internet/463203848_0.html>`_.
.. [#] Un elemento `<input>
   <https://developer.mozilla.org/es/docs/Web/HTML/Elemento/input>`_ de tipo
   ``password``.

.. |SFX| replace:: :abbr:`SFX (SquirrelFish eXtreme)`
.. |URL| replace:: :abbr:`URL (Uniform Resource Locator)`

.. _Google Docs: https://www.google.es/intl/es/docs/about
.. _Office 365: https://es.wikipedia.org/wiki/Microsoft_Office_365
.. _Netscape: https://es.wikipedia.org/wiki/Netscape_Communications_Corporation
.. _Flash: https://es.wikipedia.org/wiki/Adobe_Flash_Player
.. _Java: https://es.wikipedia.org/wiki/Applet_Java
.. _Chromium: https://www.chromium.org
.. _Firefox: https://www.mozilla.org/es-ES/firefox
