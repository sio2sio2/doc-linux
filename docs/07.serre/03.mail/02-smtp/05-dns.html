


<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>7.3.3.5. Acreditación del remitente &#8212; documentación de Linuxnomicón - rolling</title>
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/translations.js"></script>
    
    <link rel="index" title="Índice" href="../../../genindex.html" />
    <link rel="search" title="Búsqueda" href="../../../search.html" />
    <link rel="next" title="7.3.4. Servidor IMAP" href="../03-imap/index.html" />
    <link rel="prev" title="7.3.3.4. Gestión de usuarios" href="04-usuarios.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="../03-imap/index.html" title="7.3.4. Servidor IMAP"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="04-usuarios.html" title="7.3.3.4. Gestión de usuarios"
             accesskey="P">anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" ><span class="section-number">7. </span>Servicios de red</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" ><span class="section-number">7.3. </span>Correo electrónico</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="index.html" accesskey="U"><span class="section-number">7.3.3. </span>Servidor <abbr title="Simple Mail Transfer Protocol">SMTP</abbr></a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">7.3.3.5. </span>Acreditación del remitente</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="acreditacion-del-remitente">
<span id="smtp-acreditacion"></span><h1><span class="section-number">7.3.3.5. </span>Acreditación del remitente<a class="headerlink" href="#acreditacion-del-remitente" title="Enlazar permanentemente con este título">¶</a></h1>
<p>En los mensajes de correo hay dos remitentes que pueden coincidir o no:</p>
<dl class="simple">
<dt><strong>Remitente del sobre</strong> (<em>Envelope sender</em>)</dt><dd><p>Es el remitente cuya dirección se declara durante el envío del correo a
través del comando <code class="docutils literal notranslate"><span class="pre">MAIL</span> <span class="pre">FROM</span></code>. Esta es la dirección a la que el servidor
destinatario contestara en caso de que se haya producido un problema en la
entrega. Por tanto, no forma parte del mensaje original, pero el servidor la
añade a través del campo de cabecera <code class="docutils literal notranslate"><span class="pre">Return-Path:</span></code>.</p>
</dd>
<dt><strong>Dirección del mensaje</strong></dt><dd><p>Es la dirección que aparece en el campo de cabecera <code class="docutils literal notranslate"><span class="pre">From:</span></code>. Por lo
general, es tomada por el lector final del mensaje como la dirección del
remitente, ya que el campo <code class="docutils literal notranslate"><span class="pre">Return-Path:</span></code> rara vez se muestra en los
clientes de correo.</p>
</dd>
</dl>
<p>El protocolo de correo, por su propio diseño, se presta a que un malicioso
(frecuentemente un <em>spammer</em>) falsee cualquiera de las dos direcciones, port lo
que para detectar estas falsificaciones, se han desarrollado una serie de
protocolos que, si no los observamos en nuestro servidor, pueden levantar en
otros servidores la desconfianza sobre nuestros mensajes.</p>
<div class="section" id="spf">
<span id="id1"></span><h2><span class="section-number">7.3.3.5.1. </span><abbr title="Sender Policy Framework">SPF</abbr><a class="headerlink" href="#spf" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="section" id="concepto">
<h3><span class="section-number">7.3.3.5.1.1. </span>Concepto<a class="headerlink" href="#concepto" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Este protocolo, desarrollado en el <span class="target" id="index-0"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc7208.html"><strong>RFC 7208</strong></a>, permite al dueño de un dominio
definir cuáles son los servidores que utiliza para <strong>enviar</strong> mensajes de correo
de tal dominio<a class="footnote-reference brackets" href="#id10" id="id2">1</a>. La información se publica a través de un registro <abbr title="Domain Name Server">DNS</abbr>
que se describirá más adelante.</p>
<p>Con este protocolo, los servidores destinatarios comprueban si la <abbr title="Internet Protocol">IP</abbr> del
servidor remitente es alguna de las acreditadas a través del registro <abbr title="Sender Policy Framework">SPF</abbr>
correspondiente al dominio de la dirección del <em>remitente del sobre</em>.
Trasladando esta explicación a un ejemplo, podríamos ilustrarlo del siguiente
modo:</p>
<blockquote>
<div><p>El dueño de la cuenta <em>pepe&#64;gmail.com</em> usará los mecanismos que le
proporciona su proveedor de correo (<abbr title="Simple Mail Transfer Protocol">SMTP</abbr> o el <em>webmail</em> <a class="reference external" href="http://gmail.google.com">gmail.google.com</a>) para enviar un mensaje a <em>paco&#64;example.com</em>.
Esto implica que sea una máquina de <em>Gmail</em> la que se encargue de entregar el
mensaje al servidor <em>smtp.example.com</em>. Éste, al recibir el mensaje,
registrará la <abbr title="Internet Protocol">IP</abbr> de la máquina remitente y, como la dirección del sobre
es <em>pepe&#64;gmail.com</em>, para certificar que realmente
tal <abbr title="Internet Protocol">IP</abbr> es de una máquina de <em>Gmail</em>, realizará las siguientes consultas
<abbr title="Domain Name Server">DNS</abbr>:</p>
<ul>
<li><p>¿Quiénes son las máquinas que se encargan de enviar mensajes del dominio
<em>gmail.com</em>?</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> dig +nocmd +noall +answer gmail.com TXT
<span class="go">gmail.com.              176     IN      TXT     &quot;v=spf1 redirect=_spf.google.com&quot;</span>
</pre></div>
</div>
<p>Bien, la respuesta no es concluyente. El registro nos dice, simplemente,
que lo que diga otro registro.</p>
</li>
<li><p>Vale. Pues, ¿qué es lo que dice este registro?</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> dig +nocmd +noall +answer _spf.google.com TXT
<span class="go">_spf.google.com.        299     IN      TXT     &quot;v=spf1 include:_netblocks.google.com include:_netblocks2.google.com include:_netblocks3.google.com ~all&quot;</span>
</pre></div>
</div>
<p>La respuesta sigue sin ser del todo concluyente. Nos informa de que las
máquinas seran las incluidas en alguno de esos tres registros.</p>
</li>
<li><p>Vale. Pues, ¿qué dicen esos registros?</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> dig +nocmd +noall +answer _netblocks.google.com TXT
<span class="go">_netblocks.google.com.  2480    IN      TXT     &quot;v=spf1 ip4:35.190.247.0/24 ip4:64.233.160.0/19 ...mas_ips... ~all&quot;</span>
</pre></div>
</div>
</li>
</ul>
<p>Ahí sí están referidos todos los rangos de <abbr title="Internet Protocol">IP</abbr> de máquinas autorizadas para
enviar mensajes del dominio <em>gmail.com</em>. La <abbr title="Internet Protocol">IP</abbr> de la máquina que contactó
al servidor <em>smtp.example.net</em> debería estar incluida en uno de esos rangos.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>Esta misma averiguación podríamos haberla hecho más visualmente
desde <a class="reference external" href="https://stopemailfraud.proofpoint.com/spf/">este enlace</a>.</p>
</div>
</div></blockquote>
<p>Hay, no obstante, que hacer dos puntualizaciones respecto a las consultas que
permiten acreditar el remitente. Por un lado, no pueden requerirse más de 10
consultas para la obtención de una respuesta. En este caso, han sido un máximo
de 5. Por otro lado, el texto de las respuestas no puede contener más de 255
caracteres y esa es la razón por la que los rangos de <abbr title="Internet Protocol">IP</abbr> se han dividido en
tres registros distintos.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Observe que esta técnica no previene ninguna suplantación de la
<em>dirección del mensaje</em>.</p>
</div>
<p>Conocido cómo funciona el protocolo, ¿qué podemos hacer respecto a él con nuestro
servidor? Básicamente, dos cosas:</p>
<ol class="arabic simple">
<li><p>Asegurarnos de incluir en el <abbr title="Domain Name Server">DNS</abbr> el registro <abbr title="Sender Policy Framework">SPF</abbr> que acredita nuestro
servidor como la máquina emisora de mensajes del dominio. De no existir tal
información, podríamos levantar suspicacias en servidores destinatarios y
acabar nuestros mensajes en el buzón de <em>spam</em>. Conviene que lea al completo
todo el epígrafe siguiente, pero puede saltar <a class="reference internal" href="#postfix-dns-spf"><span class="std std-ref">directamente a la propuesta
de registro</span></a>.</p></li>
<li><p>Incorporar a <strong class="program">postfix</strong> <em>software</em> que comprueb con <abbr title="Sender Policy Framework">SPF</abbr>
el remitente de los mensajes entrantes. <a class="reference internal" href="#postfix-spf"><span class="std std-ref">Más adelante</span></a>
trataremos cómo hacerlo.</p></li>
</ol>
</div>
<div class="section" id="registro">
<h3><span class="section-number">7.3.3.5.1.2. </span>Registro<a class="headerlink" href="#registro" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Los registros de <abbr title="Sender Policy Framework">SPF</abbr> no son un tipo especial de registro <abbr title="Domain Name Server">DNS</abbr>, sino un tipo
<em>TXT</em> que incluye en la cadena información sobre la aceptación o rechazo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mail1.org      IN    TXT      &quot;v=spf1 test1 test2 test3 ... testN&quot;</span>
</pre></div>
</div>
<p>El registro de ejemplo será consultado al recibir mensajes cuyo <em>remitente del
sobre</em> sea <em>pepe&#64;mail1.org</em>, <em>usuario&#64;mail1.org</em> o cualquier otra cuenta del
dominio <em>mail1.org</em>. La cadena comienza siempre por la definición de la versión
del protocolo usada (la versión 1) y una serie de pruebas que se realizan
utilizando la <abbr title="Internet Protocol">IP</abbr> del remitente como entrada.</p>
<p>Cada prueba consta de:</p>
<ul>
<li><p>Un <strong>cualificador</strong> que puede ser:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 84%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Cualificador</p></th>
<th class="head"><p>Significado</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>+</p></td>
<td><p><em>PASS</em>, la concordancia devuelve éxito.</p></td>
</tr>
<tr class="row-odd"><td><p>?</p></td>
<td><p><em>NEUTRAL</em>, la concordancia no devuelve nada concluyente.</p></td>
</tr>
<tr class="row-even"><td><p>~</p></td>
<td><p><em>SOFTFAIL</em>, la concordancia provoca su marcado como <em>spam</em>.</p></td>
</tr>
<tr class="row-odd"><td><p>-</p></td>
<td><p><em>FAIL</em>, la concordancia provoca que se rechace el correo.</p></td>
</tr>
</tbody>
</table>
<p>Cuando no se especifica cualificador, se sobreentiende «+».</p>
</li>
<li><p>Un <em>mecanismo</em> que puede ser:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 59%" />
<col style="width: 27%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Mecanismo</p></th>
<th class="head"><p>Significado</p></th>
<th class="head"><p>Ejemplo</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>all</p></td>
<td><p>Concordancia universal</p></td>
<td><p>-all</p></td>
</tr>
<tr class="row-odd"><td><p>a</p></td>
<td><p>Concordancia con el nombre especificado</p></td>
<td><p>a:smtp.mail1.org</p></td>
</tr>
<tr class="row-even"><td><p>ip4</p></td>
<td><p>Concordancia con el rango de IPv4 indicado</p></td>
<td><p>ip4:33.34.35.36</p></td>
</tr>
<tr class="row-odd"><td><p>ip6</p></td>
<td><p>Ídem pero para IPv6</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>mx</p></td>
<td><p>Concordancia con los servidores de correo</p></td>
<td><p>mx:mail1.org</p></td>
</tr>
<tr class="row-odd"><td><p>include</p></td>
<td><p>Concordancia con las pruebas de otro registro</p></td>
<td><p>include:otromail.org</p></td>
</tr>
</tbody>
</table>
<p>Cuando con <em>a</em> o <em>mx</em> no se especifica nombre, se sobreentiende el mismo que
el del dominio. En nuestro ejemplo, <code class="docutils literal notranslate"><span class="pre">a</span></code> equivale <code class="docutils literal notranslate"><span class="pre">a:mail1.org</span></code> y <code class="docutils literal notranslate"><span class="pre">mx</span></code> a
<code class="docutils literal notranslate"><span class="pre">mx:mail1.org</span></code>. Además, la última prueba implica siempre el mecanismo <em>all</em>,
para que siempre haya una prueba que devuelva concordancia.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>También existe, aunque obsoleto, el mecanismo <code class="docutils literal notranslate"><span class="pre">ptr</span></code> que concuerda
si el nombre asociado a la <abbr title="Internet Protocol">IP</abbr> del cliente (resolución inversa) está en el
dominio proporcionado y tal nombre resuelve a la <abbr title="Internet Protocol">IP</abbr> del cliente.</p>
</div>
</li>
</ul>
<p>Además de lo anterior podemos usar el <strong>modificador</strong> <em>redirect</em> (véase el
ejemplo ilustrativo del epígrafe anterior) que remite a que se use la política
de otro registro.</p>
<p>Por ejemplo, si el registro es:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mail1.org      IN    TXT      &quot;v=spf1 ip4:123.12.0.0/16 mx include:_spf.google.com ~all&quot;</span>
</pre></div>
</div>
<p>Se obtendría <em>PASS</em> (éxito en la comprobación) si la <abbr title="Internet Protocol">IP</abbr> del remitente es de la
red <em>126.12.0.0/16</em>, si coincide con la de alguno de los servidores de correo
definidos para el dominio <em>mail1.org</em> o si es una de las máquinas que remite
correo de <em>Google</em>. Si no es el caso, la última prueba supone que devolvemos
<em>SOFTFAIL</em> y el mensaje debería identificarse como posible <em>spam</em>. Nótese que
la segunda y la tercera prueba requieren consultas <abbr title="Domain Name Server">DNS</abbr> ulteriores para llegar
a obtener una dirección <abbr title="Internet Protocol">IP</abbr> numérica.</p>
<p id="postfix-dns-spf">Para el caso de un servidor modesto como el nuestro, que envía y recibe
mensajes, es más que suficiente:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mail1.org      IN       TXT      &quot;v=spf1 mx ~all&quot;</span>
</pre></div>
</div>
<p>y si tuviéramos algún otro dominio asociado a este servidor:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mail3.org      IN       TXT      &quot;v=spf1 redirect=mail1.org&quot;</span>
<span class="go">ml.mail1.org   IN       TXT      &quot;v=spf1 redirect=mail1.org&quot;</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>En <a class="reference external" href="https://www.kitterman.com/spf/validate.html">kitterman.com</a>,
podemos hacer comprobaciones de registros <abbr title="Sender Policy Framework">SPF</abbr>.</p>
</div>
</div>
<div class="section" id="verificacion">
<span id="postfix-spf"></span><h3><span class="section-number">7.3.3.5.1.3. </span>Verificación<a class="headerlink" href="#verificacion" title="Enlazar permanentemente con este título">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Como alternativa al método explicado aquí, podemos habilitar
la verificación <abbr title="Sender Policy Framework">SPF</abbr> del remitente tanto con <a class="reference internal" href="02-accept.html#spamassassin"><span class="std std-ref">spamassassin</span></a> como con <a class="reference internal" href="02-accept.html#rspamd"><span class="std std-ref">rspamd</span></a>.</p>
</div>
<p>Nuestra intención es incluir en la <a class="reference internal" href="02-accept.html#postfix-accept"><span class="std std-ref">política de aceptación de mensajes de
postfix</span></a> el mecanismo <abbr title="Sender Policy Framework">SPF</abbr>, para lo cual debemos instalar:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt install postfix-policyd-spf-python
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>La comprobación <abbr title="Sender Policy Framework">SPF</abbr> requiere la realización de una ingente
cantidad de consultas <abbr title="Domain Name Server">DNS</abbr>, de modo que sería conveniente la instalación de
un <abbr title="Domain Name Server">DNS</abbr> en el propio servidor, si no hay ya uno instalado en la red local.</p>
</div>
<p>Hecho esto, debemos añadir a <code class="file docutils literal notranslate"><span class="pre">/etc/postfix/master.cf</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">policyd-spf  unix  -       n       n       -       0       spawn</span>
<span class="go">    user=policyd-spf argv=/usr/bin/policyd-spf</span>
</pre></div>
</div>
<p>y añadir a <code class="file docutils literal notranslate"><span class="pre">/etc/postfix/main.cf</span></code> una línea para aumentar la temporización
del agente <abbr title="Sender Policy Framework">SPF</abbr>:</p>
<div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nb">policyd</span>-spf_time_limit = <span class="m">3600</span>
</pre></div>
</div>
<p>y dejar en las <a class="reference internal" href="01-inst.html#postfix-25-465-587"><span class="std std-ref">políticas de acceso para el puerto 25</span></a>
lo siguiente:</p>
<div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nb">port25_recipient_restrictions</span> = permit_mynetworks,
                                <span class="nb">reject_unauth_destination</span>,
                                <span class="nb">check_policy_service</span> unix:private/policyd-spf,
                                <span class="nb">reject_rbl_client</span> zen.spamhaus.org
</pre></div>
</div>
<p>El agente genera para todos los mensajes procesados un campo de cabecera
<code class="docutils literal notranslate"><span class="pre">Received-SPF:</span></code> con el resultado de la verificación.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Si preferimos no rechazar los mensajes, aun cuando la verificación
genera <em>FAIL</em>, podemos editar <code class="file docutils literal notranslate"><span class="pre">/etc/postfix-policyd-spf-python/policyd-spf.conf</span></code>
y dejar:</p>
<div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nb">HELO_reject</span> = False
<span class="nb">Mail_From_reject</span> = False
</pre></div>
</div>
</div>
<p>Para comprobar la configuración, podemos utilizar <strong class="program">msmtp</strong> desde un
cliente local que se conecte al puerto <strong>25</strong>, para lo cual podemos
reaprovechar la <a class="reference internal" href="01-inst.html#postfix-25-465-587"><span class="std std-ref">configuración anteriomente propuesta para este cliente</span></a> y añadir una línea para falsear la dirección del sobre:</p>
<div class="highlight-apache notranslate"><div class="highlight"><pre><span></span>[...]

account vm25
   auth off
   tls_starttls on
<span class="hll">   from spammer@gmail.com
</span></pre></div>
</div>
<p>El mensaje puede enviarse ahora:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> msmtp -a vm25 -t
<span class="go">From: spammer@gmail.com</span>
<span class="go">To: usuario@mail1.org</span>
<span class="go">Subject: Mensaje fraudulento...</span>

<span class="go">Nos hacemos pasar por alguien con cuenta en Gmail</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="dkim">
<span id="id3"></span><h2><span class="section-number">7.3.3.5.2. </span><abbr title="Domain Keys Identified Mail">DKIM</abbr><a class="headerlink" href="#dkim" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="section" id="id4">
<h3><span class="section-number">7.3.3.5.2.1. </span>Concepto<a class="headerlink" href="#id4" title="Enlazar permanentemente con este título">¶</a></h3>
<p>El mecanismo de <abbr title="Domain Keys Identified Mail">DKIM</abbr>, descrito en el <span class="target" id="index-1"></span><a class="rfc reference external" href="https://tools.ietf.org/html/rfc6376.html"><strong>RFC 6376</strong></a>, permite saber al servidor
destinatario que el mensaje proviniente de la <em>dirección del mensaje</em> fue
autorizado por el dueño del dominio al que pertenece dicha dirección. Para ello
el servidor <abbr title="Simple Mail Transfer Protocol">SMTP</abbr> remitente aplica <a class="reference internal" href="../../../09.apendice/01.cryto/02.algo.html#firma-digital"><span class="std std-ref">firma digital</span></a> a los
mensajes que envía, la cual será verificada en el servidor de destino.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>Si no tiene claro el concepto, consulte la sección dedicada a la
<a class="reference internal" href="../../../09.apendice/01.cryto/02.algo.html#firma-digital"><span class="std std-ref">firma digital</span></a>. Ahora bien, en este caso la firma es
absolutamente transparente para los usuarios finales y es sólo un mecanismo
que aplican los servidores para juzgar la fiabilidad de los mensajes.</p>
</div>
<p>De manera muy resumida el proceso es el siguiente:</p>
<ul>
<li><p>Con anterioridad, el dueño del dominio debe publicar través de un registro
<abbr title="Domain Name Server">DNS</abbr> de tipo <em>TXT</em> la clave pública asociada a la clave privada con la que se
firman los mensajes.</p></li>
<li><p>El remitente añade un campo <code class="docutils literal notranslate"><span class="pre">DKIM-Signature:</span></code> con la firma digital. Para
la creación de la firma se usan claves asociadas al dominio de la <em>dirección
del mensaje</em>. El campo tiene el siguiente aspecto:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=mail1.org; s=mail;</span>
<span class="go">        t=1545467652; bh=s8zLfuQdHGkvCXnndlQQO/EjIoJDdA+FodZEaFvU2X4=;</span>
<span class="go">        h=From:To:Subject:Date:From;</span>
<span class="go">        b=NIpT52OFx8ty/0/krkt9MtJIN83TVNcoxWkcLtTWEBD1VOzlgHuTtcoJVOsKkBqbU</span>
<span class="go">         YPC9sI4zwQ9mcL4Mr0yNXskXmeAJ6bVMJzgWkKgfkCO6V20Z5pjZ/OPFHV+T3x43US</span>
<span class="go">         cpTYzpwRVtLepxpQ2SJv19KYXnXIGKqIA157GGBC16qc2lwhCGSUY/g6bkmc0b+WpI</span>
<span class="go">         vh8daZPnmKSQqEIEkv3jBADsJ3KlSe/dz3vx1fCbK0azOu2AWNeEZ/mVjSgMLIGaoZ</span>
<span class="go">         BvXY09OqM/v94A8hseGi5HUB0Bxz90bh0Y3U9W9TMk1/wORWmgY5NIAnu3H0PdZtnu</span>
<span class="go">         Qy07Eat+80AeQ==</span>
</pre></div>
</div>
</li>
<li><p>El servidor receptor toma el campo anterior, obtiene a través de una consulta
<abbr title="Domain Name Server">DNS</abbr> la clave pública necesaria, y realiza la comprobación de la firma. El
resultado se añade a un campo <code class="docutils literal notranslate"><span class="pre">Authentication-Results</span></code> con este aspecto:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Authentication-Results: smtp.mail2.org;</span>
<span class="go">        dkim=pass (2048-bit key; unprotected) header.d=mail1.org header.i=@mail1.org header.b=&quot;NIpT52OF&quot;;</span>
<span class="go">        dkim-atps=neutral</span>
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Observe que en este caso la verificación obra sobre la <em>dirección del
mensaje</em> y no sobre la dirección del <em>remitente del sobre</em>.</p>
</div>
</div>
<div class="section" id="implementacion">
<h3><span class="section-number">7.3.3.5.2.2. </span>Implementación<a class="headerlink" href="#implementacion" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Para implementar <abbr title="Domain Keys Identified Mail">DKIM</abbr> en el correo saliente con <strong class="program">postfix</strong>,
podemos usar el <em>milter</em> <a class="reference external" href="http://opendkim.org/">OpenDKIM</a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt install opendkim<span class="o">{</span>,-tools<span class="o">}</span>
</pre></div>
</div>
<p>La configuración en <code class="file docutils literal notranslate"><span class="pre">/etc/opendkim.conf</span></code> debe quedar del siguiente modo:</p>
<div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nb">Syslog</span>               yes
<span class="nb">UMask</span>                <span class="m">007</span>

<span class="nb">Canonicalization</span>     relaxed/simple

<span class="c"># Socket dentro de la jaula de postfix.</span>
<span class="nb">Socket</span>               local:/var/spool/postfix/var/run/opendkim.sock
<span class="nb">PidFile</span>              <span class="sx">/var/run/opendkim/opendkim.pid</span>

<span class="nb">OversignHeaders</span>      From

<span class="c"># Para habilitar DNSSEC</span>
<span class="c">#TrustAnchorFile       /usr/share/dns/root.key</span>

<span class="nb">UserID</span>               opendkim

<span class="nb">KeyTable</span>             <span class="sx">/etc/opendkim/keytable</span>
<span class="nb">SigningTable</span>         <span class="sx">/etc/opendkim/signingtable</span>

<span class="c"># El software no respeta lo indicado en /etc/resolv.conf,</span>
<span class="c"># por lo que no usará un servidor local para las resoluciones.</span>
<span class="c"># Si hacemos pruebas internas con dominios inventados</span>
<span class="c"># es indispensable declarar el servidor DNS local.</span>
<span class="nb">NameServers</span>          <span class="m">127.0.0.1</span>
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>Puedo consultar que significa la normalización <abbr title="Domain Keys Identified Mail">DKIM</abbr>
(<em>Canonicalizaion</em>) en <a class="reference external" href="https://wordtothewise.com/2016/12/dkim-canonicalization-or-why-microsoft-breaks-your-mail/">este artículo</a>.</p>
</div>
<p>Dado que necesitamos poder escribir dentro de la jaula de <strong class="program">postfix</strong>,
debemos preparar en ella un subdirectorio <code class="file docutils literal notranslate"><span class="pre">var/run/</span></code> según lo <a class="reference internal" href="02-accept.html#postfix-aux"><span class="std std-ref">mostrado aquí</span></a>.</p>
<p>Dado que <em>opendkim</em> necesita firmar, debemos generar las claves:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> opendkim-genkey -D /etc/dkimkeys -r -s mail -d mail1.org
<span class="gp">#</span> chown opendkim:opendkim /etc/dkimkeys/mail.*
</pre></div>
</div>
<p>Esta orden genera las claves para el dominio <em>mail1.org</em>, aunque dentro de la
propia clave no está expresado el propio dominio, con lo que podremos reusar la
misma clave en otros dominios que gestionemos. Además, está asociada al selector
<em>mail</em>, que es un nombre arbitraro. La existencia de selectores permite definir
varias claves asociadas a un mismo dominio. Por última, con la opción <code class="docutils literal notranslate"><span class="pre">-r</span></code>
hemos restringido el uso de la clave a la firma del servicio de correo, y no
otros servicios.</p>
<p>Para terminar la configuración del servicio debemos crear los ficheros
<code class="file docutils literal notranslate"><span class="pre">/etc/opendkim/signingtable</span></code> y <code class="file docutils literal notranslate"><span class="pre">/etc/opendkim/keytable</span></code>. El primero
relaciona las direcciones de correo con el identificador de su clave
correspondiente:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> mkdir /etc/opendkim
<span class="gp">#</span> cat &gt; /etc/opendkim/signingtable
<span class="go">mail1.org          mail._domainkey.mail1.org</span>
</pre></div>
</div>
<p>y el segundo al identificador con la clave en sí:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> cat &gt; /etc/opendkim/keytable
<span class="go">mail._domainkey.mail1.org     mail1.org:mail:/etc/dkimkeys/mail.private</span>
</pre></div>
</div>
<p>donde la parte derecha es «<em>dominio:selector:ruta</em>». Hecho esto, reiniciamos el
servicio:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> invoke-rc.d opendkim restart
</pre></div>
</div>
<p>Ahora debemos añadir el registro <abbr title="Domain Name Server">DNS</abbr> que publica la clave pública. Su
expresión se encuentra dentro de <code class="file docutils literal notranslate"><span class="pre">/etc/dkimkeys/mail.txt</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">mail._domainkey IN      TXT     ( &quot;v=DKIM1; h=sha256; k=rsa; s=email; &quot;</span>
<span class="go">          &quot;p=MIIBI ... a+&quot;</span>
<span class="go">                    &quot;g2B8aHwc3 ... DAQAB&quot;)  ; ----- DKIM key mail for mail1.org</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>La adición dependerá de dónde la hagamos. En <strong class="program">dnsmasq</strong> bastaría con
añadir una línea como esta:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">txt-record=mail._domainkey.mail1.org,&quot;v=DKIM1; h=sha256; k=rsa; s=email; p=MIIBI ... ag2B8aHwc3 ... DAQAB+&quot;</span>
</pre></div>
</div>
</div>
<p>Convendría probar si somos capaces de resolver el registro y, por último,
comprobar si funciona la clave:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> host -t txt mail._domainkey.mail1.org
<span class="gp">#</span> opendkim-testkey -d mail1.org -s mail -vvv
<span class="go">opendkim-testkey: using default configfile /etc/opendkim.conf</span>
<span class="go">opendkim-testkey: checking key &#39;mail._domainkey.mail1.org&#39;</span>
<span class="go">opendkim-testkey: key not secure</span>
<span class="go">opendkim-testkey: key OK</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>Tenga presente que la comprobación de la clave no funcionará si
<strong class="program">opendkim</strong> no es capaz de resolver el registro con la clave.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Se indica que la clave no es segura porque no hay forma de verificarla
con <em>DNSSEC</em>.</p>
</div>
<p>Completada la configuración de <strong class="program">opendkim</strong>, resta hacer que
<strong class="program">postfix</strong> haga uso de él, para lo cual habrá que añadir a
<code class="file docutils literal notranslate"><span class="pre">/etc/postfix/main.cf</span></code> unas líneas:</p>
<div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="c"># DKIM</span>
<span class="nb">milter_default_action</span> = accept
<span class="nb">smtpd_milters</span> = unix:var/run/opendkim.sock
<span class="nb">non_smtpd_milters</span> = unix:var/run/opendkim.sock
</pre></div>
</div>
<p>e incluir el usuario <em>postfix</em> dentro del grupo <em>opendkim</em> para que pueda leer
en el <em>socket</em>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> adduser postfix opendkim
</pre></div>
</div>
<p>Con esta configuración, el servidor de correo se encargará de firmar los
mensajes que envíe, añadiendo un campo <code class="docutils literal notranslate"><span class="pre">DKIM-Signature:</span></code> a la cabecera del
correo; y verificará los mensajes entrantes que hayan sido firmados por
servidores de otros dominios, añadiendo un campo <code class="docutils literal notranslate"><span class="pre">Authentication-Results</span></code> que
incorpore el resultado.</p>
</div>
</div>
<div class="section" id="dmarc">
<span id="id5"></span><h2><span class="section-number">7.3.3.5.3. </span><abbr title="Domain Message Authentication Reporting &amp; Conformance">DMARC</abbr><a class="headerlink" href="#dmarc" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="section" id="id6">
<h3><span class="section-number">7.3.3.5.3.1. </span>Concepto<a class="headerlink" href="#id6" title="Enlazar permanentemente con este título">¶</a></h3>
<p><abbr title="Sender Policy Framework">SPF</abbr> incide en la verificación del remitente del sobre y <abbr title="Domain Keys Identified Mail">DKIM</abbr> en la dirección
del mensaje. Ambas verificaciones son independientes y provocan resultados
independientes. <abbr title="Domain Message Authentication Reporting &amp; Conformance">DMARC</abbr> es un mecanismo que analiza los resultados de ambos
métodos y se encarga de dos tareas:</p>
<ol class="arabic simple">
<li><p>En función del resultado, tomar la decisión de aceptar, poner en cuarentena
y rechazar el mensaje.</p></li>
<li><p>Enviar informes a los responsables de los dominios que han implementado
<abbr title="Domain Message Authentication Reporting &amp; Conformance">DMARC</abbr> de las falsificaciones que hayan llegado al servidor procedentes de
sus dominios.</p></li>
</ol>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>La <a class="reference external" href="https://dmarc.org/">página oficial de DMARC</a> tiene una
<a class="reference external" href="https://dmarc.org/overview/">introducción sobre DMARC</a> bastante
elocuente.</p>
</div>
</div>
<div class="section" id="id7">
<h3><span class="section-number">7.3.3.5.3.2. </span>Registro<a class="headerlink" href="#id7" title="Enlazar permanentemente con este título">¶</a></h3>
<p><abbr title="Domain Message Authentication Reporting &amp; Conformance">DMARC</abbr> también exige la publicación de un registro <abbr title="Domain Name Server">DNS</abbr> que informa al
servidor destinatario de:</p>
<ul class="simple">
<li><p>Qué debe hacer con los mensajes que fallan la verificación. Obviamente, el
hecho de que el dueño del dominio indique a se acepten mensajes, no implica
que los servidores destinatarios deban aceptarlo sin más. Lo más probable es
que implementen ulteriores filtros de <em>spam</em> que puntúen negatiamente el
resultado fallido de la comprobación y que en consecuencia, enviando los
mensajes a los buzones de <em>spam</em> de los usuarios.</p></li>
<li><p>Cuál es la dirección a la que deben remitirse los informes.</p></li>
</ul>
<p>Los registros tienes este aspecto:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">_dmarc.mail1.org     IN    TXT   &quot;v=DMARC1; campo1=valor1; ...; campoN=valorN&quot;</span>
</pre></div>
</div>
<p>El primer campo <code class="docutils literal notranslate"><span class="pre">v</span></code> identifica la versión y junto a <code class="docutils literal notranslate"><span class="pre">p</span></code> es el único
obligatorio. Alguno de los campos restantes son:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 56%" />
<col style="width: 34%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Campo</p></th>
<th class="head"><p>Significado</p></th>
<th class="head"><p>Ejemplo</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">p</span></code></p></td>
<td><p>Política a seguir (<em>none</em>, <em>quarantine</em>, <em>reject</em>).</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">p=none</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">rua</span></code></p></td>
<td><p><abbr title="Uniform Resource Identifier">URI</abbr> a la que remitir los informes agregados.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">rua=mailto:dmarc\&#64;mail1.org</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ruf</span></code></p></td>
<td><p><abbr title="Uniform Resource Identifier">URI</abbr> a la que remitir informes individualizados</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">ruf=mailto:forense\&#64;mail1.org</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pct</span></code></p></td>
<td><p>Porcentaje de mensajes al que aplicar <abbr title="Domain Message Authentication Reporting &amp; Conformance">DMARC</abbr>.<a class="footnote-reference brackets" href="#id11" id="id8">2</a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">pct=50</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">aspf</span></code></p></td>
<td><p>Alineamiento <abbr title="Sender Policy Framework">SPF</abbr>. Por defecto, <code class="docutils literal notranslate"><span class="pre">r</span></code>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">aspf=s</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">adkim</span></code></p></td>
<td><p>Alineamiento <abbr title="Domain Keys Identified Mail">DKIM</abbr>. Por defecto, <code class="docutils literal notranslate"><span class="pre">r</span></code>.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">adkim=s</span></code></p></td>
</tr>
</tbody>
</table>
<p>Los alineamientos que refiere la tabla relacionan la dirección que autentica el
mecanismo con la dirección que no autentica (recordemos que hay dos direcciones
que definen el origen del mensaje). El <em class="dfn">alineamiento SPF</em> obliga a que el
dominio de la <em>dirección del mensaje</em> coincida del la del <em>remitente del sobre</em>,
si es estricto (<code class="docutils literal notranslate"><span class="pre">s</span></code>), o a que sea al menos un subdominio, si es relajado
(<code class="docutils literal notranslate"><span class="pre">r</span></code>). Por su parte el <em class="dfn">alineamiento DKIM</em> obliga a que el dominio de la
dirección del <em>remitente del sobre</em> coincida con el de la <em>dirección del
mensaje</em>, si es estricto (<code class="docutils literal notranslate"><span class="pre">s</span></code>); o a que al menos sea un subdominio, si es
relajado (<code class="docutils literal notranslate"><span class="pre">r</span></code>).</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>Para una descripción detallada del registro visite la <a class="reference external" href="http://www.zytrax.com/books/dns/ch9/dmarc.html">descripción
de zytrax.com</a>.</p>
</div>
<p>Un posible registro podría ser el siguiente:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">_dmarc.mail1.org        IN    TXT      &quot;v=DMARC1; p=none; rua=mailto:dmarc@mail1.org&quot;</span>
</pre></div>
</div>
<p>aunque deberíamos hacer que los mensajes dirigidos a la cuenta acabaran en el
buzón de algún usuario real.</p>
</div>
<div class="section" id="id9">
<h3><span class="section-number">7.3.3.5.3.3. </span>Implementación<a class="headerlink" href="#id9" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Es obvio que la implementación exige necesariamente que se hayan implementdo
previamente <a class="reference internal" href="#spf"><span class="std std-ref">SPF</span></a> y <a class="reference internal" href="#dkim"><span class="std std-ref">DKIM</span></a>. Una vez completado lo
anterior podemos:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt install opendmarc
</pre></div>
</div>
<p>En el fichero de configuración podemos modificar algunas líneas:</p>
<div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nb">AuthservID</span> smtp.mail1.org
<span class="c">#RejectFailures true</span>
<span class="nb">Socket</span> local:/var/spool/postfix/var/run/opendmarc.sock
</pre></div>
</div>
<p>La directiva <code class="docutils literal notranslate"><span class="pre">RejectFailures</span></code>, puesta a <em>true</em>, tiene el efecto de rechazar
los mensajes cuya comprobación falla y cuya política <abbr title="Domain Message Authentication Reporting &amp; Conformance">DMARC</abbr> del dominio
prescribe que se rechacen (<code class="docutils literal notranslate"><span class="pre">p=reject</span></code>). Si está comentada o puesta a <em>false</em>,
los mensajes jamás se rechazarán, aunque la política lo prescriba.</p>
<p>Por último, toca configurar <em>postfix</em> para que lo ejecute como <em>milter</em>, tras
<strong class="program">opendkim</strong>:</p>
<div class="highlight-apache notranslate"><div class="highlight"><pre><span></span><span class="nb">milter_default_action</span> = accept
<span class="nb">smtpd_milters</span> = unix:var/run/opendkim.sock, unix:var/run/opendmarc.sock
<span class="nb">non_smtpd_milters</span> = unix:var/run/opendkim.sock, unix:var/run/opendmarc.sock
</pre></div>
</div>
<p>Además, deberemos añadir el usuario <em>postfix</em> al grupo <em>opendmarc</em> para poder
leer y escribir en el socket:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> adduser postfix opendmarc
</pre></div>
</div>
<p class="rubric">Comprobación</p>
<p>Podemos hacer una prueba configurando en un servidor de correo (<em>mail1.org</em>)
<abbr title="Sender Policy Framework">SPF</abbr>, <abbr title="Domain Keys Identified Mail">DKIM</abbr> y <abbr title="Domain Message Authentication Reporting &amp; Conformance">DMARC</abbr> por entero; y para otro (<em>mail2.org</em>) definiendo
únicamente los registros <abbr title="Sender Policy Framework">SPF</abbr> y <abbr title="Domain Message Authentication Reporting &amp; Conformance">DMARC</abbr> en el <abbr title="Domain Name Server">DNS</abbr>. Hecho esto, podemos probar
a enviar desde una tercera máquina un correo en que el remitente sea
aparentemente un usuario del servidor <em>mail2.org</em>. La comprobación <abbr title="Sender Policy Framework">SPF</abbr> debería
fallar y, en consecuencia, <abbr title="Domain Message Authentication Reporting &amp; Conformance">DMARC</abbr> también. Si configuramos que la politica para
<em>mail2.org</em> fuera de rechazo y <code class="docutils literal notranslate"><span class="pre">RejectFailures</span></code> a <em>true</em>, el servidor debería
rechazar el mensaje.</p>
<p class="rubric">Notas al pie</p>
<dl class="footnote brackets">
<dt class="label" id="id10"><span class="brackets"><a class="fn-backref" href="#id2">1</a></span></dt>
<dd><p>Obsérvese que los registros <code class="docutils literal notranslate"><span class="pre">MX</span></code> definen los servidores encargados de
<strong>recibir</strong> mensajes para ese dominio.</p>
</dd>
<dt class="label" id="id11"><span class="brackets"><a class="fn-backref" href="#id8">2</a></span></dt>
<dd><p>Por defecto, se aplica a todos.</p>
</dd>
</dl>
</div>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../../index.html">Tabla de contenido</a></h3>
  <ul>
<li><a class="reference internal" href="#">7.3.3.5. Acreditación del remitente</a><ul>
<li><a class="reference internal" href="#spf">7.3.3.5.1. <abbr title="Sender Policy Framework">SPF</abbr></a><ul>
<li><a class="reference internal" href="#concepto">7.3.3.5.1.1. Concepto</a></li>
<li><a class="reference internal" href="#registro">7.3.3.5.1.2. Registro</a></li>
<li><a class="reference internal" href="#verificacion">7.3.3.5.1.3. Verificación</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dkim">7.3.3.5.2. <abbr title="Domain Keys Identified Mail">DKIM</abbr></a><ul>
<li><a class="reference internal" href="#id4">7.3.3.5.2.1. Concepto</a></li>
<li><a class="reference internal" href="#implementacion">7.3.3.5.2.2. Implementación</a></li>
</ul>
</li>
<li><a class="reference internal" href="#dmarc">7.3.3.5.3. <abbr title="Domain Message Authentication Reporting &amp; Conformance">DMARC</abbr></a><ul>
<li><a class="reference internal" href="#id6">7.3.3.5.3.1. Concepto</a></li>
<li><a class="reference internal" href="#id7">7.3.3.5.3.2. Registro</a></li>
<li><a class="reference internal" href="#id9">7.3.3.5.3.3. Implementación</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Tema anterior</h4>
  <p class="topless"><a href="04-usuarios.html"
                        title="capítulo anterior"><span class="section-number">7.3.3.4. </span>Gestión de usuarios</a></p>
  <h4>Próximo tema</h4>
  <p class="topless"><a href="../03-imap/index.html"
                        title="próximo capítulo"><span class="section-number">7.3.4. </span>Servidor <abbr title="Internet Message Access Protocol">IMAP</abbr></a></p>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/07.serre/03.mail/02-smtp/05-dns.rst.txt"
            rel="nofollow">Mostrar el código</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Búsqueda rápida</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Ir a" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="../03-imap/index.html" title="7.3.4. Servidor IMAP"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="04-usuarios.html" title="7.3.3.4. Gestión de usuarios"
             >anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../index.html" ><span class="section-number">7. </span>Servicios de red</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../index.html" ><span class="section-number">7.3. </span>Correo electrónico</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="index.html" ><span class="section-number">7.3.3. </span>Servidor <abbr title="Simple Mail Transfer Protocol">SMTP</abbr></a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">7.3.3.5. </span>Acreditación del remitente</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Derechos de autor CC BY 4.0, 2016-2021, José Miguel Sánchez Alés.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.5.4.
    </div>
  </body>
</html>