


<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>9.5.2.1. Virtualbox &#8212; documentación de Linuxnomicón - rolling</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/translations.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="index" title="Índice" href="../../genindex.html" />
    <link rel="search" title="Búsqueda" href="../../search.html" />
    <link rel="next" title="9.5.2.2. QEmu - KVM" href="02.kvm.html" />
    <link rel="prev" title="9.5. Virtualización" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="02.kvm.html" title="9.5.2.2. QEmu - KVM"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="index.html" title="9.5. Virtualización"
             accesskey="P">anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" ><span class="section-number">9. </span>Apéndices</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U"><span class="section-number">9.5. </span>Virtualización</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">9.5.2.1. </span>Virtualbox</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="virtualbox">
<span id="id1"></span><h1><span class="section-number">9.5.2.1. </span>Virtualbox<a class="headerlink" href="#virtualbox" title="Enlazar permanentemente con este título">¶</a></h1>
<p><strong class="program">Virtualbox</strong> es un <em>software</em> de virtualización de plataforma con
hipervisor de tipo 2 y aceleración por <em>hardware</em>. Posee una versión liberada
bajo licencia <abbr title="GNU General Public License">GPL</abbr>, lo que posibilita que se encuentre disponible tanto en
<em>Windows</em> como en los repositorios de cualquier distribución de <em>Linux</em>.
Precisamente por esta disponibilidad, es la plataforma de virtualización que
hemos elegido para el curso.</p>
<p>Dispone de una interfaz gráfica bastante intuitiva, por lo que bajo este
epígrafe sólo apuntaremos algunos aspectos que conviene tener claros al
enfrentarnos a la interfaz.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>El epígrafe no pretende ser una guía del uso de
<strong class="program">Virtualbox</strong>, sino una simple enumeración de aspectos que
pueden resultar confusos o insospechables.</p>
</div>
<div class="section" id="tipo-de-maquina">
<h2><span class="section-number">9.5.2.1.1. </span>Tipo de máquina<a class="headerlink" href="#tipo-de-maquina" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Al crear una nueva máquina virtual se puede escoger cuál es la plataforma
(<abbr title="Central Processing Unit">CPU</abbr> + <abbr title="Sistema operativo">SO</abbr>). La elección del sistema operativo es irrelevante y sólo
sirve para que <strong class="program">Virtualbox</strong> escoja el icono con el que identificará
la máquina. En cambio, la <abbr title="Central Processing Unit">CPU</abbr> tiene importancia, ya que si escogemos una de
32 <em>bits</em>, se emulará ésta y, en consecuencia, sólo podremos instalar
software para la plataforma <em>x86</em>.</p>
</div>
<div class="section" id="red">
<h2><span class="section-number">9.5.2.1.2. </span>Red<a class="headerlink" href="#red" title="Enlazar permanentemente con este título">¶</a></h2>
<p><strong class="program">Virtualbox</strong> permite definir hasta cuatro interfaces de red para
una misma máquina virtual. Dependiendo de nuestras intenciones, nos
convendrá configurar cada una de ellas de una manera distinta. Hay varias
posibilidades:</p>
<ul class="simple">
<li><p><strong>Desconectada</strong>: La interfaz de red, existe, pero desconectada.</p></li>
<li><p><strong>Adaptador puente</strong>: La interfaz de red se encuentra en la misma red
que la interfaz real a la que se asocia. Esto nos permite exponer la
máquina en la red como si de una máquina real se tratara.</p></li>
<li><p><strong>NAT</strong>: La máquina virtual se sitúa en una red interna que accede
al exterior a través del propio software de <strong class="program">Virtualbox</strong>, que hace
de router <abbr title="Source NAT">SNAT</abbr> y servidor <abbr title="Dynamic Host Configuration Protocol">DHCP</abbr>. La red interna , por tanto,
es inaccesible desde el exterior o desde otra máquina virtual.</p></li>
<li><p><strong>Red NAT</strong>: Parecida a la anterior, pero se permite indicar el nombre
de la red interna en la que se encuentra la máquina virtual, de modo
que, si al crear una segunda máquina virtual, se configura la red de
esta forma y se escoge el mismo nombre de red, ambas máquinas se
encontrarán dentro de la misma red y podrán comunicarse entre sí.</p></li>
<li><p><strong>Red interna</strong>: Como la anterior, pero <strong class="program">Virtualbox</strong> no
hace ninguna labor de encaminamiento, por lo que la red está totalmente
aislada del exterior. Podemos comunicarla con el exterior, de todos
modos, creando una máquina con dos interfaces de red que haga la labor de
<em>router</em>: una de las interfaces se coloca en la red interna y la otra
en alguna de las modalidades que sí tiene acceso al exterior.</p></li>
<li><p><strong>Adaptador solo anfitrión</strong>: Crea una red constituida exclusivamente
por el anfitrión y los huéspedes.</p></li>
<li><p><strong>Controlador genérico</strong>.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Para virtualizar la tarjeta de red, es mejor escoger como modelo de
<em>hardware</em> «virtio-net», que, en realidad, no virtualiza una tarjeta, sino
que es una solución de paravirtualización. La ventaja de usarlo es el
rendimiento (obvio, si se trata de paravirtualización) y que es el único que
permite arrancar por red si usamos como firmware <abbr title="Unified Extensible Firmware Interface">UEFI</abbr>. Ahora bien, si el
sistema huésped es <em>Windows</em>, no dispondremos de los <em>drivers</em> durante la
instalación y habrá que instalarlos a posteriori desde el <a class="reference external" href="http://www.linux-kvm.org/page/WindowsGuestDrivers">proyecto KVM</a>. El modo más fácil de
instalación es usar la <em>ISO</em> proporcionada en <a class="reference external" href="https://docs.fedoraproject.org/en-US/quick-docs/creating-windows-virtual-machines-using-virtio-drivers/index.html#virtio-win-direct-downloads">este enlace</a>.</p>
</div>
</div>
<div class="section" id="discos">
<h2><span class="section-number">9.5.2.1.3. </span>Discos<a class="headerlink" href="#discos" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Lo habitual es que los discos del sistema huésped sean ficheros del sistema
anfitrión. <strong class="program">Virtualbox</strong> soporta formatos:</p>
<div class="section" id="tipos">
<h3><span class="section-number">9.5.2.1.3.1. </span>Tipos<a class="headerlink" href="#tipos" title="Enlazar permanentemente con este título">¶</a></h3>
<ul class="simple">
<li><p>Su formato nativo denominado <abbr title="Virtual Disk Image">VDI</abbr>.</p></li>
<li><p><abbr title="Virtual Machine DisK">VMDK</abbr>, que es el formato abierto propio de <strong class="program">VMware</strong>.</p></li>
<li><p><abbr title="Virtual Hard DisK">VHD</abbr>, que es el formato que creó <em>Microsoft</em> para su abandonado programa
de virtualización <a class="reference external" href="https://es.wikipedia.org/wiki/Windows_Virtual_PC">Virtual PC</a>.</p></li>
<li><p><em>RAW</em>, que es, simplemente, un fichero que contiene <em>byte</em> a <em>byte</em> el
contenido del disco virtual.</p></li>
</ul>
<p>Lo lógico es usar el formato <abbr title="Virtual Disk Image">VDI</abbr> por ser el nativo, aunque los cuatro
enunciados son suficientemente portables a otros sistemas de virtualización.
Eso sí, al ser el último un formato crudo, su tamaño será siempre igual al
del disco que virtualiza. mientras que los otros tres son capaces de ocupar
en disco sólo el espacio que efectivamente ocupa su contenido<a class="footnote-reference brackets" href="#id3" id="id2">1</a>.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Cambiar el formato de un disco (p.e. para usarlo en otro <em>software</em>
de virtualización distinto) exige utilizar la utilidad
<strong class="program">vboxmanage</strong> de línea de comandos. Por ejemplo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> vboxmanage clonemedium original.vdi destino.vmdk --format VMDK
</pre></div>
</div>
<p>aunque si el original es el formato crudo debe usarse esta otra:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> vboxmanage convertfromraw original.img destino.vdi --format VDI
</pre></div>
</div>
</div>
</div>
<div class="section" id="formato-vdi">
<h3><span class="section-number">9.5.2.1.3.2. </span>Formato <abbr title="Virtual Disk Image">VDI</abbr><a class="headerlink" href="#formato-vdi" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Al utilizar el formato nativo para discos, tendremos acceso a algunas utilidades
muy interesantes:</p>
<ul class="simple">
<li><p>Las <strong>instantáneas</strong>, que permiten guardar el estado de una máquina en un
instante preciso, lo cual posibilita volver a él en el futuro.</p></li>
<li><p>Cambiar el <strong>tipo</strong> de disco, que en principio es «Normal». Uno muy
interesante es «Multiconexión», que permite utilizar un mismo disco como
plantilla para varias máquinas distintas. Esto permite, por ejemplo, instalar
un sistema operativo en un disco (o sea, en un fichero <abbr title="Virtual Disk Image">VDI</abbr>) y una vez
llevada a cabo la instalación pasar el disco a tipo «Multiconexión». De este
modo, esa disco con una instalación básica ya hecha podremos utilizarlo
repetidamente en varias máquinas sin tener que volver a llevar a cabo la
instalación.</p></li>
</ul>
<p>Tanto las instantáneas como los discos derivados de uno <em>multiconexión</em> generan
ficheros <abbr title="Virtual Disk Image">VDI</abbr> enlazados con el <abbr title="Virtual Disk Image">VDI</abbr> del que proceden (la genealogía puede
consultarse en la sección «Administrador de medios virtuales»). Cuando se
quieren mezclar en un sólo fichero <abbr title="Virtual Disk Image">VDI</abbr> varios niveles de ficheros enlazados
basta con:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> vboxmanage clonemedium uuid-larguisimo-del-ultimo-nivel.vdi compacto.vdi --format VDI
</pre></div>
</div>
</div>
</div>
<div class="section" id="arranque">
<h2><span class="section-number">9.5.2.1.4. </span>Arranque<a class="headerlink" href="#arranque" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Por defecto, las máquinas virtuales llevan a cabo, un <a class="reference internal" href="../../05.discos/01.division/02.boot.html#arranque"><span class="std std-ref">arranque BIOS</span></a>. Es posible también virtualizar un arranque <abbr title="Unified Extensible Firmware Interface">UEFI</abbr> marcando en la
sección de configuración relativa a la placa base, la opción correspondiente.</p>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>Marcar la opción <abbr title="Extensible Firmware Interface">EFI</abbr>, tiene consecuencias adicionales: la
secuencia de arranque definida en la interfaz gráfica de
<strong class="program">Virtialbox</strong> dejará de tener efecto y la secuencia vendrá definida
en la propia vertualización del arranque <abbr title="Extensible Firmware Interface">EFI</abbr> al que se puede acceder.
pulsando la tecla <kbd class="kbd docutils literal notranslate">F2</kbd> justamente tras el encendido de la máquina. Lo
habitual es que el último sistema operativo instalado se autodefina como el
sistema arrancado por defecto con lo que puede darse el caso de que tengamos
que recurrir a la tecla para poder arrancar desde cedé.</p>
</div>
</div>
<div class="section" id="anadidos-al-huesped">
<h2><span class="section-number">9.5.2.1.5. </span>Añadidos al huésped<a class="headerlink" href="#anadidos-al-huesped" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La primera operación tras la instalación del sistema huésped, debe ser la
instalación de las «<em>guest additions</em>» disponibles como imagen <em>ISO</em> a través
de la entrada «Dispositivos» del menú superior de la aplicación.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Si instalamos estos añadidos en los ajustes de la máquina
(<code class="docutils literal notranslate"><span class="pre">General&gt;Advanced</span></code>) fijamos el portapapeles compartido como bidireccional,
podremos copiar y pegar con el ratón entre el huésped y el anfitrión.</p>
</div>
</div>
<div class="section" id="exportacion-de-maquinas">
<h2><span class="section-number">9.5.2.1.6. </span>Exportación de máquinas<a class="headerlink" href="#exportacion-de-maquinas" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Para facilitar entre sistemas anfitriones la definición de máquinas virtuales
completas (y no sólo de sus discos virtuales), existe el formato <abbr title="Open Virtual Appliance">OVA</abbr>. Lo forma
más sencillas de copiar una máquina para trasladarla a otro ordenador y volver a
seguir trabajando con ella es exportarla a un fichero <abbr title="Open Virtual Appliance">OVA</abbr> en el ordenador de
origen e importarla en el destino desde el fichero.</p>
<p class="rubric">Notas al pie</p>
<dl class="footnote brackets">
<dt class="label" id="id3"><span class="brackets"><a class="fn-backref" href="#id2">1</a></span></dt>
<dd><p>Esto no es exactamente cierto, ya que el fichero también necesitará
contener su metainformación y su tamaño reflejará espacio antiguamente
ocupado, aunque se haya liberado luego.</p>
</dd>
</dl>
</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Tabla de contenido</a></h3>
  <ul>
<li><a class="reference internal" href="#">9.5.2.1. Virtualbox</a><ul>
<li><a class="reference internal" href="#tipo-de-maquina">9.5.2.1.1. Tipo de máquina</a></li>
<li><a class="reference internal" href="#red">9.5.2.1.2. Red</a></li>
<li><a class="reference internal" href="#discos">9.5.2.1.3. Discos</a><ul>
<li><a class="reference internal" href="#tipos">9.5.2.1.3.1. Tipos</a></li>
<li><a class="reference internal" href="#formato-vdi">9.5.2.1.3.2. Formato <abbr title="Virtual Disk Image">VDI</abbr></a></li>
</ul>
</li>
<li><a class="reference internal" href="#arranque">9.5.2.1.4. Arranque</a></li>
<li><a class="reference internal" href="#anadidos-al-huesped">9.5.2.1.5. Añadidos al huésped</a></li>
<li><a class="reference internal" href="#exportacion-de-maquinas">9.5.2.1.6. Exportación de máquinas</a></li>
</ul>
</li>
</ul>

  <h4>Tema anterior</h4>
  <p class="topless"><a href="index.html"
                        title="capítulo anterior"><span class="section-number">9.5. </span>Virtualización</a></p>
  <h4>Próximo tema</h4>
  <p class="topless"><a href="02.kvm.html"
                        title="próximo capítulo"><span class="section-number">9.5.2.2. </span>QEmu - <abbr title="Kernel-based Virtual Machine">KVM</abbr></a></p>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/09.apendice/99.virtual/01.virtualbox.rst.txt"
            rel="nofollow">Mostrar el código</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Búsqueda rápida</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Ir a" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="02.kvm.html" title="9.5.2.2. QEmu - KVM"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="index.html" title="9.5. Virtualización"
             >anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" ><span class="section-number">9. </span>Apéndices</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" ><span class="section-number">9.5. </span>Virtualización</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">9.5.2.1. </span>Virtualbox</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Derechos de autor CC BY 4.0, 2016-2020, José Miguel Sánchez Alés.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.3.1.
    </div>
  </body>
</html>