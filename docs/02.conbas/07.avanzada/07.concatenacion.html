


<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>2.4.1. Concatenación de órdenes &#8212; documentación de Linuxnomicón - rolling</title>
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/translations.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="index" title="Índice" href="../../genindex.html" />
    <link rel="search" title="Búsqueda" href="../../search.html" />
    <link rel="next" title="2.4.2. Interpretaciones en línea" href="08.interpretaciones.html" />
    <link rel="prev" title="2.4. Órdenes avanzadas" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="08.interpretaciones.html" title="2.4.2. Interpretaciones en línea"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="index.html" title="2.4. Órdenes avanzadas"
             accesskey="P">anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" ><span class="section-number">2. </span>Conceptos básicos</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U"><span class="section-number">2.4. </span>Órdenes avanzadas</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2.4.1. </span>Concatenación de órdenes</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="concatenacion-de-ordenes">
<span id="sh-concat"></span><h1><span class="section-number">2.4.1. </span>Concatenación de órdenes<a class="headerlink" href="#concatenacion-de-ordenes" title="Enlazar permanentemente con este título">¶</a></h1>
<p>Aunque lo habitual es escribir una orden en cada línea, en ocasiones resulta
conveniente incluir más de una. El modo más sencillo de llevar a cabo esta
concatenación de órdenes es mediante el carácter de punto y coma (<code class="docutils literal notranslate"><span class="pre">;</span></code>):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">echo</span> <span class="s2">&quot;Esto se ejecuta primero&quot;</span> <span class="p">;</span> <span class="nb">echo</span> <span class="s2">&quot;Esto se ejecuta después&quot;</span>
<span class="go">Esto se ejecuta primero</span>
<span class="go">Esto se ejecuta después</span>
</pre></div>
</div>
<p>La ejecución de las órdenes es equivalente a si las hubiéramos escrito en
líneas separadas: primero se ejecuta una y, en cuanto acabe y con independencia
si ha tenido éxito o ha fallado, se ejecuta la segunda. La única diferencia
desde el punto de vista del usuario es que no tendrá que esperar la terminación
de la primera orden para poder teclear la segunda. Por ejemplo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> sleep 1h <span class="p">;</span> <span class="nb">echo</span> <span class="s2">&quot;Me he tomado un buen descanso&quot;</span>
</pre></div>
</div>
<p>Es posible también que se quiera hacer lo contrario, esto es, escribir en dos
líneas un mismo comando porque este, por ejemplo, sea demasiado largo. En ese
caso, lo que se hace es <em>escapar</em> el cambio de línea:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> adduser pepe --gecos <span class="s2">&quot;Pepe Martinez&quot;</span> <span class="se">\</span>
               --shell /bin/sh
</pre></div>
</div>
<span class="target" id="sleep"></span><dl id="index-0">
<dt><strong class="command">sleep</strong></dt><dd><p><strong class="command">sleep</strong> es un comando que hace que el sistema espere un determinado
tiempo expresado en el argumento como segundos (sufijo <code class="docutils literal notranslate"><span class="pre">s</span></code>), minutos
(sufijo <code class="docutils literal notranslate"><span class="pre">m</span></code>), horas (sufijo <code class="docutils literal notranslate"><span class="pre">h</span></code>) o días (sufijo <code class="docutils literal notranslate"><span class="pre">d</span></code>). Si no se incluye
sufijo, se sobrentenderá segundos. Así pues, la línea de órdenes de arriba
esperará una hora y a continuación escribirá la frase. Nosotros podemos
desentendernos sin más. Por el contrario, si hubiéramos usado dos líneas:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> sleep 1h
<span class="gp">$</span> <span class="nb">echo</span> <span class="s2">&quot;Me he tomado un buen descanso&quot;</span>
</pre></div>
</div>
<p>Deberíamos estar atentos a la pantalla del ordenador, para que en cuanto se
completase la hora, escribiéramos el segundo comando.</p>
</dd>
</dl>
<p>Otro modo de concatenar órdenes es mediante los operadores <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code> (<em>and</em> lógico)
y <code class="docutils literal notranslate"><span class="pre">||</span></code> (<em>o</em> lógico). El primer operador ejecutará la segunda orden sólo si la
primera tuvo éxito, mientras que el segundo la ejecutará sólo si no la tuvo.</p>
<p>Para ilustrarlo introduzcamos antes dos comandos más:</p>
<span class="target" id="false"></span><dl class="simple" id="index-1">
<dt><strong class="command">false</strong></dt><dd><p>No produce ningún efecto salvo fallar. Esto se traduce en que el programa
devuelve a la <em>shell</em> un valor distinto de 0 (véase la variable <a class="reference internal" href="08.interpretaciones.html#id6"><span class="std std-ref">$?</span></a>).</p>
</dd>
</dl>
<span class="target" id="true"></span><dl class="simple" id="index-2">
<dt><strong class="command">true</strong></dt><dd><p>No produce otro efecto que tener éxito, lo que se traduce en que devuelve a
la <em>shell</em> el valor 0.</p>
</dd>
</dl>
<p>Sabido esto:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">true</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&quot;Éxito&quot;</span>
<span class="go">Éxito</span>
<span class="gp">$</span> <span class="nb">true</span> <span class="o">||</span> <span class="nb">echo</span> <span class="s2">&quot;Éxito&quot;</span>
</pre></div>
</div>
<p>La primera línea imprime la palabra, pero la segunda, no. Del mismo modo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">false</span> <span class="o">||</span> <span class="nb">echo</span> <span class="s2">&quot;Fracaso&quot;</span>
<span class="go">Fracaso</span>
<span class="gp">$</span> <span class="nb">false</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&quot;Fracaso&quot;</span>
</pre></div>
</div>
<p>Si en una misma línea aparecen varios comandos separados por operadores de
concatenación, debe tenerse en cuenta que se evalúa de izquierda a
derecha y que tienen más precedencia <code class="docutils literal notranslate"><span class="pre">&amp;&amp;</span></code> y <code class="docutils literal notranslate"><span class="pre">||</span></code>, y menos <code class="docutils literal notranslate"><span class="pre">;</span></code><a class="footnote-reference brackets" href="#id3" id="id1">1</a>.</p>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>A diferencia de la mayoría de lenguajes de programación e incluso del propio
<strong class="program">bash</strong> en otras situaciones como el comando interno <a class="reference internal" href="../../03.scripts/03.control.html#test"><span class="std std-ref">test</span></a>,
ambos operadores tienen la misma precedencia por lo que para evaluar una
línea en la que haya concatenados varios comandos a través de estos dos
operadores se sigue la regla de evaluar de izquierda a derecha. Por ese
motivo, esta línea:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">true</span> <span class="o">||</span> <span class="nb">echo</span> <span class="s2">&quot;Uno&quot;</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&quot;Dos&quot;</span>
<span class="go">Dos</span>
</pre></div>
</div>
<p>Imprime la palabra en vez de no hacer nada, como se esperaría si tuviera más
precedencia el operador <em>and</em>.</p>
</div>
<p id="agrupamiento-ordenes">Y dado que existe una regla general para saber el orden en que se realizan las
operaciones, también debe existir una forma de alterar tal orden, del mismo modo
que en matemáticas existen los paréntesis que permiten realizar antes una suma
que una multiplicación.</p>
<p>En <strong class="program">bash</strong> pueden usarse también los paréntesis:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">true</span> <span class="o">||</span> <span class="o">(</span> <span class="nb">echo</span> <span class="s2">&quot;Uno&quot;</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&quot;Dos&quot;</span> <span class="o">)</span>
</pre></div>
</div>
<p>pero usar paréntesis implica que el contenido se ejecuta en una <em>subshell</em>, no
en la <em>shell</em> principal<a class="footnote-reference brackets" href="#id4" id="id2">2</a>. Para que todos los comandos se ejecuten en la
misma <em>shell</em> deben usarse para agrupar las llaves:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">true</span> <span class="o">||</span> <span class="o">{</span> <span class="nb">echo</span> <span class="s2">&quot;Uno&quot;</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">&quot;Dos&quot;</span><span class="p">;</span> <span class="o">}</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>Deben separarse las llaves de su contenido y acabar la concatenación de
órdenes con un punto y coma.</p>
</div>
<p class="rubric">Notas al pie</p>
<dl class="footnote brackets">
<dt class="label" id="id3"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Falta como operador de concatenación la <a class="reference internal" href="../08.redirecciones/01basica.html#pipeline"><span class="std std-ref">tubería</span></a>
(<code class="docutils literal notranslate"><span class="pre">|</span></code>), que tiene más precedencia que todos ellos.</p>
</dd>
<dt class="label" id="id4"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p>Para certificarlo no hay más que preguntar por el <a class="reference internal" href="../09.admbasica/09.procesos.html#pid"><span class="std std-ref">PID</span></a> de la shell:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">echo</span> <span class="nv">$BASHPID</span> <span class="p">;</span> <span class="o">(</span> <span class="nb">echo</span> <span class="nv">$BASHPID</span> <span class="o">)</span>
<span class="go">25933</span>
<span class="go">26002</span>
</pre></div>
</div>
<p>Y se obtendrán valores distintos, porque ambas shell son distintas.
En cambio, con las llaves:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">echo</span> <span class="nv">$BASHPID</span> <span class="p">;</span> <span class="o">{</span> <span class="nb">echo</span> <span class="nv">$BASHPID</span><span class="p">;</span> <span class="o">}</span>
<span class="go">25933</span>
<span class="go">25933</span>
</pre></div>
</div>
</dd>
</dl>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Tema anterior</h4>
  <p class="topless"><a href="index.html"
                        title="capítulo anterior"><span class="section-number">2.4. </span>Órdenes avanzadas</a></p>
  <h4>Próximo tema</h4>
  <p class="topless"><a href="08.interpretaciones.html"
                        title="próximo capítulo"><span class="section-number">2.4.2. </span>Interpretaciones en línea</a></p>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/02.conbas/07.avanzada/07.concatenacion.rst.txt"
            rel="nofollow">Mostrar el código</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Búsqueda rápida</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Ir a" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="08.interpretaciones.html" title="2.4.2. Interpretaciones en línea"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="index.html" title="2.4. Órdenes avanzadas"
             >anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" ><span class="section-number">2. </span>Conceptos básicos</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" ><span class="section-number">2.4. </span>Órdenes avanzadas</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2.4.1. </span>Concatenación de órdenes</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Derechos de autor CC BY 4.0, 2016-2020, José Miguel Sánchez Alés.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.2.1.
    </div>
  </body>
</html>