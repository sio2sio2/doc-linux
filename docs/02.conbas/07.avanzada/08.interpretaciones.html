


<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>2.5.2. Interpretaciones en línea &#8212; documentación de Linuxnomicón - rolling</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/classic.css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/translations.js"></script>
    
    <link rel="index" title="Índice" href="../../genindex.html" />
    <link rel="search" title="Búsqueda" href="../../search.html" />
    <link rel="next" title="2.6. Redirección de E/S" href="../08.redirecciones/index.html" />
    <link rel="prev" title="2.5.1. Concatenación de órdenes" href="07.concatenacion.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="../08.redirecciones/index.html" title="2.6. Redirección de E/S"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="07.concatenacion.html" title="2.5.1. Concatenación de órdenes"
             accesskey="P">anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" ><span class="section-number">2. </span>Conceptos básicos</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U"><span class="section-number">2.5. </span>Órdenes avanzadas</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2.5.2. </span>Interpretaciones en línea</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="interpretaciones-en-linea">
<span id="sh-interp-cl"></span><h1><span class="section-number">2.5.2. </span>Interpretaciones en línea<a class="headerlink" href="#interpretaciones-en-linea" title="Enlazar permanentemente con este título">¶</a></h1>
<p>La labor del intérprete de comandos no se limita a proporcionar el medio para
que podamos ejecutar una orden pasando los argumentos adecuados. Antes de ello,
el intérprete analiza la línea y realiza (o no) una serie de transformaciones.</p>
<p>El objetivo de este epígrafe es describir cuáles son las interpretaciones y
sustituciones que hace la <em>shell</em> antes de pasar definitivamente los argumentos
al comando invocado.</p>
<p id="sh-no-subs">No obstante, antes de empezar es conveniente saber cómo se puede evitar que
<em>bash</em> <strong>no</strong> interprete un carácter especial, permitiendo así pasárselo
literalmente a la orden. Hay tres métodos, que llamaremos de protección, porque
protegen al carácter de ser interpretado por <strong class="program">bash</strong>:</p>
<ol class="arabic">
<li><p>Escapar el carácter, que consiste en precederlo de la barra invertida
(<code class="docutils literal notranslate"><span class="pre">\</span></code>). Por ejemplo, la exclamación (<code class="docutils literal notranslate"><span class="pre">!</span></code>) tiene un significado especial,
sin embargo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">echo</span> <span class="se">\!</span>
<span class="go">!</span>
</pre></div>
</div>
<p>Si se escapa no se hará interpretación alguna.</p>
</li>
<li><p>Encerrar el carácter (o la expresión en la que se encuentra tal carácter)
dentro de comillas dobles:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">echo</span> <span class="s2">&quot;*&quot;</span>
<span class="go">*</span>
</pre></div>
</div>
</li>
<li><p>Encerrar el carácter (o la expresión en la que se encuentra tal carácter)
dentro de comillas simples:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">echo</span> <span class="s1">&#39;!&#39;</span>
<span class="go">!</span>
</pre></div>
</div>
</li>
</ol>
<p>No obstante, estos tres métodos no son equivalentes, y hay interpretaciones que
dejan de hacerse usando algún método, pero no otro. En cada caso, particular
indicaremos qué métodos son efectivos.</p>
<section id="espaciado">
<span id="sh-espacio"></span><h2><span class="section-number">2.5.2.1. </span>Espaciado<a class="headerlink" href="#espaciado" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Los caracteres de espaciado (el espacio normalmente, pero también la tabulación<a class="footnote-reference brackets" href="#id10" id="id1">1</a>) sirven a <strong class="program">bash</strong> para separar argumentos. Por ese motivo la
orden:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> cat x y
</pre></div>
</div>
<p>Le pasa a <strong class="command">cat</strong> el argumento <em>x</em> y el argumento <em>y</em>. Para el caso de
estos caracteres de espaciado cualquiera de los tres métodos de protección sirve
para impedir la interpretación. Por tanto:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> cat x<span class="se">\ </span>y
</pre></div>
</div>
<p>Intentará mostrar el contenido de un único fichero llamado «<em>x y</em>«.</p>
</section>
<section id="historial">
<span id="bash-historial"></span><h2><span class="section-number">2.5.2.2. </span>Historial<a class="headerlink" href="#historial" title="Enlazar permanentemente con este título">¶</a></h2>
<p><strong class="program">bash</strong> almacena las ordenes que vamos introduciendo en la línea de
comandos a fin de poder recuperarlas posteriormente.</p>
<span class="target" id="history"></span><dl id="index-0">
<dt><strong class="command">history</strong></dt><dd><p>Muestra el historial de comandos:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">history</span>
</pre></div>
</div>
</dd>
</dl>
<p>La manera más sencilla de recuperar instrucciones anteriores es usar la flecha
<em>arriba</em>. Sin embargo, hay otros mecanismos que usan el carácter especial de
exclamación (<code class="docutils literal notranslate"><span class="pre">!</span></code>). Los más habituales son los siguientes:</p>
<ol class="arabic">
<li><p>Volver a ejecutar la última orden:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> !!
</pre></div>
</div>
</li>
<li><p>Ejecutar la orden 25º (<strong class="command">history</strong> muestra los comandos numerados):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> !25
</pre></div>
</div>
</li>
<li><p>Ejecutar la penúltima orden (o sea, la segunda empezando por el final):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> !-2
</pre></div>
</div>
</li>
<li><p>Ejecutar la última orden que empezaba por <em>se</em>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> !se
</pre></div>
</div>
</li>
</ol>
<p>Las expresiones anteriores ejecutan las órdenes completas, pero se pueden añadir
dos puntos y, a continuación, expresar cuáles son los argumentos que se quieren
repetir (el argumento <strong>0</strong> es el nombre del comando). Supongamos que ejecutamos
lo siguiente:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> cat fichero1 fichero2 fichero3
</pre></div>
</div>
<p>Ahora analicemos las posibilidades:</p>
<ol class="arabic">
<li><p>Un único número indica que se quiere repetir ese argumento:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> more !!:1
</pre></div>
</div>
<p>Esto equivale a <code class="code docutils literal notranslate"><span class="pre">more</span> <span class="pre">fichero1</span></code>.</p>
</li>
<li><p>Un rango de números <em>x-y</em> indica que se quiere repetir desde el argumento
<em>x</em> al argumento <em>y</em>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> !!:0-2
</pre></div>
</div>
<p>equivale a <code class="code docutils literal notranslate"><span class="pre">cat</span> <span class="pre">fichero1</span> <span class="pre">fichero2</span></code>.</p>
</li>
<li><p>Un rango de números <em>x-</em> indica que se quiere repetir desde el argumento
<em>x</em> hasta el último:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> cat !!:2-
</pre></div>
</div>
<p>equivale a <code class="code docutils literal notranslate"><span class="pre">cat</span> <span class="pre">fichero2</span> <span class="pre">fichero3</span></code></p>
</li>
<li><p>Un rango de números <em>-x</em> indica que se quiere repetir hasta el argumento
<em>x</em>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> !!:-2
</pre></div>
</div>
<p>equivale a <code class="code docutils literal notranslate"><span class="pre">cat</span> <span class="pre">fichero1</span> <span class="pre">fichero2</span></code>.</p>
</li>
</ol>
<p>Para proteger la exclamación se puede tanto escapar como incluirla dentro de
comillas simples, pero no dobles.</p>
</section>
<section id="comodines">
<span id="id2"></span><h2><span class="section-number">2.5.2.3. </span>Comodines<a class="headerlink" href="#comodines" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Los comodines permiten hacer sustituciones a partir del nombre de los ficheros.
Los tres métodos de protección impiden que bash los interprete. Son tres:</p>
<dl>
<dt><strong>?</strong></dt><dd><p>Representa cualquier carácter. Por ejemplo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ls -d /s??
<span class="go">/srv /sys</span>
</pre></div>
</div>
<p>En el directorio raíz sólo hay dos ficheros (directorios en este caso) que
empiecen por <em>s</em> y que tengan dos caracteres más. Consecuentemente, eso es lo
que obtenemos.</p>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>Es muy importante tener presente que las interpretaciones las hace
<strong class="program">bash</strong>, no el comando (en este caso <strong class="command">ls</strong>). En el caso del
ejemplo, <strong class="command">ls</strong> ve tres argumentos: la opción <code class="docutils literal notranslate"><span class="pre">-d</span></code> el directorio
<code class="docutils literal notranslate"><span class="pre">/srv</span></code> y el directorio <code class="docutils literal notranslate"><span class="pre">/sys</span></code> sin tener conciencia de que realmente no
se llegó a escribir esto.</p>
</div>
</dd>
<dt><strong>*</strong></dt><dd><p>Representa cero o más caracteres. Por ejemplo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">echo</span> /s*
<span class="go">/sbin  /srv  /sys</span>
</pre></div>
</div>
<p>En este caso, dado que puede haber cualquier cantidad de caracteres, también
<code class="docutils literal notranslate"><span class="pre">/sbin</span></code> cumple con el patrón.</p>
</dd>
<dt><strong>[…]</strong></dt><dd><p>Permite indicar un conjunto de caracteres, uno de los cuales puede
encontrarse en el nombre del fichero:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ls -d /s<span class="o">[</span>by<span class="o">]</span>*
<span class="go">/sbin /sys</span>
</pre></div>
</div>
<p>En este caso no aparece <code class="docutils literal notranslate"><span class="pre">/srv</span></code> porque el segundo carácter sólo puede ser
una <em>b</em> o una <em>y</em>. Si a la relación de caracteres se antepone un <code class="docutils literal notranslate"><span class="pre">^</span></code>,
entonces la expresión significa cualquier carácter que no sea uno de los
indicados en ella:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ls -d /s<span class="o">[</span>^by<span class="o">]</span>*
<span class="go">/srv</span>
</pre></div>
</div>
<p>Se admite también la forma <code class="docutils literal notranslate"><span class="pre">[b-e]</span></code> para indicar que son válidos todos los
caracteres entre la b y la e, esto es, <em>b</em>, <em>c</em>, <em>d</em> y <em>e</em>.</p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Cuando no hay ficheros que concuerden en absoluto con la expresión que usa
comodines, <em>bash</em> no realiza ninguna interpretación<a class="footnote-reference brackets" href="#id11" id="id3">2</a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ls /?
<span class="go">ls: no se puede acceder a &#39;/?&#39;: No existe el fichero o el directorio</span>
</pre></div>
</div>
<p>Como no hay ningún fichero en el directorio raíz que sólo contenga una letra,
<em>bash</em> pasa el argumento sin interpretar, razón por la que (como se puede
observar en el mensaje de error) <strong class="command">ls</strong> ve la cadena <code class="docutils literal notranslate"><span class="pre">/?</span></code>.</p>
</div>
</section>
<section id="expandibles">
<span id="sh-expandibles"></span><h2><span class="section-number">2.5.2.4. </span>Expandibles<a class="headerlink" href="#expandibles" title="Enlazar permanentemente con este título">¶</a></h2>
<p>También existe en <strong class="program">bash</strong> (pero no en <strong class="program">dash</strong>) la llamada
<em>expansión con llaves</em> que opera de la siguiente forma:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">echo</span> pre<span class="o">{</span><span class="m">11</span>,22,33<span class="o">}</span>su
<span class="go">pre11su pre22su pre33su</span>
</pre></div>
</div>
<p>es decir, se forman todas las cadenas resultantes de juntar el prefijo (en este
caso, <em>pre</em>) con cada uno de los miembros de la expresión encerrada entre llaves
y con el sufijo (en el ejemplo, <em>su</em>). Tanto el prefijo como el sufijo son
opcionales. A diferencia de la expansión con corchetes, en este caso, las
cadenas no están asociadas a nombres de ficheros con lo que la expansión se
producirá siempre.</p>
<p>Otra <em>expansión con llaves</em> se expresa con dos caracteres separados por dos
puntos:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">echo</span> <span class="o">{</span>X..b<span class="o">}</span>
<span class="go">X Y Z [  ] ^ _ ` a b</span>
</pre></div>
</div>
<p>En este caso, la expresión se expande a todos los caracteres ascii que hay entre
el primero y el segundo. También puede indicarse un paso:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">echo</span> <span class="o">{</span>X..b..2<span class="o">}</span>
<span class="go">X Z  ^ ` b</span>
</pre></div>
</div>
<p>Con lo que <strong class="program">bash</strong> expandirá, pero saltando de 2 en 2. Si en vez de
caracteres se usan números, <strong class="program">bash</strong> expandirá a todos los números que
haya entre uno y otro (también se puede indicar un paso):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">echo</span> <span class="o">{</span><span class="m">1</span>..12<span class="o">}</span>
<span class="go">1 2 3 4 5 6 7 8 9 10 11 12</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Una vez que bash realiza la expansión con llaves, vuelve a probar si las
cadenas resultantes son interpretables o no, sea con una nueva expansión con
llaves o con cualquier otro tipo de expansión. Por ejemplo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ls -d /<span class="o">{</span>s*,li*<span class="o">}</span>
<span class="go">/lib  /lib64  /sbin  /srv  /sys</span>
</pre></div>
</div>
</div>
<p>Como en el caso de los comodines, los tres métodos de protección son efectivos.</p>
</section>
<section id="expansiones-extendidas">
<h2><span class="section-number">2.5.2.5. </span>Expansiones extendidas<a class="headerlink" href="#expansiones-extendidas" title="Enlazar permanentemente con este título">¶</a></h2>
<p><strong class="program">bash</strong> (y sólo <strong class="program">bash</strong>) realiza también las <em>expansiones
extendidas</em> cuando está habilitada la opción <code class="docutils literal notranslate"><span class="pre">extglob</span></code> (que lo está por
defecto):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">shopt</span> extglob
<span class="go">extglob         on</span>
</pre></div>
</div>
<p>Esto posibilita la expresión de varios patrones para expandir rutas:</p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">?(lista-patrones)</span></code></dt><dd><p>La ruta contiene los patrones una o ninguna vez:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ls *?<span class="o">(</span>.tar<span class="o">)</span>.gz
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">+(lista-patrones)</span></code></dt><dd><p>La ruta contiene los patrones una o más veces:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ls *<span class="o">([</span>aeiou<span class="o">])</span>.txt  <span class="c1"># El nombre sólo contiene vocales.</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">*(lista-patrones)</span></code></dt><dd><p>La ruta contiene los patrones ninguna o más veces.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">&#64;(lista-patrones)</span></code></dt><dd><p>La ruta contiene uno de los patrones:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ls *.@<span class="o">(</span>jpg<span class="p">|</span>png<span class="o">)</span>
</pre></div>
</div>
<p>Cuando se facilita más de un patrón, se separan con una tubería «<em>|</em>»
(también en los restantes casos, aunque el ejemplo no lo refleje).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">!(lista-patrones)</span></code></dt><dd><p>La ruta no contiene ninguno de los patrones:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ls !<span class="o">(</span>*.jpg<span class="o">)</span>  <span class="c1"># Ficheros que no acaban en jpg.</span>
</pre></div>
</div>
</dd>
</dl>
</section>
<section id="subshells">
<span id="subshell"></span><h2><span class="section-number">2.5.2.6. </span><em>Subshells</em><a class="headerlink" href="#subshells" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Ya se ha dicho que en <strong class="program">bash</strong> <a class="reference internal" href="07.concatenacion.html#agrupamiento-ordenes"><span class="std std-ref">los paréntesis generan una subshell</span></a> en la que se ejecutan las órdenes encerradas dentro.
Ahora bien, si a los paréntesis se antepone el símbolo del dólar, entonces
:program:` sustituirá la expresión entre paréntesis por la salida en pantalla
que genera. Para entender esto, supongamos que tenemos un usuario <em>pepe</em>, que
pertenece a una serie de grupos; y queremos crear un usuario <em>llamado</em> maría que
queremos que pertenezca también a esos mismos grupos. Ya sabemos cómo obtener la
lista de grupos a los que pertenece <em>pepe</em>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> id -Gn pepe
<span class="go">pepe audio video plugdev lpadmin</span>
</pre></div>
</div>
<p>Por tanto, la creación de <em>maria</em> consistiría en lo siguiente:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> adduser maria
<span class="go">[...]</span>
<span class="gp">$</span> usermod maria -aG pepe,audio,video,plugdev,lpadmin
</pre></div>
</div>
<p>Lo cual implica el engorro de tener que ir copiando lo que nos indicó el primer
comando <strong class="command">id</strong>. Ahora bien, más adelante aprenderemos que podemos
modificar la salida que obtenemos:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> id -Gn pepe <span class="p">|</span> tr <span class="s1">&#39; &#39;</span> <span class="s1">&#39;,&#39;</span>
<span class="go">pepe,audio,video,plugdev,lpadmin</span>
</pre></div>
</div>
<p>Y esta es justamente lo que necesitamos como argumento de <code class="docutils literal notranslate"><span class="pre">-G</span></code>. Como hemos
dicho que anteponer un dólar a la expresión de la subshell, sustituye ésta por
su salida, resulta que el <strong class="command">usermod</strong> podemos hacerlo del siguiente
modo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">·$ usermod maria -aG $(id -Gn pepe | tr &#39; &#39; &#39;,&#39;)</span>
</pre></div>
</div>
<p>sin necesidad de estar copiando y pegando.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>La expresión <code class="code docutils literal notranslate"><span class="pre">$(...)</span></code> también puede expresarse con apóstrofes
invertidos:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span>  usermod maria -aG <span class="sb">`</span>id -Gn pepe <span class="p">|</span> tr <span class="s1">&#39; &#39;</span> <span class="s1">&#39;,&#39;</span><span class="sb">`</span>
</pre></div>
</div>
</div>
<p>Sólo la comillas dobles no son efectivas para proteger esta interpretación.
Téngase en cuenta que si se quiere proteger con el símbolo de escapa, se deben
proteger el dólar y los paréntesis de apertura y cierre, o sea, <kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">\$\(id</kbd>
<kbd class="kbd docutils literal notranslate">...</kbd> <kbd class="kbd docutils literal notranslate">\)</kbd></kbd>.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>En <strong class="command">bash</strong> la expresión <kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">$(cat</kbd> <kbd class="kbd docutils literal notranslate">fichero)</kbd></kbd> puede sustituirse por
<kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">$(&lt;</kbd> <kbd class="kbd docutils literal notranslate">fichero)</kbd></kbd>.</p>
</div>
</section>
<section id="variables">
<span id="id4"></span><h2><span class="section-number">2.5.2.7. </span>Variables<a class="headerlink" href="#variables" title="Enlazar permanentemente con este título">¶</a></h2>
<p>El entorno que proporciona la <em>shell</em> tiene definidas una serie de variables que
rigen el comportamiento de algunos aspectos del intérprete de comandos. También
pueden definirse variables propias, pero esto cobra sentido más bien cuando
escribimos nuestros propios <em>scripts</em> y no cuando usamos de forma interactiva el
sistema.</p>
<span class="target" id="set"></span><dl id="index-1">
<dt><strong class="command">set</strong></dt><dd><p>Usado sin argumentos, lista las variables definidas:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">set</span>
<span class="go">[... Listado de variables y funciones ...]</span>
</pre></div>
</div>
<p>Cuando sepamos que es una <a class="reference internal" href="../08.redirecciones/01basica.html#pipeline"><span class="std std-ref">tubería</span></a> sabremos cómo poder
inspeccionar mejor la salida de este comando. En realidad, <strong class="command">set</strong>
permite hacer más cosas si se le añaden argumentos. Por ejemplo, esto hace que
<strong class="program">bash</strong> nos informe de la orden que está ejecutando:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">set</span> -v
<span class="gp">$</span> ls -w80 /
<span class="go">ls -w80 /</span>
<span class="go">bin   home            lib64       opt   sbin  usr</span>
<span class="go">boot  initrd.img      lost+found  proc  srv   var</span>
<span class="go">dev   initrd.img.old  media       root  sys   vmlinuz</span>
<span class="go">etc   lib             mnt         run   tmp   vmlinuz.old</span>
</pre></div>
</div>
<p>Lo cual no tiene mucho interés en el entorno interactivo. pero puede ser útil si
estamos depurando un <em>script</em> y queremos saber con qué orden falla. Para
deshacer el cambio basta con hacer <kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">set</kbd> <kbd class="kbd docutils literal notranslate"></kbd>+<kbd class="kbd docutils literal notranslate">v</kbd></kbd>.</p>
<p>Hay otras muchas opciones (<code class="docutils literal notranslate"><span class="pre">-f</span></code>, por ejemplo, deshabilita comodines y
expansiones) que pueden verse en la página de manual de <strong class="program">bash</strong> (o
mejor, de <em>builtins</em>), ya que <strong class="command">set</strong>  es un comando interno.</p>
</dd>
</dl>
<span class="target" id="env"></span><dl id="index-2">
<dt><strong class="command">env</strong></dt><dd><p>Sin argumentos, lista las variables de entorno definidas. Las <em>variables de
entorno</em> son aquellas heredables por un  hijo del proceso actual. Por
ejemplo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> sh -c <span class="s1">&#39;echo valor=$HOME&#39;</span>
<span class="go">valor=/home/usuario</span>
<span class="gp">$</span> <span class="nv">aa</span><span class="o">=</span><span class="s2">&quot;No soy de entorno&quot;</span>
<span class="gp">$</span> sh -c <span class="s1">&#39;echo valor=$aa&#39;</span>
<span class="go">valor=</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">HOME</span></code> es una variable de entorno. Por tanto, si se pregunta por su valor
en una <em>shell</em> hija, también existirá. En cambio, <code class="docutils literal notranslate"><span class="pre">aa</span></code> es una variable que
definimos en la <em>shell</em> actual, pero no es de ambiente<a class="footnote-reference brackets" href="#id12" id="id5">3</a> (o sea,
heredable), por tanto, en la <em>shell</em> hija no existirá. Como ambas son
variables, <a class="reference internal" href="#set"><span class="std std-ref">set</span></a> mostrará el valor de ambas; <strong class="command">env</strong>, en
cambio, sólo mostrará <code class="docutils literal notranslate"><span class="pre">HOME</span></code>.</p>
</dd>
</dl>
<p>Para obtener el valor de una variable, hay que anteponer a su nombre el símbolo
del dolar:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">echo</span> <span class="nv">$HOME</span>
<span class="go">/home/usuario</span>
</pre></div>
</div>
<p>También es posible rodear el nombre con llaves para indicarle a <strong class="program">bash</strong>
dónde empieza y acaba el nombre de la variable:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">echo</span> x<span class="si">${</span><span class="nv">HOME</span><span class="si">}</span>x
<span class="go">x/home/usuario/x</span>
</pre></div>
</div>
<p>ya que si escribiéramos <kbd class="kbd docutils literal notranslate">$HOMEx</kbd>, la <em>shell</em> pensaría que el nombre de la
variable es <code class="docutils literal notranslate"><span class="pre">HOMEx</span></code>. Si la variable no existe, se sustituye por la cadena
vacía:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">echo</span> x<span class="nv">$HOMEx</span>
<span class="go">x</span>
</pre></div>
</div>
<p>La interpretación del dólar puede protegerse escapándolo o con comillas simples,
pero no con las dobles:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">echo</span> <span class="s1">&#39;${HOME}&#39;</span> -- <span class="se">\$\{</span>HOME<span class="se">\}</span> -- <span class="s2">&quot;</span><span class="si">${</span><span class="nv">HOME</span><span class="si">}</span><span class="s2">&quot;</span>
<span class="gp">$</span><span class="o">{</span>HOME<span class="o">}</span> -- <span class="si">${</span><span class="nv">HOME</span><span class="si">}</span> -- /home/usuario
</pre></div>
</div>
<section id="variables-predefinidas">
<h3><span class="section-number">2.5.2.7.1. </span>Variables predefinidas<a class="headerlink" href="#variables-predefinidas" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Hay muchas <a class="reference external" href="http://www.tldp.org/LDP/abs/html/internalvariables.html">variables de entorno</a> disponibles. Algunas
interesantes son:</p>
<dl class="simple">
<dt><strong>$$</strong></dt><dd><p>Devuelve el <a class="reference internal" href="../09.admbasica/09.procesos.html#pid"><span class="std std-ref">pid</span></a> del proceso actual. Si estamos en una sesión
interactiva, devolverá el <em>pid</em> de la sesión de <strong class="program">bash</strong>.</p>
</dd>
</dl>
<dl id="id6">
<dt><strong>$?</strong></dt><dd><p>Devuelve el resultado del último programa ejecutado. Los programas para
informar de si han tenido éxito o no, devuelven a su entorno un <em>byte</em>, que
valdrá <em>0</em> si tuvo éxito, u otro valor distinto, si no lo tuvo. Por este
motivo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">true</span>
<span class="gp">$</span> <span class="nb">echo</span> <span class="nv">$?</span>
<span class="go">0</span>
<span class="gp">$</span> <span class="nb">false</span>
<span class="gp">$</span> <span class="nb">echo</span> <span class="nv">$?</span>
<span class="go">1</span>
</pre></div>
</div>
</dd>
<dt><strong>$!</strong></dt><dd><p>Almacena el <em>pid</em> del último programa ejecutado en el background. Véase
el epígrafe sobre <a class="reference internal" href="../09.admbasica/09.procesos.html#procesos"><span class="std std-ref">gestión de procesos</span></a>.</p>
</dd>
</dl>
<dl id="sh-editor">
<dt><strong>$EDITOR</strong></dt><dd><p>Determina cuál es el editor predeterminado que usarán programas como <a class="reference internal" href="../../04.servidor/07.tareas/01.cronat.html#crontab"><span class="std std-ref">crontab</span></a> o <a class="reference internal" href="../09.admbasica/10.priv/01.sudo.html#visudo"><span class="std std-ref">visudo</span></a>.</p>
<p>En <em>debian</em>, hay tres mecanismos<a class="footnote-reference brackets" href="#id13" id="id7">4</a> para que los programas que hacen uso
de la edición, escojan el editor. Por orden de prioridad son:</p>
<ol class="arabic simple">
<li><p>A través de las <span class="xref std std-ref">alternativas</span> de <em>debian</em>.</p></li>
<li><p>Mediante la configuración del programa <strong class="command">sensible-editor</strong>.</p></li>
<li><p>Leyendo el valor de la variable <strong>EDITOR</strong>.</p></li>
</ol>
</dd>
</dl>
<dl class="simple" id="histfile">
<dt><strong>$HISTFILE</strong></dt><dd><p>Define cuál es el fichero en el que se almacenará el historial de
<strong class="program">bash</strong>. Habitualmente su valor es <code class="file docutils literal notranslate"><span class="pre">~/.bash_history</span></code>.</p>
</dd>
<dt><strong>$HOME</strong></dt><dd><p>Devuelve el directorio personal del usuario.</p>
</dd>
<dt><strong>$HOSTNAME</strong></dt><dd><p>Devuelve el nombre de la máquina. Puede usarse también el <span class="target" id="index-3"></span>comando <strong class="command">hostname</strong>.</p>
</dd>
</dl>
<dl id="sh-ifs">
<dt><strong>IFS</strong></dt><dd><p>Su nombre es el acrónimo de <em>Separador Interno de Campos</em>. y tiene
importancia en algunas operaciones de la <em>shell</em>.</p>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>Consulte la explicación de la orden <a class="reference internal" href="../08.redirecciones/02avanzada.html#read"><span class="std std-ref">read</span></a> y la
<a class="reference internal" href="../../03.scripts/02.io.html#sh-args"><span class="std std-ref">discusión sobre los argumentos de un programa</span></a> para ver
algunos ejemplo del usuo de este variable.</p>
</div>
</dd>
<dt><strong>$OLDPWD</strong></dt><dd><p>Devuelve el nombre del directorio anterior al actual. Es útil si se quiere
volver a él:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> <span class="nv">$OLDPWD</span>
</pre></div>
</div>
</dd>
</dl>
<dl id="path">
<dt><strong>$PATH</strong></dt><dd><p>Lista los directorios que el sistema considera que contienen ejecutables. Se
separa un directorio del siguiente por dos puntos (<code class="docutils literal notranslate"><span class="pre">:</span></code>):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">echo</span> <span class="nv">$PATH</span>
<span class="go">/usr/local/bin:/usr/bin:/bin:/usr/local/games:/usr/games</span>
</pre></div>
</div>
<p>Esto permite invocar órdenes sin tener que indicar la ruta completa. Por este
motivo es posible escribir:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> cp fichero1 fichero2
</pre></div>
</div>
<p>Sin necesidad de escribir:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> /bin/cp fichero1 fichero2
</pre></div>
</div>
<p>En el primer caso, el intérprete recorre la lista de directorios que contiene
la variable de izquierda a derecha, analizando si tal ejecutable está o no.
Al encontrarlo lo ejecuta; si no lo encuentra en ninguno de los directorios,
genera un error:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;&quot;</span>  <span class="c1"># &lt;---- Ahora PATH está vacío y bash no busca.</span>
<span class="gp">$</span> cp fichero1 fichero2
<span class="go">-bash: cp: No existe el fichero o el directorio</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Obsérvese que el directorio actual no se encuentra en la lista de
directorios. Por ese motivo, para ejecutar un programa que se encuentra en
el directorio de trabajo es necesario:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ./mi_script.sh
</pre></div>
</div>
</div>
</dd>
<dt><strong>$PS1</strong></dt><dd><p>Define el prompt de usuario.</p>
</dd>
<dt><strong>$PWD</strong></dt><dd><p>Devuelve el directorio actual de trabajo, accesible también a través del
comando <a class="reference internal" href="../02.informacion/03.ficheros.html#pwd"><span class="std std-ref">pwd</span></a>.</p>
</dd>
</dl>
</section>
<section id="variables-de-usuario">
<span id="sh-variables-usuario"></span><h3><span class="section-number">2.5.2.7.2. </span>Variables de usuario<a class="headerlink" href="#variables-de-usuario" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Cualquier usuario puede definir sus propias variables simplemente dándoles
valor:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nv">MIVAR</span><span class="o">=</span><span class="m">4</span>
<span class="gp">$</span> <span class="nb">echo</span> <span class="si">${</span><span class="nv">MIVAR</span><span class="si">}</span>
<span class="go">4</span>
</pre></div>
</div>
<p>Por supuesto, esto también es aplicable a las variables vistas en el apartado
anterior:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;~/bin/:</span><span class="nv">$PATH</span><span class="s2">&quot;</span>
</pre></div>
</div>
<p>Salvo este último caso de redefinición de variables ya existentes, no suele
tener gran utilidad en consolas interactivas, pero cobra capital importancia
cuando se escriben <em>scripts</em>. Al tratarlos, <a class="reference internal" href="../../03.scripts/01.vistos.html#sh-variables"><span class="std std-ref">profundizaremos en ellas</span></a>.</p>
<p>No obstante, debe significarse que, cuando se definen variables, ha de tenerse
en cuenta que estas, en principio, sólo existen dentro de la propia sesión de
<strong class="program">bash</strong>, y no las heredan los programas hijo. Por ejemplo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">echo</span> <span class="nv">MIVAR</span><span class="o">=</span><span class="m">4</span>
<span class="gp">$</span> <span class="nb">echo</span> %<span class="si">${</span><span class="nv">MIVAR</span><span class="si">}</span>%
<span class="gp">%</span><span class="m">4</span>%
<span class="gp">$</span> bash -c <span class="s1">&#39;echo %${MIVAR}%&#39;</span>
<span class="gp">%</span>%
</pre></div>
</div>
<p>Para que convertirlas en variables de entorno es necesario exportarlas.</p>
<span class="target" id="export"></span><dl id="index-4">
<dt><strong class="command">export</strong></dt><dd><p>Permite convertir una variable en variable de entorno, es decir, hacerla heredable
por los procesos hijo. La sintaxis es:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">export [-f|-n] nombre[=valor] [nombre2=valor2 ...]</span>
</pre></div>
</div>
<p>Cuando la variable se exporta puede ya tener definido un valor. En ese caso,
basta con indicar el nombre de la variable:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nv">MIVAR</span><span class="o">=</span><span class="m">4</span>
<span class="gp">$</span> <span class="nb">export</span> MIVAR
</pre></div>
</div>
<p>Pero también puede hacerse la asignación a la vez que se realiza la
exportación:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">export</span> <span class="nv">MIVAR</span><span class="o">=</span><span class="m">4</span>
</pre></div>
</div>
<p>Si se exportó la variable, entonces ya estará disponible en el entorno de
cualquier programa hijo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> bash -c <span class="s1">&#39;echo %${MIVAR}%&#39;</span>
<span class="gp">%</span><span class="m">4</span>%
</pre></div>
</div>
<p>Si se desea desmarcar la variable como exportable, basta con usar la opción
<code class="docutils literal notranslate"><span class="pre">-n</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">export</span> -n MIVAR
<span class="gp">$</span> bash -c <span class="s1">&#39;echo %${MIVAR}%&#39;</span>
<span class="gp">%</span>%
</pre></div>
</div>
<p>Por último, es posible mostrar todas las variables exportadas usando la
opción <code class="docutils literal notranslate"><span class="pre">-p</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">export</span> -p
<span class="go">[... Lista de variables y funciones exportables ..]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>La opción <code class="docutils literal notranslate"><span class="pre">-f</span></code> sire para exportar <a class="reference internal" href="../../03.scripts/05.funciones.html#sh-func"><span class="std std-ref">funciones</span></a> en
vez de variable (sólo en <strong class="command">bash</strong>, ya que <strong class="command">dash</strong> no puede
exportar funciones)</p>
</div>
</dd>
</dl>
<p>Otra posibilidad que proporciona la <em>shell</em> es pasar la definición de una
variable a un programa hijo. Esto se hace anteponiendo la asignación de la
variable al comando:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nv">A</span><span class="o">=</span><span class="m">1</span> bash -c <span class="s1">&#39;echo $A&#39;</span>
<span class="go">1</span>
</pre></div>
</div>
<p>Pueden, asimismo, realizarse varias asignaciones:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nv">A</span><span class="o">=</span><span class="m">1</span> <span class="nv">B</span><span class="o">=</span><span class="m">2</span> bash -c <span class="s1">&#39;echo $A -- $B&#39;</span>
<span class="go">1 -- 2</span>
</pre></div>
</div>
</section>
</section>
<section id="evaluacion-aritmetica">
<span id="sh-ev-arit"></span><h2><span class="section-number">2.5.2.8. </span>Evaluación aritmética<a class="headerlink" href="#evaluacion-aritmetica" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Para la realización de operaciones, pueden recurrirse a la evaluación aritmética
usando la sintaxis:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span><span class="o">((</span> ... <span class="o">))</span>
</pre></div>
</div>
<p>Entre paréntesis debemos colocar una expresión tal y como se escribiría en en
lenguaje <em>C</em>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nv">SUMA</span><span class="o">=</span><span class="k">$((</span><span class="m">1</span><span class="o">+</span><span class="m">2</span><span class="k">))</span>
<span class="gp">$</span> <span class="nb">echo</span> <span class="nv">$SUMA</span>
<span class="go">3</span>
</pre></div>
</div>
<p>Las comillas dobles permiten a la <em>shell</em> interpretar la expresión; los
otros dos mecanismos lo evitan:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">echo</span> <span class="s2">&quot;La suma de 1 y 2 es </span><span class="k">$((</span><span class="m">1</span><span class="o">+</span><span class="m">2</span><span class="k">))</span><span class="s2">&quot;</span>
<span class="go">La suma de 1 y 2 es 3</span>
</pre></div>
</div>
<p>Además de estas operaciones, <strong class="command">bash</strong> permite con la sintaxis de los dos
paréntesis, otras dos operaciones:</p>
<ol class="arabic">
<li><p>Asignar valor a variables (lo cual sólo tiene sentido si hay involucradas
operaciones aritméticas, ya que de otro modo basta con usar el método
general para dar valor a la variable):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="o">((</span><span class="nv">A</span> <span class="o">=</span> <span class="m">1</span>+2<span class="o">))</span>
<span class="gp">$</span> <span class="nb">echo</span> <span class="nv">$A</span>
<span class="go">3</span>
<span class="gp">$</span> <span class="o">((</span>A++<span class="o">))</span>
<span class="gp">$</span> <span class="nb">echo</span> <span class="nv">$A</span>
<span class="go">4</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Obviamente, esta forma de asignación sólo tiene sentido si
incluimos alguna operación aritmética; de lo contrario, es más sencillo
usar directamente el método general de asignación.</p>
</div>
</li>
<li><p>Hacer una evaluación lógica:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="o">((</span><span class="nv">A</span> <span class="o">==</span> <span class="m">3</span><span class="o">))</span> <span class="o">||</span> <span class="nb">echo</span> <span class="s2">&quot;A no vale 3&quot;</span>
<span class="go">A no vale 3.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Al tratar la programación, ya veremos <a class="reference internal" href="../../03.scripts/03.control.html#sh-if"><span class="std std-ref">cómo realizar esto mismo
con test</span></a>.</p>
</div>
</li>
</ol>
<span class="target" id="alias"></span></section>
<section id="index-5">
<span id="id8"></span><h2><span class="section-number">2.5.2.9. </span>Alias<a class="headerlink" href="#index-5" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Los <em class="dfn">alias</em> son palabras que permiten acortar la digitalización de un
comando. Habitualmente se usan para ejecutar siempre ciertos comandos con una o
varias opciones predeterminadas. En realidad, lo más probable es que existan ya
definidos en el sistema. Uno que viene en <em>debian</em> para el usuario sin
privilegios es este:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">alias</span> ls
<span class="go">alias ls=&#39;ls --color=auto -F&#39;</span>
</pre></div>
</div>
<p>O sea, que cuando ejecutamos <code class="code docutils literal notranslate"><span class="pre">ls</span></code>, en realidad, estamos ejecutando
<code class="code docutils literal notranslate"><span class="pre">ls</span> <span class="pre">--color=auto</span> <span class="pre">-F</span></code>. Por esta razón, la salida sale coloreada. Cuando se
quiere ejecutar el comando a secas y no el alias, es necesario anteponer al
comando la barra invertida:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="se">\l</span>s
</pre></div>
</div>
<span class="target" id="command"></span><p id="index-6">o bien usar la orden interna <strong class="command">command</strong>, que tiene el mismo efecto:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">command</span> ls
</pre></div>
</div>
<p>Esto mostrará una salida sin colorear ni decorar los nombres, o sea, la
ejecución pelada de <strong class="command">ls</strong>.</p>
<p>Hemos visto ya cómo consultar el alias definido para un cierto comando. Es
posible que se muestren todos, ejecutando <strong class="command">alias</strong> sin argumentos:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">alias</span>
<span class="go">alias ls=&#39;ls --color=auto -F&#39;</span>
<span class="go">alias tar=&#39;tar --no-overwrite-dir&#39;</span>
<span class="go">alias scp=&#39;scp -p&#39;</span>
<span class="go">alias tmux=&#39;tmux -2 attach || tmux -2 new-session&#39;</span>
</pre></div>
</div>
<p>Para definir nuevos alias, basta con usar la sintaxis que ha aparecido en la
salida. Por ejemplo, <a class="reference internal" href="../02.informacion/03.ficheros.html#cp"><span class="std std-ref">cp</span></a>, <a class="reference internal" href="../02.informacion/03.ficheros.html#mv"><span class="std std-ref">mv</span></a> y <a class="reference internal" href="../02.informacion/03.ficheros.html#rm"><span class="std std-ref">rm</span></a> es muy
recomendable usarlos añadiendo la opción <code class="docutils literal notranslate"><span class="pre">-i</span></code>. Por tanto, es muy útil añadir
los alias:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">alias</span> <span class="nv">mv</span><span class="o">=</span><span class="s1">&#39;mv -i&#39;</span>
<span class="gp">$</span> <span class="nb">alias</span> <span class="nv">cp</span><span class="o">=</span><span class="s1">&#39;cp -i&#39;</span>
<span class="gp">$</span> <span class="nb">alias</span> <span class="nv">rm</span><span class="o">=</span><span class="s1">&#39;rm -i&#39;</span>
</pre></div>
</div>
<p>Sin embargo, todas estas definiciones sólo tienen validez hasta que acabe la
sesión. Si queremos hacer cambios permanentes es necesario escribirlos en
ficheros que se lean al iniciar las sesiones. De esto trataremos en el siguiente
apartado.</p>
</section>
<section id="como-definir-variables-de-entorno-y-alias">
<span id="inicio-bash"></span><h2><span class="section-number">2.5.2.10. </span>¿Cómo definir variables de entorno y alias?<a class="headerlink" href="#como-definir-variables-de-entorno-y-alias" title="Enlazar permanentemente con este título">¶</a></h2>
<p>La respuesta es sencilla: escribiendo la definición de las variables o los alias
en los directorios que <strong class="program">bash</strong> lee al ejecutarse para abrir sesión.
Estos fichero son:</p>
<dl>
<dt><code class="file docutils literal notranslate"><span class="pre">/etc/profile</span></code></dt><dd><p>Sea cual sea el usuario que abre sesión. se lee este fichero. Por tanto, si
se desea hacer un cambio que afecte a todos los usuarios, puede escribirse
aquí. No obstante, este fichero llama a su vez a <code class="file docutils literal notranslate"><span class="pre">/etc/bash.bashrc</span></code> por
lo que deberíamos ver si nuestro nuestro cambio, será desecho después.</p>
<p>Sin embargo, lo mejor es escribir nuestro código en un nuevo fichero dentro
de <code class="file docutils literal notranslate"><span class="pre">/etc/profile.d/</span></code>, para no modificar los ficheros de la propia
distribución. El fichero debe tener extensión <code class="docutils literal notranslate"><span class="pre">.sh</span></code>.</p>
</dd>
<dt><code class="file docutils literal notranslate"><span class="pre">~/.bash_profile</span></code>, <code class="file docutils literal notranslate"><span class="pre">~/.bash_login</span></code>, <code class="file docutils literal notranslate"><span class="pre">~/.profile</span></code></dt><dd><p>Los tres ficheros son, obviamente, particulares de cada usuario.
Después de leer los ficheros anteriores, <strong class="program">bash</strong> busca por el orden
especificado estos tres ficheros y en cuanto encuentra uno, ese lee. Lo
habitual es que nos topemos con que existe <code class="file docutils literal notranslate"><span class="pre">~/.profile</span></code>, que a su vez
lee el fichero que se cita a continuación.</p>
</dd>
<dt><code class="file docutils literal notranslate"><span class="pre">~/.bashrc</span></code></dt><dd><p>Es el fichero que lee <strong class="program">bash</strong> cuando la sesión es interactiva, pero
no de <em>login</em>. La mayor parte de las sesiones interactivas son de <em>login</em>,
pero no todas. Por ejemplo, no son de <em>login</em> las sesiones que se abren con
el comando <a class="reference internal" href="../05.seguridad/05a.usuarios.html#su"><span class="std std-ref">su</span></a> si no se usa la opción <code class="docutils literal notranslate"><span class="pre">-</span></code>.</p>
</dd>
</dl>
<p id="bashrc-d">Por tanto, si quisiéramos que para nuestro usuario particular los comandos
<a class="reference internal" href="../02.informacion/03.ficheros.html#cp"><span class="std std-ref">cp</span></a>, <a class="reference internal" href="../02.informacion/03.ficheros.html#mv"><span class="std std-ref">mv</span></a> y <a class="reference internal" href="../02.informacion/03.ficheros.html#rm"><span class="std std-ref">rm</span></a> preguntaran antes de hacer una
acción destructiva, podríamos incluir las tres líneas de <em>alias</em> mediante la
edición del fichero <code class="file docutils literal notranslate"><span class="pre">~/.bashrc</span></code>. Ahora bien, añadir indiscriminadamente
líneas a este fichero no es buena idea, porque se acabará convirtiendo en un
monstruito con configuración predeterminada muy diversa. Es mejor en cambio,
crear un directorio de configuraciones <code class="file docutils literal notranslate"><span class="pre">~/.bashrc.d</span></code> e incluir dentro de
él la configuración modular. Para ello debe hacerse uso del comando
interno:</p>
<span class="target" id="source"></span><dl id="index-7">
<dt><strong class="command">source</strong></dt><dd><p>Lee en la <em>shell</em> actual una serie de órdenes almacenadas en un fichero. Su
sintaxis es:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">source &lt;fichero&gt;</span>
</pre></div>
</div>
<p>En vez de usar la palabra <em>source</em> puede escribirse simplemente un punto
(<kbd class="kbd docutils literal notranslate">.</kbd>). De hecho, el punto es lo único que entiende <strong class="command">dash</strong>.</p>
</dd>
</dl>
<p>Sabido esto, la forma de intergrar el directorio de configuraciones dentro de
la configuración es añadir a <code class="file docutils literal notranslate"><span class="pre">~/.bashrc</span></code> las siguientes líneas:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">if [ -d ~/.bashrc.d ]; then</span>
<span class="go">   for conf in ~/.bashrc.d/*.sh; do</span>
<span class="go">      . &quot;$conf&quot;</span>
<span class="go">   done</span>
<span class="go">fi</span>
</pre></div>
</div>
<p>que provocará que se interpreten todas las instrucciones incluidas en ficheros
de ese directorio cuya extensión sea <code class="docutils literal notranslate"><span class="pre">.sh</span></code>. Así pues:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> mkdir ~/.bashrc.d
<span class="gp">$</span> cat &gt; ~/,bashrc.d/10-aliases.sh
<span class="go">alias mv=&#39;mv -i&#39;</span>
<span class="go">alias cp=&#39;cp -i&#39;</span>
<span class="go">alias rm=&#39;rm -i&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Los ficheros se leen en orden alfabético, así que es buena idea
hacer comenzar los nombres con números de igual longitud para la ordenación
sea más evidente.</p>
</div>
<p>Si quisiéramos que los tres <em>alias</em> se definieran para todos los usuarios
podríamos crear el fichero <code class="file docutils literal notranslate"><span class="pre">/etc/profile.d/bash_aliases.sh</span></code><a class="footnote-reference brackets" href="#id14" id="id9">5</a></p>
<p>Hay una último aspecto interesante. En <code class="file docutils literal notranslate"><span class="pre">/etc/skell</span></code> se almacena el
<em>esqueleto</em> que se usa para crear los directorios personales de usuario.
Cualquier fichero que se incluya aquí o cualquier modificación que se introduzca
en los ficheros que ya existen, pasará a formar parte de los nuevos directorios
personales que se creen.</p>
</section>
</section>
<section id="ejercicios-sobre-expansiones">
<span id="ej-exp"></span><h1><span class="section-number">2.5.3. </span>Ejercicios sobre expansiones<a class="headerlink" href="#ejercicios-sobre-expansiones" title="Enlazar permanentemente con este título">¶</a></h1>
<ol class="arabic">
<li><p>Crear el fichero vacio <code class="file docutils literal notranslate"><span class="pre">captura$1.jpg</span></code>.</p></li>
<li><p>Desde el directorio peronal y Utilizando expansiones, crear el siguiente
árbol de directorios de la manera más corta posible:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/tmp
  |
  +-- D1
  |    +-- D1a
  |    +-- D1b
  |    +-- D1c
  +-- D2
  |    +-- D21
  |    +-- D22
  |    +-- D23
  |    +-- D24
  |    +-- D25
  +-- DIR3
</pre></div>
</div>
</li>
<li><p>Sin cambiar de directorio de trabajo, borrar los directorios <code class="file docutils literal notranslate"><span class="pre">D23</span></code> y
<code class="file docutils literal notranslate"><span class="pre">D25</span></code> (hágalo del modo más corto posible).</p></li>
<li><p>Mostrar por pantalla los directorios hijos de <code class="file docutils literal notranslate"><span class="pre">/</span></code> que contengan la
cadena «<em>bin</em>» en cualquier parte de su nombre.</p></li>
<li><p>Mostrar los programas propios del administrador que contengan tres letras.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>En los modernos sistemas <em>Debian</em> <code class="file docutils literal notranslate"><span class="pre">/sbin</span></code> y <code class="file docutils literal notranslate"><span class="pre">/usr/sbin</span></code>
contienen lo mismo.</p>
</div>
</li>
<li><p>Mostrar los programas propios del administrador que contengan al menos tres
letras.</p></li>
<li><p>Mostrar los programas propios del administrador que empiecen por «<em>a</em>» y
acaben por cualquier vocal.</p></li>
<li><p>Mostrar los programas propios del administrador que empiecen por vocal y
acaben por vocal.</p></li>
<li><p>Mostrar por pantalla todas las combinaciones con repetición que se pueden
formar con dos vocales.</p></li>
<li><p>Suponiendo que no se hayan creado usuarios con directorios personales en
sitios extraños, ver los directorios personales de usuarios cuyo nombre
empieza por «u».</p></li>
<li><p>Comprobar cuántos dispositivos de almacenamiento (discos, memorias usb, …)
hay en el sistema.</p></li>
<li><p>Comprobar cuáles son las páginas de manual en español de la primera sección
que empiezan por la letra «<em>m</em>».</p></li>
<li><p>Lo mismo, pero en cualquier sección.</p></li>
<li><p>Lo mismo, pero en cualquier sección y lengua.</p></li>
<li><p>¿Cuántos kernel de linux distintos hay instalados en el sistema?</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Pruebe a buscarlos; no use herramientas como <strong class="program">dpkg</strong>.</p>
</div>
</li>
</ol>
<p class="rubric">Notas al pie</p>
<dl class="footnote brackets">
<dt class="label" id="id10"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>En la consola interactiva puede escribirse la tabulación pulsado Ctrl+v y
a continuación la propia tabulación.</p>
</dd>
<dt class="label" id="id11"><span class="brackets"><a class="fn-backref" href="#id3">2</a></span></dt>
<dd><p>Este comportamiento de no interpretar ante un patrón que no corresponde
con ningún fichero puede modificarse mediate:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">shopt</span> -s nullglob
</pre></div>
</div>
<p>Hecho esto, un patrón que no tiene correspondencia se resolverá a la cadena
nula:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">echo</span> Interpretación: /?
<span class="go">Interpretación: /?</span>
<span class="gp">$</span> <span class="nb">shopt</span> -s nullglob
<span class="gp">$</span> <span class="nb">echo</span> Interpretación: /?
<span class="go">Interpretación:</span>
</pre></div>
</div>
</dd>
<dt class="label" id="id12"><span class="brackets"><a class="fn-backref" href="#id5">3</a></span></dt>
<dd><p>Para que la nueva variable, se convierta en variable de ambiente es
necesario <a class="reference internal" href="#export"><span class="std std-ref">exportarla</span></a>.</p>
</dd>
<dt class="label" id="id13"><span class="brackets"><a class="fn-backref" href="#id7">4</a></span></dt>
<dd><p>Cuando un programa necesita hacer uso de un editor, está preparado para
buscar entre las variables de ambiente el valor de <em>EDITOR</em>. Si existe, es
este el valor que usa; si no es así, invoca un <span class="target" id="index-8"></span>editor llamado <strong class="command">sensible-editor</strong>, que es un programa que
comprueba si está definida la variable <em>SELECTED_EDITOR</em>, cuyo valor es el
editor preferido. Si lo está, ese es el editor que se lanza; si no, llama al
<span class="target" id="index-9"></span>programa <strong class="command">selected-editor</strong> que permite
elegir uno y define de forma persistente (en <code class="file docutils literal notranslate"><span class="pre">~/.selected_editor</span></code>) el
valor de la variable. A partir de ese momento ese es el editor que se usará.
El tercer mecanismo intuyo que jamás llega a operar.</p>
</dd>
<dt class="label" id="id14"><span class="brackets"><a class="fn-backref" href="#id9">5</a></span></dt>
<dd><p><code class="file docutils literal notranslate"><span class="pre">/etc/profile.d/</span></code> esta organizado respecto a <code class="file docutils literal notranslate"><span class="pre">/etc/profile</span></code>,
del mismo que hemos nosotros aquí.</p>
</dd>
</dl>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Tabla de contenido</a></h3>
  <ul>
<li><a class="reference internal" href="#">2.5.2. Interpretaciones en línea</a><ul>
<li><a class="reference internal" href="#espaciado">2.5.2.1. Espaciado</a></li>
<li><a class="reference internal" href="#historial">2.5.2.2. Historial</a></li>
<li><a class="reference internal" href="#comodines">2.5.2.3. Comodines</a></li>
<li><a class="reference internal" href="#expandibles">2.5.2.4. Expandibles</a></li>
<li><a class="reference internal" href="#expansiones-extendidas">2.5.2.5. Expansiones extendidas</a></li>
<li><a class="reference internal" href="#subshells">2.5.2.6. <em>Subshells</em></a></li>
<li><a class="reference internal" href="#variables">2.5.2.7. Variables</a><ul>
<li><a class="reference internal" href="#variables-predefinidas">2.5.2.7.1. Variables predefinidas</a></li>
<li><a class="reference internal" href="#variables-de-usuario">2.5.2.7.2. Variables de usuario</a></li>
</ul>
</li>
<li><a class="reference internal" href="#evaluacion-aritmetica">2.5.2.8. Evaluación aritmética</a></li>
<li><a class="reference internal" href="#index-5">2.5.2.9. Alias</a></li>
<li><a class="reference internal" href="#como-definir-variables-de-entorno-y-alias">2.5.2.10. ¿Cómo definir variables de entorno y alias?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ejercicios-sobre-expansiones">2.5.3. Ejercicios sobre expansiones</a></li>
</ul>

  <h4>Tema anterior</h4>
  <p class="topless"><a href="07.concatenacion.html"
                        title="capítulo anterior"><span class="section-number">2.5.1. </span>Concatenación de órdenes</a></p>
  <h4>Próximo tema</h4>
  <p class="topless"><a href="../08.redirecciones/index.html"
                        title="próximo capítulo"><span class="section-number">2.6. </span>Redirección de E/S</a></p>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/02.conbas/07.avanzada/08.interpretaciones.rst.txt"
            rel="nofollow">Mostrar el código</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Búsqueda rápida</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Ir a" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="../08.redirecciones/index.html" title="2.6. Redirección de E/S"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="07.concatenacion.html" title="2.5.1. Concatenación de órdenes"
             >anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" ><span class="section-number">2. </span>Conceptos básicos</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" ><span class="section-number">2.5. </span>Órdenes avanzadas</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2.5.2. </span>Interpretaciones en línea</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Derechos de autor CC BY 4.0, 2016-2022, José Miguel Sánchez Alés.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.3.2.
    </div>
  </body>
</html>