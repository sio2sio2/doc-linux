

<!DOCTYPE html>

<html lang="es" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>2.8.1. Expresiones regulares &#8212; documentación de Linuxnomicón - rolling</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/classic.css?v=def86cc0" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    
    <script src="../../_static/documentation_options.js?v=a621b78a"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/translations.js?v=efdbd0b9"></script>
    
    <link rel="index" title="Índice" href="../../genindex.html" />
    <link rel="search" title="Búsqueda" href="../../search.html" />
    <link rel="next" title="2.8.2. Herramientas de búsqueda" href="02.busqueda.html" />
    <link rel="prev" title="2.8. Tratamiento de texto" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="02.busqueda.html" title="2.8.2. Herramientas de búsqueda"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="index.html" title="2.8. Tratamiento de texto"
             accesskey="P">anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" ><span class="section-number">2. </span>Conceptos básicos</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U"><span class="section-number">2.8. </span>Tratamiento de texto</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2.8.1. </span>Expresiones regulares</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="expresiones-regulares">
<span id="regex"></span><h1><span class="section-number">2.8.1. </span>Expresiones regulares<a class="headerlink" href="#expresiones-regulares" title="Link to this heading">¶</a></h1>
<p>Una <em class="dfn">expresión regular</em> (comúnmente denominadas <em>regex</em>) es una secuencia
de caracteres que conforman un patrón de búsqueda. Por lo general, estas
búsquedas se realizan sobre cadenas de caracteres, esto es, sobre texto plano.</p>
<p>Existen muchas herremientas de selección o sustitución de texto que las usan,
por lo que antes de pasar a presentar éstas, es necesario conocer cómo se
construyen.</p>
<section id="tipos-de-expresiones-regulares">
<span id="tipos-regex"></span><h2><span class="section-number">2.8.1.1. </span>Tipos de expresiones regulares<a class="headerlink" href="#tipos-de-expresiones-regulares" title="Link to this heading">¶</a></h2>
<p>Hay muchas implementaciones distintas de <em>regex</em><a class="footnote-reference brackets" href="#id12" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>, pero todas las podemos
agrupar dentro de una de estas tres familias:</p>
<dl class="simple">
<dt><strong>BRE</strong> (<em>Basic Regular Expression</em>):</dt><dd><p>Las expresiones regulares básicas, estándar POSIX, nacieron a partir de la
implementación de las <em>regex</em> por el antiguo editor <a class="reference external" href="https://en.wikipedia.org/wiki/Ed_(text_editor)">ed</a>, antecesor de
<strong class="program">vim</strong><a class="footnote-reference brackets" href="#id13" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a></p>
</dd>
<dt><strong>ERE</strong> (<em>Extended Regular Expression</em>):</dt><dd><p>Las expresiones regulares extendidas, también estándar POSIX, nacieron a
partir de una extensión del comando <a class="reference internal" href="02.busqueda.html#grep"><span class="std std-ref">grep</span></a>, llamada
<strong class="command">egrep</strong><a class="footnote-reference brackets" href="#id14" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a>. Son similares, pero no compatibles con las
anteriores<a class="footnote-reference brackets" href="#id15" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a>, y son la base del resto de tipos de expresiones regulares
nacidas después. De hecho, lo común es que cualquier implementación de
expresiones regulares que podamos encontrar, sea compatible con el estándar
<abbr title="Extended Regular Expressions">ERE</abbr>, aunque disponga de extensiones adicionales.</p>
</dd>
<dt><strong>PCRE</strong> (<em>Perl Compatible Regular Expression</em>):</dt><dd><p>Las expresiones regulares compatibles con Perl son la implementación de las
<em>regex</em> para el lenguaje de programación <a class="reference external" href="https://www.perl.org/">perl</a>.
Añaden a las expresiones <abbr title="Extended Regular Expressions">ERE</abbr> algunas extensiones útiles y, aunque no son
estándar POSIX, son <em>de facto</em> un estándar, puesto que muchas
implementaciones posteriores las han tomado de base.</p>
</dd>
</dl>
<p>En la línea de órdenes los herramientas básicas que permiten el uso de
expresiones básicas (y que estudiaremos más adelante) son <a class="reference internal" href="02.busqueda.html#grep"><span class="std std-ref">grep</span></a>,
<a class="reference internal" href="03.manipulacion.html#sed"><span class="std std-ref">sed</span></a>, <a class="reference internal" href="03.manipulacion.html#awk"><span class="std std-ref">awk</span></a> y el propio <strong class="program">bash</strong> desde su versión
3. Las dos primeras usan por defecto expresiones <abbr title="Basic Regular Expressions">BRE</abbr>, pero con la adición de
una opción también expresiones <abbr title="Extended Regular Expressions">ERE</abbr>; mientras que las dos últimas usan
únicamente expresiones <abbr title="Extended Regular Expressions">ERE</abbr>. Por otro lado, la mayoría de implementaciones de
los lenguajes de programación más conocidos entienden las expresiones <abbr title="Perl-Compatible Regular Expressions">PCRE</abbr>,
que son, a su vez, practicamente compatibles con las <abbr title="Extended Regular Expressions">ERE</abbr> (salvo por alguna
excepción). Por tanto, lo más sensato es aprender las expresiones <abbr title="Perl-Compatible Regular Expressions">PCRE</abbr>,
sabiendo cuáles no existen en <abbr title="Extended Regular Expressions">ERE</abbr> para no usarlas con herramientas que no
llegan a soportarlas<a class="footnote-reference brackets" href="#id16" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a><a class="footnote-reference brackets" href="#id17" id="id6" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Para probar las expresiones regulares que introduzcamos a
continuación, se utilizará <strong class="command">grep</strong> con la opción <code class="docutils literal notranslate"><span class="pre">-E</span></code> para que
interprete expresiones <abbr title="Extended Regular Expressions">ERE</abbr>, o con la opción <code class="docutils literal notranslate"><span class="pre">-P</span></code> para que interprete
expresiones <abbr title="Perl-Compatible Regular Expressions">PCRE</abbr>. Tal comando se introducirá formalmente más adelante junto
a los demás.</p>
</div>
</section>
<section id="patrones-basicos">
<h2><span class="section-number">2.8.1.2. </span>Patrones básicos<a class="headerlink" href="#patrones-basicos" title="Link to this heading">¶</a></h2>
<table class="regex docutils align-default" id="id23">
<caption><span class="caption-text"><strong>Patrones básicos</strong></span><a class="headerlink" href="#id23" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head" rowspan="2"><p>Operación</p></th>
<th class="head" colspan="4"><p>Operador</p></th>
<th class="head" rowspan="2"><p>Descripción</p></th>
<th class="head" rowspan="2"><p>Ejemplo (ERE)</p></th>
</tr>
<tr class="row-even"><th class="head"><p>BRE</p></th>
<th class="head" colspan="2"><p>ERE</p></th>
<th class="head"><p>PCRE</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td rowspan="4"><p>Cuantificación</p></td>
<td><p><kbd class="kbd docutils literal notranslate">\?</kbd></p></td>
<td colspan="3"><p><kbd class="kbd docutils literal notranslate">?</kbd></p></td>
<td><p>Una vez o ninguna.</p></td>
<td><p><kbd class="kbd docutils literal notranslate">a?</kbd></p></td>
</tr>
<tr class="row-even"><td colspan="4"><p><kbd class="kbd docutils literal notranslate">*</kbd></p></td>
<td><p>Las veces que sea (incluso ninguna)</p></td>
<td><p><kbd class="kbd docutils literal notranslate">a*</kbd></p></td>
</tr>
<tr class="row-odd"><td><p><kbd class="kbd docutils literal notranslate">\+</kbd></p></td>
<td colspan="3"><p><kbd class="kbd docutils literal notranslate">+</kbd></p></td>
<td><p>Al menos una vez</p></td>
<td><p><kbd class="kbd docutils literal notranslate">a+</kbd></p></td>
</tr>
<tr class="row-even"><td><p><kbd class="kbd docutils literal notranslate">\{n,m\}</kbd></p></td>
<td colspan="3"><p><kbd class="kbd docutils literal notranslate">{n,m}</kbd></p></td>
<td><p>Entre <em>n</em> y <em>m</em> veces. Puede omitirse
uno de los límites.</p></td>
<td><p><kbd class="kbd docutils literal notranslate">a{5,9}</kbd></p></td>
</tr>
<tr class="row-odd"><td><p>Agrupación</p></td>
<td><p>Ver grupos.</p></td>
<td><p><kbd class="kbd docutils literal notranslate">(?regex)</kbd></p></td>
<td colspan="2"><p><kbd class="kbd docutils literal notranslate">(?:regex)</kbd></p></td>
<td><p>Para modificar el alcance de un
operador</p></td>
<td><p><kbd class="kbd docutils literal notranslate">(?123)+</kbd></p></td>
</tr>
<tr class="row-even"><td><p>Alternativa</p></td>
<td><p><kbd class="kbd docutils literal notranslate">\|</kbd></p></td>
<td colspan="3"><p><kbd class="kbd docutils literal notranslate">|</kbd></p></td>
<td><p>O lo uno o lo otro</p></td>
<td><p><kbd class="kbd docutils literal notranslate">(?Blas|Luis)</kbd></p></td>
</tr>
<tr class="row-odd"><td><p>Principio</p></td>
<td colspan="4"><p><kbd class="kbd docutils literal notranslate">^</kbd></p></td>
<td><p>El patrón comienza</p></td>
<td><p><kbd class="kbd docutils literal notranslate">^a</kbd></p></td>
</tr>
<tr class="row-even"><td><p>Fin</p></td>
<td colspan="4"><p><kbd class="kbd docutils literal notranslate">$</kbd></p></td>
<td><p>El patrón acaba</p></td>
<td><p><kbd class="kbd docutils literal notranslate">a$</kbd></p></td>
</tr>
<tr class="row-odd"><td><p>Repr. universal</p></td>
<td colspan="4"><p><kbd class="kbd docutils literal notranslate">.</kbd></p></td>
<td><p>Cualquier carácter</p></td>
<td><p><kbd class="kbd docutils literal notranslate">.{2,3}</kbd></p></td>
</tr>
<tr class="row-even"><td><p>Escape</p></td>
<td colspan="4"><p><kbd class="kbd docutils literal notranslate">\</kbd></p></td>
<td><p>No interpretar un carácter especial</p></td>
<td><p><kbd class="kbd docutils literal notranslate">\.</kbd></p></td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>La versión de <a class="reference internal" href="03.manipulacion.html#awk"><span class="std std-ref">awk</span></a> que trae instalada <em>debian</em> por
defecto (<strong class="command">mawk</strong>) no soporta el cuantificador de llaves
<code class="code docutils literal notranslate"><span class="pre">{n,m}</span></code>.</p>
</div>
<p>Ilustremos estos patrones con algunos ejemplos:</p>
<ol class="arabic">
<li><p>¿Contiene el texto una o ninguna «<em>e</em>» <a class="footnote-reference brackets" href="#id18" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a>?</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;e?&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;abracadabra&quot;</span>
<span class="go">abracadabra</span>
</pre></div>
</div>
</li>
<li><p>¿El texto contiene al menos una «<em>e</em>»<a class="footnote-reference brackets" href="#id19" id="id8" role="doc-noteref"><span class="fn-bracket">[</span>8<span class="fn-bracket">]</span></a>?</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;e+&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;abracadabra&quot;</span>
</pre></div>
</div>
</li>
<li><p>¿El texto contiene al menos dos «<em>a</em>» seguidas?</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;a{2,}&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;abracadabra&quot;</span>
</pre></div>
</div>
</li>
<li><p>¿El texto comienza por «<em>a</em>»?</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;^a&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;abracadabra&quot;</span>
<span class="go">abracadabra</span>
</pre></div>
</div>
</li>
<li><p>¿El texto acaba en «<em>a</em>»?</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;a$&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;abracadabra&quot;</span>
<span class="go">abracadabra</span>
</pre></div>
</div>
</li>
<li><p>¿El texto empieza y acaba en «<em>a</em>»?</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;^a(?.*a)?$&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;abracadabra&quot;</span>
<span class="go">abracadabra</span>
</pre></div>
</div>
</li>
<li><p>¿El texto empieza por «<em>a</em>» y está constituida por <em>a</em> y otro carácter
cualquiera alternativamente?</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;^(?a.)+?$&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;abracadabra&quot;</span>
</pre></div>
</div>
<p>El patrón no concuerda porque el texto contiene dos grupos <em>-br-</em>.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>En realidad, el punto representa cualquier carácter lo cual
incluye a la propia «<em>a</em>». Por ese motivo, si la línea fuera «abaaac»
concordaría con el patrón y esa quizás no sea nuestro objetivo. Puede
volverse a este ejercicio, después de haber visto los patrones
extendidos, y sustituir <em>cualquier carácter</em> (o sea, el punto)
por <em>cualquier carácter que no sea una «a»</em>.</p>
</div>
</li>
<li><p>Como en el caso anterior, pero entre una «<em>a</em>» y la siguiente puede haber
hasta dos caracteres:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;^(?a..?)+a?$&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;abracadabra&quot;</span>
<span class="go">abracadabra</span>
</pre></div>
</div>
</li>
<li><p>¿El texto contiene al menos un carácter cualquier?</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;.&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;abracadabra&quot;</span>
<span class="go">abracadabra</span>
</pre></div>
</div>
</li>
<li><p>¿El texto contiene un punto?</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;\.&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;abracadabra&quot;</span>
</pre></div>
</div>
</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>Es muy importante tener presente que el patrón siempre concuerda
con el mayor número de caracteres posibles. Por ejemplo, la <em>regex</em> “.*:”
expresa una cantidad indeterminada de caracteres cualesquiera seguidas de dos
puntos. Si probamos a buscar dicho patrón en este ejemplo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;.*:&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="w"> </span><span class="s2">&quot;usuario:x:1000&quot;</span>
</pre></div>
</div>
<p>La concordancia será con la subcadena <em>usuario:x:</em> y no con <em>usuario:</em> puesto
que la segunda incluye a la primera<a class="footnote-reference brackets" href="#id20" id="id9" role="doc-noteref"><span class="fn-bracket">[</span>9<span class="fn-bracket">]</span></a>.</p>
</div>
</section>
<section id="patrones-avanzados">
<h2><span class="section-number">2.8.1.3. </span>Patrones avanzados<a class="headerlink" href="#patrones-avanzados" title="Link to this heading">¶</a></h2>
<table class="regex docutils align-default" id="id24">
<caption><span class="caption-text"><strong>Patrones avanzados</strong></span><a class="headerlink" href="#id24" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head" rowspan="2"><p>Operación</p></th>
<th class="head" colspan="2"><p>Operador</p></th>
<th class="head" rowspan="2"><p>Descripción</p></th>
<th class="head" rowspan="2"><p>Ejemplo</p></th>
</tr>
<tr class="row-even"><th class="head"><p>BRE</p></th>
<th class="head"><p>ERE/PCRE</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td rowspan="2"><p>Alternativa</p></td>
<td colspan="2"><p><kbd class="kbd docutils literal notranslate">[...]</kbd></p></td>
<td><p>Uno de los caracteres incluidos. Puede
indicarse un rango.</p></td>
<td><p><kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">[A</kbd>-<kbd class="kbd docutils literal notranslate">Za</kbd>-<kbd class="kbd docutils literal notranslate">z]</kbd></kbd></p></td>
</tr>
<tr class="row-even"><td colspan="2"><p><kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">[</kbd>^<kbd class="kbd docutils literal notranslate">...]</kbd></kbd></p></td>
<td><p>Un caracter que no sea ninguno de los incluidos</p></td>
<td><p><kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">[</kbd>^<kbd class="kbd docutils literal notranslate">A</kbd>-<kbd class="kbd docutils literal notranslate">Z]</kbd></kbd></p></td>
</tr>
<tr class="row-odd"><td rowspan="8"><p>Clases</p></td>
<td><p>Sin equivalencia</p></td>
<td><p><kbd class="kbd docutils literal notranslate">\w</kbd></p></td>
<td><p>Un carácter de palabra (letra, dígito o «<em>_</em>»).</p></td>
<td><p><kbd class="kbd docutils literal notranslate">\w+</kbd></p></td>
</tr>
<tr class="row-even"><td><p>Sin equivalencia</p></td>
<td><p><kbd class="kbd docutils literal notranslate">\W</kbd></p></td>
<td><p>Un carácter que no sea de palabra.</p></td>
<td><p><kbd class="kbd docutils literal notranslate">^\W</kbd></p></td>
</tr>
<tr class="row-odd"><td><p>Sin equivalencia</p></td>
<td><p><kbd class="kbd docutils literal notranslate">\d</kbd></p></td>
<td><p>Un dígito, o sea, [0-9]</p></td>
<td><p><kbd class="kbd docutils literal notranslate">\d{4}</kbd></p></td>
</tr>
<tr class="row-even"><td><p>Sin equivalencia</p></td>
<td><p><kbd class="kbd docutils literal notranslate">\D</kbd></p></td>
<td><p>Un carácter que no sea un dígito.</p></td>
<td><p><kbd class="kbd docutils literal notranslate">\D+</kbd></p></td>
</tr>
<tr class="row-odd"><td><p>Sin equivalencia</p></td>
<td><p><kbd class="kbd docutils literal notranslate">\s</kbd></p></td>
<td><p>Un carácter de espaciado, o sea, [ \t\r\b\f]</p></td>
<td><p><kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">\w</kbd>+<kbd class="kbd docutils literal notranslate">\s\w+</kbd></kbd></p></td>
</tr>
<tr class="row-even"><td><p>Sin equivalencia</p></td>
<td><p><kbd class="kbd docutils literal notranslate">\S</kbd></p></td>
<td><p>Un carácter que no sea de espaciado.</p></td>
<td><p><kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">\S</kbd>+<kbd class="kbd docutils literal notranslate">\s</kbd></kbd></p></td>
</tr>
<tr class="row-odd"><td><p>Sin equivalencia</p></td>
<td><p><kbd class="kbd docutils literal notranslate">[:nombre:]</kbd></p></td>
<td><p>Un carácter de la clase <em>nombre</em>.</p></td>
<td><p><kbd class="kbd docutils literal notranslate">[[:alpha:],;.]+</kbd></p></td>
</tr>
<tr class="row-even"><td><p>Sin equivalencia</p></td>
<td><p><kbd class="kbd docutils literal notranslate">[=x=]</kbd></p></td>
<td><p>Cualquier variante del caracter «<em>x</em>»</p></td>
<td><p><kbd class="kbd docutils literal notranslate">[[=a=]]</kbd></p></td>
</tr>
<tr class="row-odd"><td><p>Límite de palabra</p></td>
<td><p>Sin equivalencia</p></td>
<td><p><kbd class="kbd docutils literal notranslate">\b</kbd><a class="footnote-reference brackets" href="#id21" id="id10" role="doc-noteref"><span class="fn-bracket">[</span>10<span class="fn-bracket">]</span></a></p></td>
<td><p>Principio o fin de palabra.</p></td>
<td><p><kbd class="kbd docutils literal notranslate">\bdado\b</kbd></p></td>
</tr>
<tr class="row-even"><td rowspan="2"><p>Grupos</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">\(regex\)</span></code></p></td>
<td><p><kbd class="kbd docutils literal notranslate">(regex)</kbd></p></td>
<td><p>Captura un grupo</p></td>
<td rowspan="2"><p><kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">(\w</kbd>+<kbd class="kbd docutils literal notranslate">)\s</kbd>+<kbd class="kbd docutils literal notranslate">\1</kbd></kbd></p></td>
</tr>
<tr class="row-odd"><td colspan="2"><p><kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">\1,</kbd> <kbd class="kbd docutils literal notranslate">\2,</kbd> <kbd class="kbd docutils literal notranslate">...</kbd> <kbd class="kbd docutils literal notranslate">\9</kbd></kbd></p></td>
<td><p>Refiere un grupo previamente capturado</p></td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>Ni <a class="reference internal" href="02.busqueda.html#grep"><span class="std std-ref">grep</span></a> ni <a class="reference internal" href="03.manipulacion.html#sed"><span class="std std-ref">sed</span></a> entienden las clases
<code class="docutils literal notranslate"><span class="pre">\d</span></code> y <code class="docutils literal notranslate"><span class="pre">\D</span></code>. <strong class="program">bash</strong>, por su parte, sólo entiende las clases con
nombre.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>Las clases que se expresan con el escapado y un carácter (como
<code class="docutils literal notranslate"><span class="pre">\d</span></code> o <code class="docutils literal notranslate"><span class="pre">\s</span></code>) y la mayoría de los caracteres especiales (<code class="docutils literal notranslate"><span class="pre">.</span></code>, <code class="docutils literal notranslate"><span class="pre">*</span></code>,
etc.), pierden su significado cuando se incluyen entre corchetes. Por
ejemplo, <code class="code docutils literal notranslate"><span class="pre">[d.]</span></code> significa un carácter que es la barra invertida, la
letra <em>d</em> o el punto.</p>
</div>
<p>Algunas de las clases posibles que se expresan con la fórmula <code class="docutils literal notranslate"><span class="pre">[:nombre:]</span></code> son:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">[:any:]</span></code></dt><dd><p>Cualquier carácter. Equivale por tanto al punto (<code class="docutils literal notranslate"><span class="pre">.</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">[:alpha:]</span></code></dt><dd><p>Carácter alfabético (letra). Téngase en cuenta que esta expresión no es
equivalente a <code class="docutils literal notranslate"><span class="pre">[A-Za-z]</span></code>, puesto que en lenguas como el castellano <em>á*</em>
o <em>ü</em> son también letras.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">[:digit:]</span></code></dt><dd><p>Carácter numérito (un dígito).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">[:alnum:]</span></code></dt><dd><p>Carácter alfanumérico (una letra o un dígito).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">[:lower:]</span></code></dt><dd><p>Letra minúscula.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">[:upper:]</span></code></dt><dd><p>Letra mayúscula.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">[:punct:]</span></code></dt><dd><p>Signo de puntuación.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">[:space:]</span></code></dt><dd><p>Carácter de espaciado.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">[:ascii:]</span></code></dt><dd><p>Carácter <abbr title="American Standard Code for Information Interchange">ASCII</abbr>
(códigos 0-127).</p>
</dd>
</dl>
<p>Por su parte, que la clase <code class="docutils literal notranslate"><span class="pre">[=x=]</span></code> represente cualquier carácter que sea
variación del indicado, significa que <code class="docutils literal notranslate"><span class="pre">[=a=]</span></code> concordará con <em>a</em>, <em>A</em>, <em>á</em>,
<em>à</em>, etc.</p>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>Estas clases sólo pueden usarse dentro de una <em>alternativa</em>. Por
tanto, esto no es válido:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[:alpha:]</span>
</pre></div>
</div>
<p>pero esto sí:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[[:alpha:]]</span>
</pre></div>
</div>
</div>
<p>Ejemplo de uso:</p>
<ol class="arabic">
<li><p>¿Comienza el texto por una letra mayúscula?</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;^[A-Z]&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;Pepe Gotera y Otilio&quot;</span>
<span class="go">Pepe Gotera y Otilio</span>
</pre></div>
</div>
<p>No obstante, esto no hubiera funcionado si la mayúscula hubiera sido
acentuada. Es mejor esto:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;^[[:upper:]]&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;Pepe Gotera y Otilio&quot;</span>
<span class="go">Pepe Gotera y Otilio</span>
</pre></div>
</div>
<p>Existe otra solución más, pero requiere los patrones extendidos de <abbr title="Perl-Compatible Regular Expressions">PCRE</abbr>.</p>
</li>
<li><p>¿Acaba la frase en un texto que no es de palabra?</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;\W$&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;Pepe Gotera y Otilio&quot;</span>
</pre></div>
</div>
</li>
<li><p>La frase no contiene ningún digito:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;^\D+$&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;Pepe Gotera y Otilio&quot;</span>
<span class="go">Pepe Gotera y Otilio</span>
</pre></div>
</div>
</li>
<li><p>¿Hay alguna palabra que empieze por «o»?</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;\b[[=o=]]&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;Pepe Gotera y Otilio&quot;</span>
<span class="go">Pepe Gotera y Otilio</span>
</pre></div>
</div>
</li>
<li><p>¿El texto empieza y acaba con los mismos caracteres?</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;^(?.+).*\1$&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;abracadabra&quot;</span>
<span class="go">abracadabra</span>
</pre></div>
</div>
</li>
<li><p>La frase sólo contiene palabras que empiezan por <em>o</em>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;^\W*(?\b[[=o=]]\w*\W*)+$&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;¡Oh, Ovidio, obnubilido os oteo!&quot;</span>
<span class="go">¡Oh, Ovidio, obnubilido os oteo!</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="patrones-extendidos-pcre">
<span id="regex-pcre"></span><h2><span class="section-number">2.8.1.4. </span>Patrones extendidos (PCRE)<a class="headerlink" href="#patrones-extendidos-pcre" title="Link to this heading">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>El conocimiento de estos patrones no es estrictamente necesario
y rara vez tendremos que recurrir a ellos en las labores de administración.</p>
</div>
<table class="regex docutils align-default" id="id25">
<caption><span class="caption-text"><strong>Patrones extendidos</strong></span><a class="headerlink" href="#id25" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Operación</p></th>
<th class="head"><p>Operador</p></th>
<th class="head"><p>Descripción</p></th>
<th class="head"><p>Ejemplo</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="2"><p>Clases</p></td>
<td><p><kbd class="kbd docutils literal notranslate">\p{CLASS}</kbd></p></td>
<td><p>Un carácter de la clase unicode<a class="footnote-reference brackets" href="#id22" id="id11" role="doc-noteref"><span class="fn-bracket">[</span>11<span class="fn-bracket">]</span></a> <em>CLASS</em></p></td>
<td><p><kbd class="kbd docutils literal notranslate">\p{L}+</kbd></p></td>
</tr>
<tr class="row-odd"><td><p><kbd class="kbd docutils literal notranslate">\P{CLASS}</kbd></p></td>
<td><p>Un carácter que no sea de clase unicode <em>CLASS</em>.</p></td>
<td><p><kbd class="kbd docutils literal notranslate">\P{L}+</kbd></p></td>
</tr>
<tr class="row-even"><td rowspan="2"><p>Grupos</p></td>
<td><p><kbd class="kbd docutils literal notranslate">(?P&lt;nombre&gt;regex)</kbd></p></td>
<td><p>Captura un grupo, asignándole nombre</p></td>
<td rowspan="2"><p><kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">(?P&lt;palabra&gt;\w</kbd>+<kbd class="kbd docutils literal notranslate">)\s</kbd>+<kbd class="kbd docutils literal notranslate">(?P=palabra)</kbd></kbd></p></td>
</tr>
<tr class="row-odd"><td><p><kbd class="kbd docutils literal notranslate">(?P=nombre)</kbd></p></td>
<td><p>Refiere un grupo con nombre previamente capturado</p></td>
</tr>
<tr class="row-even"><td rowspan="2"><p><em>Lookahead</em></p></td>
<td><p><kbd class="kbd docutils literal notranslate">(?=regex)</kbd></p></td>
<td><p>Comprueba que esté la regex hacia adelante</p></td>
<td><p><kbd class="kbd docutils literal notranslate">w(?=a)</kbd></p></td>
</tr>
<tr class="row-odd"><td><p><kbd class="kbd docutils literal notranslate">(?!regex)</kbd></p></td>
<td><p>Comprueba que no esté la regex hacia adelante</p></td>
<td><p><kbd class="kbd docutils literal notranslate">w(?!a)</kbd></p></td>
</tr>
<tr class="row-even"><td rowspan="2"><p><em>Lookabehind</em></p></td>
<td><p><kbd class="kbd docutils literal notranslate">(?&lt;=regex)</kbd></p></td>
<td><p>Comprueba que esté la regex hacia atrás</p></td>
<td><p><kbd class="kbd docutils literal notranslate">(?&lt;=a)s</kbd></p></td>
</tr>
<tr class="row-odd"><td><p><kbd class="kbd docutils literal notranslate">(?&lt;!regex)</kbd></p></td>
<td><p>Comprueba que no esté la regex hacia atrás</p></td>
<td><p><kbd class="kbd docutils literal notranslate">(?&lt;!.)$</kbd></p></td>
</tr>
</tbody>
</table>
<p>Los patrones extendidos que proporciona <abbr title="Perl-Compatible Regular Expressions">PCRE</abbr> en algunos casos amplían las
posibilidades de los que ya hay en <abbr title="Extended Regular Expressions">ERE</abbr>. Tal es el caso de las nuevas clases
que pueden difinirse (se han incluido en las tablas las categorías unicode) o de
los grupos con nombre. Sin embargo, introducen también la definición de
<em>lookarounds</em> (<em>lookahead</em> y <em>lookbehind</em>) que son un concepto nuevo. Si
tuviéramos que traducir el concepto quizás lo haríamos como <em>vistazos</em>, unos
hacia adelante y otros hacia atrás.</p>
<p>Los <em>lookarounds</em> consisten en seleccionar texto en función de lo que pudiera
haber antes o después. Tomemos como ejemplo el último de los ejemplos del
apartado anterior:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;^(.+).*\1$&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;abracadabra&quot;</span>
</pre></div>
</div>
<p>en que determinamos si el texto empieza y acaba por los mismos caracteres.
Conseguimos nuestro objetivo, pero la comprobación implica que seleccionemos
todo el texto. De hecho, si usamos la opción <code class="docutils literal notranslate"><span class="pre">--color</span></code> comprobaremos que
<strong class="command">grep</strong> remarca todo en rojo. Ahora bien, quizás lo único que queríamos
seleccionar era el conjunto de caracteres que abren el texto y que sirven luego
para cerrarlo. Para esto precisamente sirven los <em>lookarounds</em>. En este caso:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span>-P<span class="w"> </span><span class="s1">&#39;^(.+)(?=.*\1$)&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;abracadabra&quot;</span>
</pre></div>
</div>
<p>En este caso, sólo veremos señalado con color <em>-abra-</em>, porque es eso  mismo lo
que hemos seleccionado. Lo que hay a continuación es simplemente para echar un
vistazo, sin llegar a seleccionarlo. Esto, además, es una de las características
de los <em>lookarounds</em> que no <em>consumen</em> caracteres. De hecho, esto queda
meridianamente claro, si añadimos una <em>c</em>, que es el siguiente carácter a
<em>abra</em>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$  </span>grep<span class="w"> </span>-P<span class="w"> </span><span class="s1">&#39;^(.+)(?=.*\1$)c&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;abracadabra&quot;</span>
</pre></div>
</div>
<p>Como se ve el <em>lookaround</em> comprobó los caracteres siguientes, pero no consumió
ninguno. De ahí que el siguiente caracter a <code class="docutils literal notranslate"><span class="pre">(.+)</span></code> sea la letra <em>c</em>.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>En teoría mirar hacia detrás y mirar hacia adelante funcionan del mismo
modo, pero en muchas implementaciones <em>lookbehind</em> tiene limitaciones que no
tiene <em>lookahead</em>. En algunos casos, la expresión regular que se usa debe
tener una longitud fija (como es el caso del propio <strong class="command">grep</strong>) mientras
que en otros se permite la longitud variable, lo que excluiría
cuantificadores como <code class="docutils literal notranslate"><span class="pre">*</span></code> o <code class="docutils literal notranslate"><span class="pre">+</span></code>.</p>
</div>
<p>Otra de las posibilidades que abren los <em>lookarounds</em>, es la de comprobar si un
texto <em>no</em> contiene determinada cadena, aunque la solución no es nada trivial.
Esto es imposible de hacer con los patrones <abbr title="Extended Regular Expressions">ERE</abbr>. Véanse los ejemplos que se
incluyen a continuación.</p>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>Algunas herramientas (<strong class="command">grep</strong>, por ejemplo)
permiten mediente opciones invertir la selección para que se muestren
las líneas que no contienen el patrón suministrado. De este modo, no
tendríamos que recurrir a los <em>lookarounds</em> de las expresiones <abbr title="Perl-Compatible Regular Expressions">PCRE</abbr>.</p>
</div>
<p>Ejemplos:</p>
<ol class="arabic">
<li><p>¿Comienza el texto por una letra mayúscula?</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span>-P<span class="w"> </span><span class="s1">&#39;^\p{Lu}&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;Pepe Gotera y Otilio&quot;</span>
<span class="go">Pepe Gotera y Otilio</span>
</pre></div>
</div>
</li>
<li><p>¿El texto empieza y acaba con los mismos caracteres?
(Úsense grupos con nombre)</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span>-P<span class="w"> </span><span class="s1">&#39;^(?&lt;princ&gt;.+).*(?P=princ)$&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;abracadabra&quot;</span>
<span class="go">abracadabra</span>
</pre></div>
</div>
</li>
<li><p>Seleccionar una frase si no contiene la palabra <em>Pepe</em>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span>-P<span class="w"> </span><span class="s1">&#39;^((?!Pepe).)*$&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;abracadabra&quot;</span>
</pre></div>
</div>
<p>La explicación de que esto funcione es que se busca que la frase este
constituida repetidamente por algo y ese algo es <kbd class="kbd docutils literal notranslate">(?!Pepe).</kbd>, es
decir, una <em>nada</em>, pero que no esté seguida por la palabra <em>Pepe</em> y un
carácter. Si la frase no contiene la palabra <em>Pepe</em> en algún lugar, esto
es cierto. Sin embargo, si la contiene, esto será falso cuando
<strong class="command">grep</strong> analice la primera <em>P</em> de <em>Pepe</em>, porque ese carácter es
una <em>nada</em> seguida de <em>Pepe</em> y luego un carácter: la propia <em>P</em>.</p>
<p>Podrámos pensar que <kbd class="kbd docutils literal notranslate">^(.(?!Pepe))*$</kbd> también es solución, pero no lo
es, proque falla en un caso:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span>-P<span class="w"> </span><span class="s1">&#39;^(.(?!Pepe))*$&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;Pepe Gotera y Otilio&quot;</span>
</pre></div>
</div>
<p>ya que la expresión significa, cualquier carácter seguido de <em>Pepe</em>. Pero
en el ejemplo escogido, no hay ningún carácter anterior a <em>Pepe</em>, puesto
que <em>Pepe</em> abre la cadena.</p>
<p>Otra solución posible es <kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">'</kbd>^<kbd class="kbd docutils literal notranslate">(.(?&lt;!Pepe))*$'</kbd></kbd>, o sea, comprobar si de
principio a fin hay un carácter seguido de una <em>nada</em> a la que antecede la
palabra <em>Pepe</em>. Esto también funciona en todos los caso. El problema es
que al usar una <em>lookbehind</em> estamos limitados a que la cadena que no
queramos encontrar tenga una longitud fija.</p>
</li>
</ol>
</section>
<section id="enlaces-de-interes">
<h2><span class="section-number">2.8.1.5. </span>Enlaces de interés<a class="headerlink" href="#enlaces-de-interes" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="http://www.regular-expressions.info">La «biblia»</a>.</p></li>
<li><p><a class="reference external" href="https://regexper.com/">regexpr</a>: Analizador de expresiones regulares.</p></li>
<li><p>Ejercicios:</p>
<ul>
<li><p><a class="reference external" href="http://www.mclibre.org/consultar/linux/modotexto/ejercicios_expresiones_regulares.html">Relación 1</a></p></li>
<li><p><a class="reference external" href="https://code-maven.com/exercise-regexes-part-1">Relación 2</a></p></li>
<li><p><a class="reference external" href="https://regexone.com">Ejercicios con autocorrección</a></p></li>
<li><p><a class="reference external" href="https://regexcrossword.com">Autodefinidos con expresiones regulares</a></p></li>
</ul>
</li>
</ul>
</section>
<section id="ejercicios-sobre-regex">
<h2><span class="section-number">2.8.1.6. </span>Ejercicios sobre regex<a class="headerlink" href="#ejercicios-sobre-regex" title="Link to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Para comprobar la validez de su solución puede utilizar la orden
<a class="reference internal" href="02.busqueda.html#grep"><span class="std std-ref">grep</span></a>:</p>
<ul>
<li><p>Sin opción específica podrá ensayar <abbr title="Basic Regular Expressions">BRE</abbr>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>grep<span class="w"> </span><span class="s1">&#39;\&lt;\(p\|P\)alabra\&gt;&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;Esto es una palabra aislada.&quot;</span>
</pre></div>
</div>
</li>
<li><p>Con la opción <code class="docutils literal notranslate"><span class="pre">-E</span></code> (o <strong class="command">egrep</strong>) podrá ensayar <abbr title="Extended Regular Expressions">ERE</abbr>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>grep<span class="w"> </span>-E<span class="w"> </span><span class="s1">&#39;\b(?p|P)alabra\b&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;Esto es una palabra aislada.&quot;</span>
</pre></div>
</div>
</li>
<li><p>Con la opción <code class="docutils literal notranslate"><span class="pre">-P</span></code> podrá ensayar <abbr title="Perl-Compatible Regular Expressions">PCRE</abbr>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>grep<span class="w"> </span>-P<span class="w"> </span><span class="s1">&#39;\b(:?p|P)alabra\b&#39;</span><span class="w"> </span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;Esto es una palabra aislada.&quot;</span>
</pre></div>
</div>
</li>
</ul>
</div>
<ol class="arabic">
<li><p>Usando únicamente los patrones básicos de los apuntes, indique las
expresiones regulares que:</p>
<ol class="loweralpha simple">
<li><p>Concuerdan con dos «e» separadas por un caracter cualquiera.</p></li>
<li><p>Concuerdan con dos «e» separadas por tres o cuatro caracteres cualquiera.</p></li>
<li><p>Concuerdan con frases que tiene al menos tres «e».</p></li>
<li><p>Concuerdan con frases que contiene la palabra «bola» ó «bolo».</p></li>
<li><p>Concuerdan con frases que empiezan por «a», tienen al menos una «J» y
acaban en «e».</p></li>
<li><p>Concuerdan con frases que contiene al menos dos veces la palabra «bola».</p></li>
<li><p>Concuerdan con frases que empiezan por «11» y acaban por «99».</p></li>
<li><p>Concuerdan con frases de tres palabras (considérese que no hay comas ni
puntos).</p></li>
<li><p>Concuerdan con frases de menos de 100 caracteres.</p></li>
<li><p>Concuerdan con frases que sólo tienen vocales.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Algunas soluciones, si nos restringimos al uso de los patrones
básicos, serán algo definicientes aún.</p>
</div>
</li>
<li><p>Repase las soluciones anteriores para mejorarlas usando también los patrones
avanzados.</p></li>
<li><p>Indique una expresión regular que:</p>
<ol class="loweralpha simple">
<li><p>contenga tres vocales seguidas.</p></li>
<li><p>contega tres vocales.</p></li>
<li><p>concuerde con una sucesión de números y caracteres asimilables al espacio.</p></li>
<li><p>concuerde con dos palabras.</p></li>
<li><p>concuerde con una frase de entre 20 y 30 caracteres.</p></li>
<li><p>contenga tres signos de interrogación.</p></li>
<li><p>contenga dos «a» seguidas y dos «e» seguidas en cualquier orden.</p></li>
</ol>
</li>
<li><p>Para la configuración de un servidor <a class="reference internal" href="../../07.serre/02.web/02.nginx/index.html#n-ginx"><span class="std std-ref">nginx</span></a> necesitamos
utilizar un patrón que concuerde con rutas que <strong>no</strong> empiezan por
<code class="file docutils literal notranslate"><span class="pre">/uploads</span></code> y que sí acaban por <em>.php</em>. Por tanto, concordará con rutas
tales como:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">/scripts/01/index.php</span>
<span class="go">/plugins/users.php</span>
</pre></div>
</div>
<p>pero no con rutas como:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">/plugins/readme.txt</span>
<span class="go">/uploads/2009/01/script.php</span>
</pre></div>
</div>
</li>
</ol>
<p class="rubric">Notas al pie</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id12" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>Véase <a class="reference external" href="http://www.regular-expressions.info/refflavors.html">regular-expressions.info</a>.</p>
</aside>
<aside class="footnote brackets" id="id13" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>En realidad, el parentesco es algo más lejano: el sucesor directo de <em>ed</em>
fue <a class="reference external" href="https://en.wikipedia.org/wiki/Ex_(text_editor)">ex</a>, y de éste lo fue
<strong class="program">vi</strong>. <strong class="program">vim</strong>, por su parte, es un clónico mejorado de éste
último (hay otros como <a class="reference external" href="http://elvis.the-little-red-haired-girl.org/">elvis</a>). El caso es que
<strong class="program">vi</strong> y sus clónicos tienen un modo <em>ex</em> para trabajar tal y como se
trabajaba con <strong class="program">ex</strong>.</p>
</aside>
<aside class="footnote brackets" id="id14" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">3</a><span class="fn-bracket">]</span></span>
<p>Modernamente el mismo ejecutable <strong class="program">grep</strong> soporta ambos tipos de
expresiones.</p>
</aside>
<aside class="footnote brackets" id="id15" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">4</a><span class="fn-bracket">]</span></span>
<p>Por ejemplo, el cuantificador <code class="docutils literal notranslate"><span class="pre">+</span></code> debe escaparse en <abbr title="Basic Regular Expressions">BRE</abbr> para ser
considerado un cuantificador y no simplemente el carácter <em>signo de la
suma</em>. En cambio, en <abbr title="Extended Regular Expressions">ERE</abbr> es al revés: a secas es el cuantificador y
<em>escapado</em> el signo.</p>
</aside>
<aside class="footnote brackets" id="id16" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id5">5</a><span class="fn-bracket">]</span></span>
<p><strong class="command">grep</strong> sí soporta expresiones <abbr title="Perl-Compatible Regular Expressions">PCRE</abbr>, pero <strong class="command">sed</strong>,
<strong class="command">awk</strong> y <strong class="program">bash</strong>, no, por lo que nos vemos limitados a las
<abbr title="Extended Regular Expressions">ERE</abbr>.</p>
</aside>
<aside class="footnote brackets" id="id17" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id6">6</a><span class="fn-bracket">]</span></span>
<p>La única orden básica del sistema que está limitada al uso de expresiones
<abbr title="Basic Regular Expressions">BRE</abbr> es <a class="reference internal" href="../../03.scripts/01.vistos.html#expr"><span class="std std-ref">expr</span></a>, útil cuando se programan <em>scripts</em> porque permite
resolver algunas situaciones para las que podríamos usar <strong class="program">grep</strong>,
pero ahorrándonos una tubería, esto es, una <em>subshell</em>.</p>
</aside>
<aside class="footnote brackets" id="id18" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id7">7</a><span class="fn-bracket">]</span></span>
<p>Si se ejecuta <strong class="command">grep</strong> con la opción <kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">-</kbd>-<kbd class="kbd docutils literal notranslate">color=auto</kbd></kbd>, se
resaltarán las coincidencias con el patrón. Puede ser un buen momento para
definirlo como alias:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">alias grep=&#39;grep --color=auto&#39;</span>
</pre></div>
</div>
</aside>
<aside class="footnote brackets" id="id19" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id8">8</a><span class="fn-bracket">]</span></span>
<p>Como la respuesta es no, <strong class="command">grep</strong> no devuelve nada.</p>
</aside>
<aside class="footnote brackets" id="id20" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id9">9</a><span class="fn-bracket">]</span></span>
<p>Obsérvese que los propios dos puntos también son un caracter cualquier.
Si se hubiera evitar que pudiera haber dos puntos intermedios, entonces habrá
que recurrir a ls rxpresiones <abbr title="Extended Regular Expressions">ERE</abbr>, que se verán  a continuación:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>grep<span class="w"> </span><span class="s1">&#39;[^:]*:&#39;</span><span class="o">&lt;&lt;&lt;</span><span class="s2">&quot;usuario:x:1000&quot;</span>
</pre></div>
</div>
</aside>
<aside class="footnote brackets" id="id21" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id10">10</a><span class="fn-bracket">]</span></span>
<p>Para las expresiones <abbr title="Extended Regular Expressions">ERE</abbr> también son válidas <code class="docutils literal notranslate"><span class="pre">\&lt;</span></code> para el comienzo y
<code class="docutils literal notranslate"><span class="pre">\&gt;</span></code> para el fichal de palabra. Pero, como no son reconocidas en las
expresiones <abbr title="Perl-Compatible Regular Expressions">PCRE</abbr>, no se indican.</p>
</aside>
<aside class="footnote brackets" id="id22" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id11">11</a><span class="fn-bracket">]</span></span>
<p>Las categorías unicode pueden consultarse en <a class="reference external" href="http://www.regular-expressions.info/unicode.html#category">este enlace</a>.</p>
</aside>
</aside>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Tabla de contenido</a></h3>
    <ul>
<li><a class="reference internal" href="#">2.8.1. Expresiones regulares</a><ul>
<li><a class="reference internal" href="#tipos-de-expresiones-regulares">2.8.1.1. Tipos de expresiones regulares</a></li>
<li><a class="reference internal" href="#patrones-basicos">2.8.1.2. Patrones básicos</a></li>
<li><a class="reference internal" href="#patrones-avanzados">2.8.1.3. Patrones avanzados</a></li>
<li><a class="reference internal" href="#patrones-extendidos-pcre">2.8.1.4. Patrones extendidos (PCRE)</a></li>
<li><a class="reference internal" href="#enlaces-de-interes">2.8.1.5. Enlaces de interés</a></li>
<li><a class="reference internal" href="#ejercicios-sobre-regex">2.8.1.6. Ejercicios sobre regex</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Tema anterior</h4>
    <p class="topless"><a href="index.html"
                          title="capítulo anterior"><span class="section-number">2.8. </span>Tratamiento de texto</a></p>
  </div>
  <div>
    <h4>Próximo tema</h4>
    <p class="topless"><a href="02.busqueda.html"
                          title="próximo capítulo"><span class="section-number">2.8.2. </span>Herramientas de búsqueda</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/02.conbas/10.texto/01.regex.rst.txt"
            rel="nofollow">Mostrar el código</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Búsqueda rápida</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Ir a" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="02.busqueda.html" title="2.8.2. Herramientas de búsqueda"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="index.html" title="2.8. Tratamiento de texto"
             >anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" ><span class="section-number">2. </span>Conceptos básicos</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" ><span class="section-number">2.8. </span>Tratamiento de texto</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2.8.1. </span>Expresiones regulares</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright CC BY 4.0, 2016-2024, José Miguel Sánchez Alés.
      Creado usando <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.3.7.
    </div>
  </body>
</html>