


<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>2.6.2. Gestión del software &#8212; documentación de Linuxnomicón - rolling</title>
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/language_data.js"></script>
    <script src="../../_static/translations.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <link rel="index" title="Índice" href="../../genindex.html" />
    <link rel="search" title="Búsqueda" href="../../search.html" />
    <link rel="next" title="2.6.3. Control de procesos" href="09.procesos.html" />
    <link rel="prev" title="2.6.1. Configuración del idioma" href="07.idioma.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="09.procesos.html" title="2.6.3. Control de procesos"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="07.idioma.html" title="2.6.1. Configuración del idioma"
             accesskey="P">anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" ><span class="section-number">2. </span>Conceptos básicos</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U"><span class="section-number">2.6. </span>Administración básica</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="gestion-del-software">
<span id="paqueteria"></span><h1><span class="section-number">2.6.2. </span>Gestión del software<a class="headerlink" href="#gestion-del-software" title="Enlazar permanentemente con este título">¶</a></h1>
<p>La mayor parte del software del que se constituyen los sistemas linux es software
libre, disponible en la red, de ahí que las distribuciones se encarguen de
seleccionarlo, prepararlo y facilitarlo. <em>debian</em> no es una excepción y dispone
de un sistema de paquetes <code class="docutils literal notranslate"><span class="pre">.deb</span></code> que facilitan la instalación, actualización y
borrado del software.</p>
<p>Antes de nada es importante tener claros algunos conceptos:</p>
<dl class="simple">
<dt><strong>Paquete</strong></dt><dd><p>Es una colección de ficheros relacionados entre sí por constituir una
aplicación o parte de una aplicación, entre los cuales pueden encontrarse
documentos, configuraciones, bibliotecas o ejecutables. Esta colección está
comprimida y empaqueta en un mismo fichero que en el caso de <em>debian</em> (y de
todas sus distribuciones derivadas) es <code class="docutils literal notranslate"><span class="pre">.deb</span></code> <a class="footnote-reference brackets" href="#id13" id="id1">1</a>.</p>
</dd>
<dt><strong>Repositorio</strong> o <strong>réplica</strong></dt><dd><p>Es un lugar (cdrom, servidor web, servidor ftp) donde se almacenan paquetes,
con el propósito de que el usuario acceda a ellos y, de forma sencilla,
los descargue e instale.</p>
</dd>
<dt><strong>Gestor de paquetes</strong></dt><dd><p>Es el sotfware encargado de gestionar la instalación, borrado y actualización
de software.</p>
</dd>
</dl>
<p>Por lo general, las aplicaciones de software libre no son autosuficientes, sino
que utilizan bibliotecas, también de software libre. Esto lleva a que entre unos
y otros paquetes existan dependencias, de modo que para que un paquete se
instalé es necesario que haya instalados antes otros paquetes que, a su vez,
pueden requerir otros paquetes, etc. Esto crea una compleja de red de
dependiencias que el gestor de paquetes se encarga de solucionar.</p>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>Este apartado es el más dependiente de la distribución hasta el
punto de que es absolutamente inútil su lectura si no se utiliza una
distribución basada en <em>debian</em>.</p>
</div>
<div class="section" id="vistazo-general">
<span id="paq-vistazo"></span><h2><span class="section-number">2.6.2.1. </span>Vistazo general<a class="headerlink" href="#vistazo-general" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>Este subapartado, en concreto, es absolutamente inútil, a menos que
se use <em>debian</em>. Si se utiliza una distribución basada en <em>debian</em>, pero no
<em>debian</em> misma, sáltelo sin escrúpulo.</p>
</div>
<p><em>debian</em> está dividida en tres grandes ramas:</p>
<ol class="arabic simple">
<li><p>La distribución estable (<em>stable</em>) orientada al uso en servidores,
durante cuya vida sólo recibe actualizaciones para correción de <em>bugs</em>
y problemas de seguridad.</p></li>
<li><p>La distribución en pruebas (<em>testing</em>), que se actualiza regularmente con
nuevo software y versiones más recientes del software ya existente.</p></li>
<li><p>La distribución inestable (<em>unstable</em>), que se actualiza aún con mayor
celeridad y que sirve como alimentación a la rama en pruebas.</p></li>
</ol>
<p>Por tradición<a class="footnote-reference brackets" href="#id14" id="id2">2</a>, las diferentes versiones de <em>debian</em> reciben el nombre de
un personaje de la serie de películas de animación <em>Toy Story</em>. La actual
estable, la versión 8, tiene por nombre <em>Jessie</em>; la de pruebas, <em>Stretch</em>; y la
inestable es la única que no cambia su nombre y se llama siempre <em>Sid</em> (el chico
que rompía los juguetes).</p>
<p>El ciclo de vida es el siguiente:</p>
<ol class="arabic simple">
<li><p>La distribución inestable recibe constantemente paquetes con las últimas
versiones de software.</p></li>
<li><p>También constantemente, la rama en pruebas va recibiendo paquetes
procedentes de la rama inestable, según se vea que no producen errores
graves en el sistema.</p></li>
<li><p>La rama estable, ajena a todas estas actualizaciones, mantiene las
versiones de los paquetes con la que salió. Sólo recibe actualizaciones
que corrijan problemas detectados.</p></li>
<li><p>En un momento determinado (últimamente es cada dos años), se congela la
rama en pruebas, de manera que deja de recibir actualizaciones de paquetes
procedentes de <em>sid</em> y el equipo de desarrollo se centra en la tarea de
eliminar <em>bugs</em> importantes. Este proceso es lento y suele llevar más de
seis meses.</p></li>
<li><p>Cuando no existen errores graves detectados, la rama estable pasa a ser
la vieja estable (<em>oldstable</em>), y la rama en pruebas congelada se desdobla
de manera que, por un lado, pasa a ser la estable, llevándose el nombre
consigo; y, por otro, se rebautiza con un nuevo personaje de <em>Toy Story</em> y
comienza de nuevo a admitir actualizaciones procedentes de <em>sid</em>.</p></li>
<li><p>Por su parte, la vieja inestable sigue recibiendo soporte oficial de
<em>debian</em> durante al menos tres años más, de manera que se llegue al menos
a los cinco años de vida: los dos que tuvo como distribución estable y
estos tres años adicionales de soporte.</p></li>
</ol>
<p>Además de las tres distribuciones de desarrollo principales, existen otras tres
de interés:</p>
<ol class="arabic simple">
<li><p>La vieja estable (<em>oldstable</em>) que ya se ha explicado.</p></li>
<li><p>La <em>experimental</em>, que no es una distribución completa, sino un
repositorio de pruebas don de se sube software nuevo o versiones nuevas de
software existente y que, por lo general, o no funciona o no lo hace
totalmente, pero se incluye como paso previo a poder entrar en la
distribución inestable.</p></li>
<li><p>Los <em>backports</em> para la versión estable, que es un repositorio con
software más moderno que aquel del que se dispone en la estable. Tengamos
en cuenta que entre la fase de congelación y el tiempo que tenga ya como
estable, nos podemos encontrar con software que tiene casi tres años de
antigüedad. Obviamente, la estabilidad y seguridad de los paquetes de la
<em>backports</em> no es comparable con la de aquellos que se encuentran en la
estable, así que el administrador debe sopesar si elige actualiza a
versiones más modernas corriendo el riesgo de encontrar bugs adicionales.</p></li>
</ol>
<p>Por otro lado, dentro de una distribución los paquetes se distribuyen en tres
componentes:</p>
<dl class="simple">
<dt><strong>main</strong></dt><dd><p>Paquetes que cumplen los requisitos para ser considerados por <em>debian</em>
software libre y que, además, sólo tienen dependencia de paquetes que
también pertenecen a este componente.</p>
</dd>
<dt><strong>contrib</strong></dt><dd><p>Paquetes que son software libre, pero tiene dependencia de paquetes que no
son software libre.</p>
</dd>
<dt><strong>non-free</strong></dt><dd><p>Paquetes que no son software libre a criterio de <em>debian</em>.</p>
</dd>
</dl>
</div>
<div class="section" id="gestores-de-debian">
<h2><span class="section-number">2.6.2.2. </span>Gestores de debian<a class="headerlink" href="#gestores-de-debian" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Para el control de paquetes, <em>debian</em> dispone de algunas herramientas:</p>
<dl>
<dt><strong>dpkg</strong></dt><dd><p>No es propiamente un gestor, sino la herramienta básica para la instalación,
borrado y actualización de un paquete y, consecuentemente, es utilizada por
los gestores de los que se hablará a continuación.</p>
<p>La usaremos cuando deseemos información particular sobre algún paquete.</p>
</dd>
<dt><strong>dselect</strong></dt><dd><p>Fue el primer <em>front-end</em> para la gestión de paquetes. Apenas se usa ya.</p>
</dd>
<dt><strong>aptitude</strong></dt><dd><p>Como <strong class="program">dselect</strong> provee de una interfaz para la gestión de paquetes,
aunque la mayor parte de los usuarios lo utilice pasando directamente las
opciones necesarias a través de la línea de comandos. De esta última forma,
tiene muchas similitudes con <strong class="program">apt-get</strong>. Tiene como ventaja sobre
este último que es capaz de hacer sugerencias, cuando por algún problema de
incompatibilidades no es posible instalar algún paquete o actualizar el
sistema completo.</p>
<p>A partir de <strong class="program">stretch</strong> no viene instalado de serie.</p>
</dd>
<dt><strong>apt-*</strong></dt><dd><p>Familia de órdenes (<strong class="command">apt-get</strong>, <strong class="command">apt-cache</strong>)) que gestiona
paquetes desde la línea de comandos. Fue durante mucho tiempo el gestor más usado.</p>
</dd>
<dt><strong>apt</strong></dt><dd><p>La familia anterior tiene el inconveniente de que, dependiendo de la
operación que queramos realizar, debemos usar uno u otro comando. Para paliar
esto, se creó la orden <strong class="command">apt</strong> a secas que reúne las operaciones más
habituales. Introduciremos su uso más adelante.</p>
</dd>
<dt><strong>packagekit</strong></dt><dd><p>Gestor de paquetes que pretende dar una interfaz unificada a los
gestores de paquetes de las distintas distribuciones. Está pensado
fundamentalmente para proveer una <abbr title="Application Programming Interface">API</abbr> con la que los entornos de escritorio puedan construir
aplicaciones gráficas de gestión de paquetes.</p>
</dd>
<dt><strong>synaptic</strong></dt><dd><p>Gestor de paquetes para el escritorio <strong class="program">gnome</strong>.</p>
</dd>
</dl>
</div>
<div class="section" id="operaciones-basicas">
<span id="paq-bas"></span><h2><span class="section-number">2.6.2.3. </span>Operaciones básicas<a class="headerlink" href="#operaciones-basicas" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Antes de realizar cualquier operación sobre paquetes es importante
cerciorarse de cómo se obtendrán. Lo habitual es que éstos se obtengan de
internet, lo que exige tener definidos los repositorios en el fichero
<code class="file docutils literal notranslate"><span class="pre">/etc/apt/sources.list</span></code>. Un contenido típico es el siguiente:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> /etc/apt/sources.list

<span class="go">deb http://ftp.cica.es/debian/ stretch main contrib non-free</span>
<span class="gp">#</span> deb-src http://ftp.cica.es/debian/ stretch main

<span class="go">deb http://security.debian.org/debian-security stretch/updates main</span>
<span class="gp">#</span> deb-src http://security.debian.org/debian-security stretch/updates main
</pre></div>
</div>
<p>Cada línea del fichero representa una fuente de obtención de paquetes y su
sintaxis es la siguiente:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">deb|deb-src URL distribución componente1 [componente2 [componente3]]</span>
</pre></div>
</div>
<p>En particular, el significado de cada campo es el siguiente.</p>
<ol class="arabic simple">
<li><p>Las línea que empiezan por <em>deb</em> representan fuentes para paquetes
compilados, mientras que las líneas que empiezan por <em>deb-src</em>, fuentes
para paquetes de código fuente que necesitan compilarse. Por lo
general, los paquetes compilados tienen un correspondiente sin compilar
por si deseamos hacer esta operación nosotros mismos. No es lo habitual
y, de hecho, en el ejemplo, están comentadas las líneas (anteponiendo
en ellas una almohadilla) para que no tengan efecto.</p></li>
<li><p>La URL indica la dirección del repositorio. Hay muchísimos repartidos por
todo el mundo. La lista completa puede obtenerse de <a class="reference external" href="https://www.debian.org/mirror/list">la página de debian</a>.</p></li>
<li><p>En el campo referente a la distribución puede incluirse o el nombre de la
distribución (el personaje de <em>Toy Story</em>) o el nombre de la rama
(<em>oldstable</em>, <em>stable</em>, <em>testing</em>, <em>unstable</em>, <em>experimental</em>, etc.)<a class="footnote-reference brackets" href="#id15" id="id3">3</a></p></li>
<li><p>El componente hace referencia a <em>main</em>, <em>contrib</em> o <em>non-free</em>. Lo
habitual es tener <em>main</em>, que contiene el grueso de los paquetes, y de
forma accesoria <em>contrib</em> y <em>non-free</em>.</p></li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>Si se hizo una instalación a partir de un cdrom, es muy probable que el
propio cdrom esté incluido como fuente. Es más que recomendable
eliminar la línea (o comentarla) para evitar el tedio de soportar que
el gestor nos pida el cdrom.</p>
</div>
<p>Además de este fichero, puedes crearse otros <code class="docutils literal notranslate"><span class="pre">.list</span></code> dentro de
<code class="file docutils literal notranslate"><span class="pre">/etc/apt/sources.list.d</span></code> con repositorios más específicos.</p>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>No es buena idea mezclar distintas ramas (testing, sid) en un mismo
sistema a menos que se haga con cuidado, lo cual implica hacer uso del
apt-pinning.</p>
</div>
<span class="target" id="apt-get"></span><p id="index-0">Cerciorados de que se dispone de un repositorio válido, la primera acción es
<em>bajar</em> la lista de paquetes disponibles o actualizarla si ya se realizó antes
la operación:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get update
</pre></div>
</div>
<p>Esta operación es recomendable hacerla siempre antes de instalar un paquete.</p>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>La acción anterior no actualiza el sistema, sólo la lista de paquetes
disponibles.</p>
</div>
<p>Actualizada la lista, es posible instalar un paquete individual o actualizar los
paquetes a su versión más reciente. Esta última acción tiene dos variables:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get upgrade
</pre></div>
</div>
<p>que hace una actualización <em>no traumática</em>, es decir, sólo realiza las
actualizaciones que no implican un cambio significativo en la composición de
nuestros paquetes instalados. Estos cambios significativos pueden deberse al
hecho de que le mantenedor de una aplicación haya decidido restructurar los
paquetes relacionados con ella, de manera que una actualización implique borrar
paquetes. Como consecuencia, pueden quedar paquetes retenidos sin actualizar. La
variante que provoca una actualización completa<a class="footnote-reference brackets" href="#id16" id="id4">4</a> es:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get dist-upgrade
</pre></div>
</div>
<p>Si nuestra intención es instalar <em>software</em>, por ejemplo, el paquete <a class="reference internal" href="../08.redirecciones/01basica.html#pv"><span class="std std-ref">pv</span></a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get install pv
</pre></div>
</div>
<p>Para desinstalar existen dos posibilidades:</p>
<ol class="arabic">
<li><p>Hacerlo de modo que no se eliminen los fichero de configuración:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get remove pv
</pre></div>
</div>
</li>
<li><p>Hacerlo sin que quede rastro de ellos:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get purge pv
</pre></div>
</div>
</li>
</ol>
<p>También es posible instalar y desinstalar en una misma acción añadiendo los
signos <kbd class="kbd docutils literal notranslate">+</kbd> o <kbd class="kbd docutils literal notranslate">-</kbd> tras el nombre del paquete:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span>. apt-get install vim+ vim-tiny-
</pre></div>
</div>
<p>Cuando un paquete se instala, es común que dependa de otros paquetes que no
están instalados y, como consecuencia que el sistema, se vea obligado a instalar
más de un paquete. En este caso, <strong class="command">apt-get</strong> nos informará y nos pedirá
que confirmemos la operación. Si deseamos responder sí automáticamente, basta
con incluir la opción <code class="docutils literal notranslate"><span class="pre">-y</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get install -y vim+ vim-tiny-
</pre></div>
</div>
<p>Del mismo modo, al desinstalar un paquete es posible que paquetes que se
instalaron solamente para satisfacer las dependencias de éste, queden sin razón
de ser en el sistema. Esto es conocido por el gestor porque cuando
instala un paquete lo marca como instalado <strong>manual</strong>mente o instalado
<strong>auto</strong>máticamente.</p>
<p>Por último, <kbd class="kbd docutils literal notranslate">apt-get install</kbd> permite también instalar paquetes
<code class="file docutils literal notranslate"><span class="pre">.deb</span></code> descargados previamente<a class="footnote-reference brackets" href="#id17" id="id5">5</a>. En este caso, para que la
herramienta distinga un archivo de un paquete de repositorio, es necesario
que en al expresar el archivo se incluya un path absoluto o relativo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get install /tmp/AutoFirma_1_6_5.deb
<span class="gp">#</span> apt-get install ./AutoFirma_1_6_5.deb
</pre></div>
</div>
<p>Cuando se hacen operaciones de borrado (<kbd class="kbd docutils literal notranslate">remove</kbd>) y purga (<kbd class="kbd docutils literal notranslate">purge</kbd>),
pero también de actualización (<kbd class="kbd docutils literal notranslate">upgrade</kbd>) o, incluso, de instalación (<kbd class="kbd docutils literal notranslate">install</kbd>),
puede ocurrir que resulten paquetes huérfanos, esto es, paquetes instalados
automáticamente, pero que ya son no son necesarios puesto que ningún paquete que
requiera de su presencia, está ya instalado. En este caso, existe un comando
específico para eliminarlos (que se nos sugerirá cuando el sistema detecte su
presencia):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get autoremove
</pre></div>
</div>
<p>Sin embargo, podemos ahorrarnos esta operación si incluímos la opción
<kbd class="kbd docutils literal notranslate">--autoremove</kbd> en cualquira de las operaciones anteriormente referidas:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get --autoremove remove nginx
</pre></div>
</div>
<p>Cuando se instala (<em>install</em>) o se actualiza el sistema (<em>upgrade</em>,
<em>dist-upgrade</em>), se van descargando los paquetes necesarios y almacenando dentro
de <code class="file docutils literal notranslate"><span class="pre">/var/cache/apt/archives</span></code>. Esa es la razón por la que si cancelamos la
orden y la proseguimos después, seguirá la descarga en el punto en que quedó. El
caso es que tras la instalación y configuración de los paquetes, estos no se
borran, sino que siguen en el directorio ocupando espacio. Por ese motivo, es
conveniente borrarlos mediante la orden:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get clean
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>Antes de instalar o actualizar es muy, muy conveniente actualizar
la lista de paquetes, porque podemos tenerla obsoleta y que los paquetes
existentes en el repositorio no sean los mismos que nuestro sistema cree. De
hecho, si intentamos instalar un paquete y el sistema nos informa de que éste
no existe, supuesto que tengamos bien la conexión a internet, la razón casi
segura es que estamos trabajando con una lista obsoleta y haya que
actualizarla.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Dado que que conveniente actualizar la lista antes de instalar es muy
común escribir líneas como esta:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get update <span class="o">&amp;&amp;</span> apt-get install -y pv <span class="o">&amp;&amp;</span> apt-get clean
</pre></div>
</div>
</div>
<span class="target" id="apt-cache"></span><p id="index-1">Para buscar paquetes adecuados para una determinada tarea son útiles dos
comandos:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-cache search términos de búsqueda
</pre></div>
</div>
<p>que nos devolverá los paquetes relacionados con los términos de búsqueda que se
incluyan. Y cuando se duda si instalar un paquete o no, puede mirarse la
descripción completa del mismo a través de:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-cache show pv
</pre></div>
</div>
<span class="target" id="apt"></span></div>
<div class="section" id="apt-como-alternativa">
<span id="index-2"></span><h2><span class="section-number">2.6.2.4. </span><strong class="program">apt</strong> como alternativa<a class="headerlink" href="#apt-como-alternativa" title="Enlazar permanentemente con este título">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>A pesar de que las explicaciones se hayan basado en
la familia de <a class="reference internal" href="#apt-get"><span class="std std-ref">apt-get</span></a>, por comodidad es preferible usar esta
herramienta.</p>
</div>
<p><strong class="program">apt</strong> es una buena alternativa para las operaciones definidas bajo el
epígrafe anterior: reducen a uno el comando y, además, ofrece un aspecto
mejorado (colores, barra de progresión, etc.). Las equivalencias son las
siguientes:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 52%" />
<col style="width: 48%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Familia <strong class="program">apt-*</strong></p></th>
<th class="head"><p>Orden <strong class="command">apt</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><kbd class="kbd docutils literal notranslate">apt-get install</kbd></p></td>
<td><p><kbd class="kbd docutils literal notranslate">apt install</kbd></p></td>
</tr>
<tr class="row-odd"><td><p><kbd class="kbd docutils literal notranslate">apt-get remove</kbd></p></td>
<td><p><kbd class="kbd docutils literal notranslate">apt remove</kbd></p></td>
</tr>
<tr class="row-even"><td><p><kbd class="kbd docutils literal notranslate">apt-get purge</kbd></p></td>
<td><p><kbd class="kbd docutils literal notranslate">apt purge</kbd></p></td>
</tr>
<tr class="row-odd"><td><p><kbd class="kbd docutils literal notranslate">apt-get update</kbd></p></td>
<td><p><kbd class="kbd docutils literal notranslate">apt update</kbd></p></td>
</tr>
<tr class="row-even"><td><p><kbd class="kbd docutils literal notranslate">apt-get upgrade</kbd></p></td>
<td><p><kbd class="kbd docutils literal notranslate">apt upgrade</kbd></p></td>
</tr>
<tr class="row-odd"><td><p><kbd class="kbd docutils literal notranslate">apt-get dist-upgrade</kbd></p></td>
<td><p><kbd class="kbd docutils literal notranslate">apt full-upgrade</kbd></p></td>
</tr>
<tr class="row-even"><td><p><kbd class="kbd docutils literal notranslate">apt-get autoremove</kbd></p></td>
<td><p><kbd class="kbd docutils literal notranslate">apt autoremove</kbd></p></td>
</tr>
<tr class="row-odd"><td><p><kbd class="kbd docutils literal notranslate">apt-cache search</kbd></p></td>
<td><p><kbd class="kbd docutils literal notranslate">apt search</kbd></p></td>
</tr>
<tr class="row-even"><td><p><kbd class="kbd docutils literal notranslate">apt-cache show</kbd></p></td>
<td><p><kbd class="kbd docutils literal notranslate">apt show</kbd></p></td>
</tr>
<tr class="row-odd"><td><p><kbd class="kbd docutils literal notranslate">dpkg -l</kbd></p></td>
<td><p><kbd class="kbd docutils literal notranslate">apt list</kbd></p></td>
</tr>
</tbody>
</table>
<p>A las posibilidades ya descritas al tratar <span class="xref std std-ref">apt-get</span>, se pueden hacer
algunas precisiones:</p>
<dl>
<dt><kbd class="kbd docutils literal notranslate">apt list</kbd></dt><dd><p>Tiene algunas diferencias con <kbd class="kbd docutils literal notranslate">dpkg -l</kbd>:</p>
<ul>
<li><p>Permite añadir, como <kbd class="kbd docutils literal notranslate">dpkg</kbd>, patrones para filtrar paquetes:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> apt list <span class="s1">&#39;z*&#39;</span> <span class="s1">&#39;h*&#39;</span>
</pre></div>
</div>
</li>
<li><p>Aunque devuelve todos los paquetes de la distribución, permite añadir
una opción para afinar:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--installed</span></code> sólo muestra paquetes instalados.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--upgradable</span></code> sólo muestra los paquetes con versión más reciente en los
repositorios.</p></li>
</ul>
<p>Por ejemplo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> apt list --installed <span class="s1">&#39;n*&#39;</span>
</pre></div>
</div>
</li>
</ul>
<blockquote>
<div><p>devuelve todos los paquetes instalados cuyo nombre empieza por «n».</p>
</div></blockquote>
</dd>
<dt><kbd class="kbd docutils literal notranslate">apt remove</kbd>, <kbd class="kbd docutils literal notranslate">apt purge</kbd>, <kbd class="kbd docutils literal notranslate">apt upgrade</kbd>, <kbd class="kbd docutils literal notranslate">apt full-upgrade</kbd></dt><dd><p>Como su respectivo equivalente, disponen de la opción <kbd class="kbd docutils literal notranslate">--autoremove</kbd>
para que junto al paquete que explícitamente se desea borrar, se borren
también los paquetes que dependen exclusivamente de éste y que se instalaron
automáticamente.</p>
</dd>
<dt><kbd class="kbd docutils literal notranslate">apt install</kbd></dt><dd><p>además de instalar los paquetes necesarios, borra de la caché los ficheros
descargados, por lo que no es necesario, limpiarla luego con <code class="docutils literal notranslate"><span class="pre">clean</span></code>.</p>
</dd>
</dl>
</div>
<div class="section" id="otras-operaciones">
<h2><span class="section-number">2.6.2.5. </span>Otras operaciones<a class="headerlink" href="#otras-operaciones" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Bajo este epígrafe se enumerarán algunas otras operaciones relacionadas con los
paquetes y la gestión de paquetes, pero que se realizan con menor frecuencia.</p>
<div class="section" id="acciones-sobre-paquetes">
<h3><span class="section-number">2.6.2.5.1. </span>Acciones sobre paquetes<a class="headerlink" href="#acciones-sobre-paquetes" title="Enlazar permanentemente con este título">¶</a></h3>
<p>La más socorrida es comprobar si un paquete está instalado o no:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> dpkg -l &lt;paquete&gt;
</pre></div>
</div>
<p>Puede sustituirse el nombre de paquete por una expresión como las que usa
<strong class="program">bash</strong>. Esto, por ejemplo, mostraría los paquetes cuyo nombre empieza
por la letra <em>p</em> seguida de <em>v</em> o <em>a</em><a class="footnote-reference brackets" href="#id18" id="id6">6</a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> dpkg -l <span class="s1">&#39;p[av]*&#39;</span>
</pre></div>
</div>
<p>Cuando un paquete está perfectamente instalado, la línea que lo describe debe
comenzar por <kbd class="kbd docutils literal notranslate">ii</kbd>.</p>
<p>También es útil conocer cuáles son los ficheros que contiene un paquete:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> dpkg -L &lt;paquete&gt;
</pre></div>
</div>
<p>y a qué paquete pertenece un determinado fichero. Por ejemplo, si quisiéramos
saber qué paquete instala el comando <a class="reference internal" href="../02.informacion/03.ficheros.html#cp"><span class="std std-ref">cp</span></a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> dpkg -S <span class="k">$(</span>which cp<span class="k">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Obsérvese que se ha preferido incluir la ruta completa
(<code class="file docutils literal notranslate"><span class="pre">/bin/cp</span></code>) frente al nombre solo (<a class="reference internal" href="../02.informacion/03.ficheros.html#cp"><span class="std std-ref">cp</span></a>). Esto es debido a que
la búsqueda funciona de tal forma que se devuelve un paquete como resultado
cuando contiene un fichero cuya ruta completa incluye el argumento. Por
tanto, si hubiéramos hecho <code class="code docutils literal notranslate"><span class="pre">dkpg</span> <span class="pre">-S</span> <span class="pre">cp</span></code> se habrían devuelto infinidad
de resultados.  Hágase la prueba.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>Desde <em>Buster</em> esta consulta no funcionará en ocasiones, cuando el
paquete haya instalado el ejecutable bajo <code class="file docutils literal notranslate"><span class="pre">/bin</span></code>. Esto es debido a que
a partir de esta versión <code class="file docutils literal notranslate"><span class="pre">/bin</span></code> es un enlace simbólico a <code class="file docutils literal notranslate"><span class="pre">/usr/bin</span></code>
y, en consecuencia, <a class="reference internal" href="../02.informacion/03.ficheros.html#which"><span class="std std-ref">which</span></a> devolverá como ruta esta segunda
localización. Es el caso del ejemplo sugerido.</p>
</div>
<p><strong class="command">dpkg</strong> puede también ser útil cuando instalamos a mano un paquete
<code class="docutils literal notranslate"><span class="pre">.deb</span></code> descargado, por ejemplo, de una web que lo proporciona en este
formato:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> dpkg -i paquete.deb
</pre></div>
</div>
<p>Cuando se obra así, muy comúnmente, tal paquete necesita de otros que no están
aún instalados en el sistema. Como de resolver dependencias se encarga
<strong class="command">apt-get</strong>, pero no <strong class="command">dpkg</strong>, el paquete quedará a medio instalar
e inusable. Para resolverlo y que automáticamente se instalen las dependencias
basta con hacer:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get -f install
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>En cualquier caso, es preferible la orden:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get install ./paquete.deb
</pre></div>
</div>
<p>que se encargará no sólo de instalar el paquete, sino de satisfacer sus
dependencias.</p>
</div>
</div>
<div class="section" id="acciones-sobre-el-sistema-de-paquetes">
<h3><span class="section-number">2.6.2.5.2. </span>Acciones sobre el sistema de paquetes<a class="headerlink" href="#acciones-sobre-el-sistema-de-paquetes" title="Enlazar permanentemente con este título">¶</a></h3>
<p>En ocasiones es conveniente saber cuáles son las dependencias de un paquete:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> apt-cache depends pv
<span class="go">pv</span>
<span class="go">  Depende: libc6</span>
<span class="go">  Sugiere: doc-base</span>
</pre></div>
</div>
<p>Y en otras qué paquetes dependen de él:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> apt-cache rdepends pv
<span class="go">pv</span>
<span class="go">Reverse Depends:</span>
<span class="go">  btrbk</span>
<span class="go">  xvidenc</span>
<span class="go">  h264enc</span>
<span class="go">  divxenc</span>
<span class="go">  vzctl</span>
</pre></div>
</div>
<span class="target" id="apt-mark"></span><p id="index-3">Hay un aspecto de los paquetes interesante también que aún no se ha mencionado:
las <em>marcas</em>, que operan en dos aspectos distintos:</p>
<ul class="simple">
<li><p>Un paquete puede estar marcado como de instalación <em>manual</em> o <em>automática</em>.
Lo primero quiere decir que el paquete fue explícitamente instalado,
mientras que lo segundo que se instaló para resolver una dependencia. Tiene
importancia, porque en el segundo caso, si se eliminan los paquetes de los
que depende el marcado como automáticamente instalado, el sistema nos
sugerirá que lo desinstantemos (con <code class="code docutils literal notranslate"><span class="pre">apt-get</span> <span class="pre">autoremove</span></code>). Estas
marcas las establece sin nuestra intervención el gestor de paquetes, pero
nosotros podemos forzar que el paquete la cambie.</p></li>
<li><p>Un paquete puede estar marcado como retenido (<em>hold</em>). Si es así, no se
actualizará ni se eliminará jamás.</p></li>
</ul>
<p>Para manejar las marcas, disponemos del comando <strong class="program">apt-mark</strong>:</p>
<ol class="arabic">
<li><p>Marca como automáticamente el paquete <em>pv</em>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-mark auto pv
</pre></div>
</div>
</li>
<li><p>Marca como instalado manualmente el paquete <em>pv</em>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-mark manual pv
</pre></div>
</div>
</li>
<li><p>Muestra todos los paquetes instalados manualmente:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> apt-mark showmanual
</pre></div>
</div>
</li>
<li><p>Muestra todos los paquetes instalados automáticamente:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> apt-mark showauto
</pre></div>
</div>
</li>
<li><p>Marca el paquete <em>pv</em> como retenido:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-mark hold pv
</pre></div>
</div>
</li>
<li><p>Desmarca el paquete <em>pv</em> como retenido:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-mark unhold pv
</pre></div>
</div>
</li>
<li><p>Muestra los paquetes retenidos:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-mark showhold
</pre></div>
</div>
</li>
</ol>
<p>Además, con <strong class="program">apt-mark</strong> podemos saber los paquetes instalados
(<em>showinstall</em>), eliminados (<em>showremove</em>) y purgados (<em>showpurge</em>).</p>
</div>
<div class="section" id="adicion-de-repositorios-extraoficiales">
<h3><span class="section-number">2.6.2.5.3. </span>Adición de repositorios extraoficiales<a class="headerlink" href="#adicion-de-repositorios-extraoficiales" title="Enlazar permanentemente con este título">¶</a></h3>
<p>En ocasión nos encontramos con la necesidad de añadir repositorios
extraoficiales que empaquetan alguna utilidad interesante. Por ejemplo, este que
permite instalar un paquete para <a class="reference external" href="https://www.google.es/earth/index.html">Google Earth</a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> cat &gt;&gt; /etc/apt/sources.list.d/google.list
<span class="go">deb http://dl.google.com/linux/earth/deb/ stable main</span>
</pre></div>
</div>
<p>El problema de ello es que los repositorios está firmados con <a class="reference internal" href="../../09.apendice/01.cryto/02.algo.html#gnupg-1"><span class="std std-ref">GPG</span></a> y
al intentar actualizar las listas de paquetes es bastante probable que nuestro
<strong class="program">apt</strong> no disponga de la clave pública y no tenga confianza. En
consecuencia, se malogrará la descarga de la lista de paquetes disponibles en el
repositorio y nos quedaremos sin poder instalar los paquetes que proporciona:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt update
<span class="go">[...]</span>
<span class="go">W: Error de GPG: http://dl.google.com/linux/earth/deb stable Release: Las firmas siguientes</span>
<span class="go">no se pudieron verificar porque su clave pública no está disponible: NO_PUBKEY 1397BC53640DB551</span>
<span class="go">E: El repositorio «http://dl.google.com/linux/earth/deb stable Release» no está firmado.</span>
<span class="go">N: No se puede actualizar de un repositorio como este de forma segura y por tanto</span>
<span class="go">está deshabilitado por omisión.</span>
<span class="go">[...]</span>
</pre></div>
</div>
<p>Para solucionarlo basta con importar la clave pública requerida a nuestro
anillo personal de claves y, hecho esto, exportarla al anillo de
<strong class="program">apt</strong>. Use el identificador que proporciona el propio <strong class="program">apt</strong>
(en el ejemplo, <strong>1397BC53640DB551</strong>):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> gpg --keyserver keys.gnupg.net --recv-key 1397BC53640DB551
<span class="gp">#</span> gpg -a --export 1397BC53640DB551 <span class="p">|</span> apt-key add -
</pre></div>
</div>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>Consulte cómo funciona el <a class="reference internal" href="../../09.apendice/01.cryto/02.algo.html#gnupg-1"><span class="std std-ref">cifrado GPG</span></a>.</p>
</div>
</div>
<div class="section" id="mezclando-ramas-y-arquitecturas">
<h3><span class="section-number">2.6.2.5.4. </span>Mezclando ramas y arquitecturas<a class="headerlink" href="#mezclando-ramas-y-arquitecturas" title="Enlazar permanentemente con este título">¶</a></h3>
<p>Lo habitual es que nuestro sistema esté constituido por paquetes de una sola
arquitectura (muy pòsiblemente, <em>amd64</em>) y una única rama (<em>stable</em>, <em>testing</em>,
etc.). En ocasiones, sin embargo, necesitamos mezclar, lo cual es posible, pero
exige ser bastante cuidadoso.</p>
<div class="section" id="mezcla-de-arquitecturas">
<h4><span class="section-number">2.6.2.5.4.1. </span>Mezcla de arquitecturas<a class="headerlink" href="#mezcla-de-arquitecturas" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Lo normal es disponer de un sistema con paquetes compilados para <em>amd64</em>, pero
puede darse el caso de que necesitemos instalar un paquete que no es <em>software</em>
libre y sólo está compilado para 32 <em>bits</em> (<em>i386</em>). Dado que son arquitecturas
compatibles (un ejecutable de 32 <em>bits</em> se puede ejecutar en una plataforma de
64 <em>bits</em>), no hay ningún problema con el programa; el problema real es que este
programa necesitara muy probablemente librerías de 32 <em>bits</em> que se encuentran
en otros paquetes; y, aunuqe dispongamos de las correspondientes de 64 <em>bits</em>,
no servirá.</p>
<p>Para conocer la arquitectura principal de nuestro sistema podemos ejecutar lo
siguiente:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> dpkg --print-architecture
<span class="go">amd64</span>
</pre></div>
</div>
<p>Así que si quisiéramos añadir la arquitectura <em>i386</em>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> dpkg --add-architecture I386
</pre></div>
</div>
<p>Para que el cambio tenga efecto, es necesario refrescar la lista de paquetes:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get update
</pre></div>
</div>
<p>De lo cual resulta:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> dpkg --print-architecture
<span class="go">amd64</span>
<span class="gp">$</span> dpkg --print-foreign-architectures
<span class="go">i386</span>
</pre></div>
</div>
<p>Es decir, tenemos un sistema cuya arquitectura principal es <em>amd64</em>, y que tiene
como arquitectura adicional <em>i386</em>. Esto significa que cuando pidamos instalar o
eliminar un paquete, se presupondrá que nos referimos a la arquitectura <em>amd64</em>
y que sólo en caso de que especifiquemos instalaremos (o eliminaremos) un
paquete para arquitectura <em>i386</em>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get install pv:i386
</pre></div>
</div>
<p>Si en algún momento quiere eliminarse la arquitectura adicional, se deben borrar
todos los paquetes para tal arquitectura, antes de eliminarla:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get purge <span class="s1">&#39;.*:i386&#39;</span>
<span class="gp">#</span> dpkg --remove-architecture I386
</pre></div>
</div>
</div>
<div class="section" id="mezcla-de-ramas">
<h4><span class="section-number">2.6.2.5.4.2. </span>Mezcla de ramas<a class="headerlink" href="#mezcla-de-ramas" title="Enlazar permanentemente con este título">¶</a></h4>
<p>Otra posibilidad de mezcla es la de mezclar distintas ramas. Debe haber una
verdadera razón para ello y no dejarse a la ligera, porque puede traer
problemas.</p>
<p>Antes de embarcarse en ello, es necesario conocer precisamente cuál es el
criterio que sigue <em>debian</em> para instalar unos paquetes frente a otros:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> man apt_preferences
</pre></div>
</div>
<p>Aquí expondremos de ello un pequeño resumen y algunas reglas útiles.</p>
<p>En principio, si en nuestro <code class="file docutils literal notranslate"><span class="pre">/etc/apt/sources.list</span></code> sólo incluímos
repositorios de una rama (que es lo habitual), obviamente, sólo se instalarán
repositorios de tal rama, puesto que los únicos paquetes de los que tendrá
conocimiento nuestro sistema serán sus paquetes. Ahora bien, ¿qué ocurre si
nuestro <em>sources.list</em> es el siguiente?:</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">### Distribución estable</span>
deb http://ftp.cica.es/debian/ jessie main

<span class="c1"># Acutalizaciones y seguridad</span>
deb http://ftp.cica.es/debian/ jessie-updates main
deb http://security.debian.org/ jessie/updates main

<span class="c1">### Backports</span>
deb http://httpredir.debian.org/debian jessie-backports main

<span class="c1">### Distribución en pruebas</span>
<span class="c1"># deb http://ftp.cica.es/debian/ stretch main</span>
</pre></div>
</td></tr></table></div>
<p>Como vemos, tenemos en el sistema la rama estable junto a sus actualizaciones,
los backports y, además, la distribución de pruebas. Un batiburrillo, que hay
que saber gestionar.</p>
<p>Para pronosticar qué ocurre, es necesario saber primero que todos los paquetes
llevan asociada una <em>prioridad</em>, que se calcula según las siguientes reglas:</p>
<table class="docutils align-default" id="id25">
<caption><span class="caption-text"><strong>Prioridades predefinidas</strong></span><a class="headerlink" href="#id25" title="Enlace permanente a esta tabla">¶</a></caption>
<colgroup>
<col style="width: 13%" />
<col style="width: 87%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Prioridad</p></th>
<th class="head"><p>Paquetes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>1</strong></p></td>
<td><p>Ramas<a class="footnote-reference brackets" href="#id19" id="id7">7</a> con la opción <kbd class="kbd docutils literal notranslate">NotAutomatic: yes</kbd><a class="footnote-reference brackets" href="#id20" id="id8">8</a>, pero sin la
opción <kbd class="kbd docutils literal notranslate">ButAutomaticUpgrades: yes</kbd>.</p></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p><strong>100</strong></p></td>
<td><p>Paquetes instalados.</p></td>
</tr>
<tr class="row-even"><td><p>Ramas<a class="footnote-reference brackets" href="#id21" id="id9">9</a> con las opciones <kbd class="kbd docutils literal notranslate">NotAutomatic: yes</kbd> y
<kbd class="kbd docutils literal notranslate">ButAutomaticUpgrades: yes</kbd>.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>500</strong></p></td>
<td><p>Ramas que no sean las anteriores ni la rama objetivo. Lo habitual es
la rama objetivo no esté definida.</p></td>
</tr>
<tr class="row-even"><td><p><strong>990</strong></p></td>
<td><p>Rama objetivo.</p></td>
</tr>
</tbody>
</table>
<p>Y las reglas para decidir si un paquete se instala o no son estas:</p>
<ol class="arabic simple">
<li><p>Se instala el paquete con mayor prioridad, aunque para que se instale un
paquete de una versión más reciente a la instalada, se exige además que
tenga una prioridad de al menos <em>1000</em>.</p></li>
<li><p>Si coinciden las prioridades, se instala el paquete más reciente.</p></li>
</ol>
<p>Sabido esto, podemos volver a la nuestro <em>sources.list</em> de ejemplo. Resulta que
en él todas las ramas tienen prioridad <em>500</em>, excepto la de <em>backports</em> que
tiene prioridad <em>100</em>. Consecuentemente, cada vez que intentemos instalar un
paquete, se evitará la rama <em>backports</em> y se instalará aquel más reciente, que
se encontrarán normalmente en las ramas de actualización y seguridad.</p>
<p>¿Cómo podemos entonces instalar un paquete de <em>backports</em>? Muy sencillo: basta
con hacer tal rama, la rama objetivo para esa instalación. Eso se hace añadiendo
la opción <code class="docutils literal notranslate"><span class="pre">-t</span></code> a la orden:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get install -t jessie-backports nginx
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>Este comando no implica sólo instalar el paquete <em>nginx</em> de
<em>backports</em>, sino él y todas sus dependencias. Si entre sus dependencias hay
librerías, incluso las más básicas, entonces se instalarán (o actualizarán)
también. Por lo general, <em>backports</em> está pensada para que haya versiones
más recientes de software, pero que estas versiones se hayan
compilado con las mismas librerías básicas que usa la estable. Por tanto, al
realizar esta operación, sólo actualizaremos los paquetes más intimamente
ligados con la aplicación que queremos actualizar. Pero esto no es aplicable
a la rama <em>testing</em> ni a la <em>inestable</em>.</p>
</div>
<p>El fichero, tal y como está, guarda bastante equilibrio: instalaremos paquetes
de la estable, convenientemente actualizada con paquetes de seguridad, y sólo si
explícitamente pedimos la actualización de un paquete que haya en <em>backports</em> se
llevará a cabo. Ahora bien, ¿qué ocurre si descomentamos la línea referente a la
rama en pruebas? Que el equilibrió se romperá: los paquetes de la rama en
pruebas también tienen prioridad <em>500</em>, pero en su mayoría serán versiones más
recientes y que, además, están en constante actualización. La consecuencia será
que si actualizamos todo el sistema, pasaremos de tener la rama estable a
tener la rama en pruebas y que todos los paquetes que instalemos serán de esta
última versión. Es decir, que el resto de líneas de <em>sources.list</em> sobrarán por
completo.</p>
<p>Para tener mayor control, <em>apt</em> permite alterar las prioridades predefinidas.
Esto se hace modificando (o creando el fichero <code class="file docutils literal notranslate"><span class="pre">/etc/apt/preferences</span></code><a class="footnote-reference brackets" href="#id22" id="id10">10</a>), dentro del cual se incluyen estructuras del siguiente tipo separadas por
una línea en blanco:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Package: &lt;expr_paquete&gt;</span>
<span class="go">Pin: &lt;selector&gt;</span>
<span class="go">Pin-Priority: &lt;N&gt;</span>
</pre></div>
</div>
<p>es decir, en cada estructura definimos una expresión que escoge los paquetes
para los que se hace la definición, un selector que indica para qué ejemplares
del paquete (versión, rama a la que pertenece, etc.) y, por último, la prioridad
que le pensamos otorgar.</p>
<dl>
<dt>Línea <strong>Package</strong></dt><dd><p>Para <em>expresar el paquete</em> hay varias posibilidades. Las dos más simples son
indicar el nombre exacto del paquete o escribir un <kbd class="kbd docutils literal notranslate">*</kbd>, que (como es
lo habitual) significa cualquier paquete. Las otras dos son:</p>
<ul class="simple">
<li><p>Espresiones <em>glob</em>, esto es, las expresiones que se usan en <strong class="program">bash</strong>.
Por ejemplo, <kbd class="kbd docutils literal notranslate">python3-*</kbd> haría referencia a todos los paquetes que
comienza por <code class="docutils literal notranslate"><span class="pre">python3-</span></code>.</p></li>
<li><p><a class="reference internal" href="../10.texto/01.regex.html#regex"><span class="std std-ref">Expresiones regulares</span></a> que deben delimitarse entre barras.
POr ejemplo, <kbd class="kbd docutils literal notranslate">/py/</kbd> refiere todos los paquetes que contengan la
subcadena <code class="docutils literal notranslate"><span class="pre">py</span></code>.</p></li>
</ul>
</dd>
<dt>Línea <strong>Pin</strong></dt><dd><p>La <em>selección</em> del ejemplar del paquete la determina el contenido del campo
<em>Pin</em>. Hay diferentes criterios para realizar esta selección:</p>
<ul>
<li><p>La versión del propio paquete:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Pin: version 1.10*</span>
</pre></div>
</div>
<p>En este caso, no se especifica una versión concreta exacta, sino cualquier
version que empiece por <em>1.10</em>.</p>
</li>
<li><p>El origen del paquete, esto es, de dónde se descarga:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Pin: origin &quot;ftp.cica.es&quot;</span>
</pre></div>
</div>
<p>Si se usa una cadena vacía (<kbd class="kbd docutils literal notranslate">origin &quot;&quot;</kbd>), el paquete se descarga de un
sitio local.</p>
</li>
<li><p>Las propiedades de la distribución a la que pertenece el paquete. Son
diversas y se pueden consultar el los ficheros <code class="docutils literal notranslate"><span class="pre">*Release</span></code>, citados
en una de las notas al pie. Se enumeran aquí algunas propiedades,
expresando el nombre del campo con que se enuncian en tal fichero:</p>
<ul>
<li><p>La rama con su nombre genérico*stable*, <em>testing</em>, etc. (<em>Suite</em>):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Pin: release a=testing</span>
</pre></div>
</div>
</li>
<li><p>La rama con su nombre clave (<em>Codename</em>):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Pin: release n=stretch</span>
</pre></div>
</div>
</li>
<li><p>La versión de la distribución (<em>Version</em>):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Pin: release v=8</span>
</pre></div>
</div>
<p>En este caso, la versión 8. Sólo es válido para la rama estable, porque
sólo esta tiene asignado un número de versión.</p>
</li>
<li><p>El componente:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Pin: release c=main</span>
</pre></div>
</div>
</li>
<li><p>La distribución (<em>debian</em>, <em>ubuntu</em>) relacionada con dos etiquetas
<em>Label</em>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Rin: release l=Ubuntu</span>
</pre></div>
</div>
<p>y <em>Origin</em>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Rin: release o=Origin</span>
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</dd>
<dt>Línea <strong>Pin-Priority</strong>:</dt><dd><p>Símplemente hay que indicar la prioridad numérica. Para fijar una adecuada,
conviene tener en cuenta que, de acuerdo con las prioridades predeterminadas,
el comportamiento de un paquete ante la instalación o la actualización será
el siguiente (<em>P</em> es su prioridad):</p>
<dl class="simple">
<dt><strong>P&gt;=1000</strong>:</dt><dd><p>El paquete se instala en cualquier caso, incluso aunque haya una versión
instalada más reciente.</p>
</dd>
<dt><strong>990&lt;=P&lt;1000</strong>:</dt><dd><p>El paquete se instala por encima incluso de los provenientes de la rama
objetivo. No lo hará unicamente si hay una versión más reciente instalada.</p>
</dd>
<dt><strong>500&lt;=P&lt;990</strong>:</dt><dd><p>El paquete se instala a menos que la versión instalada sea más reciente o
haya un ejemplar disponible en la rama objetivo.</p>
</dd>
<dt><strong>100&lt;=P&lt;500</strong>:</dt><dd><p>Sólo se instala el paquete si no hay otro ejemplar disponible en alguna rama
y es más reciente que el instalado.</p>
</dd>
<dt><strong>0&lt;P&lt;100</strong>:</dt><dd><p>Sólo se instala si no hay ninguna versión disponible ni instalada.</p>
</dd>
<dt><strong>P&lt;0</strong>:</dt><dd><p>El paquete no se instalará jamás.</p>
</dd>
</dl>
</dd>
</dl>
<p>Teniendo en cuenta todo esto, una posibilidad para conciliar tener a la vez como
fuente <em>testing</em> y <em>stable</em> sería esta:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Package: *</span>
<span class="go">Pin: release a=testing</span>
<span class="go">Pin-Priority: 99</span>
</pre></div>
</div>
<p>De este modo, al hacer:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get install paquete
</pre></div>
</div>
<p>Sólo se instalaría un paquete de la rama <em>en pruebas</em> si no estuviera disponible
en la rama estable. Eso sí, si necesitara versiones de librerías posteriores a
las que se encuentran en  la estable, no se llegaría a instalar, porque no se
podría satisfacer sus dependencias. Si en este caso hiciéramos:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get install -t testing paquete
</pre></div>
</div>
<p>Esto sí se instalaría a costa de instalar también versiones en pruebas de
ciertas librerías. Esto, sin embargo, no es recomendable, porque pueda dar pie
a problemas. En este caso, sería más recomendable descargar el paquete fuente de
<em>testing</em> e intentar compilarlo con las librerías de la estable.</p>
<span class="target" id="apt-show-versions"></span><p id="index-4">Por último, cuando  se mezclan distintas ramas es conveniente saber para un
paquete qué versión proporciona cada una de ellas. Para ello es muy útil el
comando <strong class="program">apt-show-versions</strong> disponible en el paquete del mismo nombre
(no viene instalado por defecto):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> apt-show-versions -a -p pv
<span class="go">pv:amd64 1.5.7-2 install ok installed</span>
<span class="go">pv:amd64 1.5.7-2 stable  ftp.cica.es</span>
<span class="go">No stable-updates version</span>
<span class="go">pv:amd64 1.6.0-1 testing ftp.cica.es</span>
<span class="go">pv:amd64/stable 1.5.7-2 uptodate</span>
</pre></div>
</div>
<p>Se ha ejecutado la orden en un sistema que se provee de la estable y <em>testing</em> y
con las preferencias ajustadas tal y como se ha indicado (los paquetes de
<em>testing</em> tiene prioridad <em>99</em>). En estas condiciones la orden nos informa de
que tenemos intalada la versión <em>1.5.7</em>, que es justamente, la de la versión
estable; que hay otra versión más moderna (<em>1.6.0</em>) en <em>testing</em>, pero que
estamos actualizados (<em>uptodate</em>). Y lo estamos justamente por el hecho de haber
definido la prioridad.</p>
</div>
</div>
</div>
<div class="section" id="compilacion-de-paquetes">
<h2><span class="section-number">2.6.2.6. </span>Compilación de paquetes<a class="headerlink" href="#compilacion-de-paquetes" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Aunque no es algo habitual y además resulta engorroso de mantener<a class="footnote-reference brackets" href="#id23" id="id11">11</a>, es
bastante sencillo compilar una código fuente para obtener los paquetes
compilados. Lo primero es añadir a <code class="file docutils literal notranslate"><span class="pre">/etc/apt/sources.list</span></code> la línea que
nos permite acceder a los paquetes de las fuentes. Por ejemplo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">deb-src http://ftp.cica.es/debian/ stretch main</span>
</pre></div>
</div>
<p>Y, hecho esto, se deberá actualizar la lista de paquetes:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get update
</pre></div>
</div>
<p>y añadir las herramientas para compilar:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get install build-essential
</pre></div>
</div>
<p>Con todo esto la compilación es muy sencilla. Requiere descargar los paquetes
que exige la compìlación del que pretendemos compilar<a class="footnote-reference brackets" href="#id24" id="id12">12</a> (supongamos que <em>pv</em>):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get build-dep pv
</pre></div>
</div>
<p>y descargar el paquete con el código fuente:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> <span class="nb">cd</span> /usr/src
<span class="gp">#</span> apt-get <span class="nb">source</span> pv
</pre></div>
</div>
<p>E ir al directorio donde se almacena y compilar:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> <span class="nb">cd</span> pv-1.6.0
<span class="gp">#</span> dpkg-buildpackage -us -uc
</pre></div>
</div>
<p>Si la compilación acaba sin problemas, el paquete <code class="docutils literal notranslate"><span class="pre">.deb</span></code> estará en el
directorio superior y bastará con instalarlo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> <span class="nb">cd</span> ..
<span class="gp">#</span> dpg -i pv_1.6.0-1_amd64.deb
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Puede ocurrir que la compilación del paquete genere varios paquetes
compilados.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>El directorio <code class="file docutils literal notranslate"><span class="pre">/usr/src</span></code> quedará lleno de ficheros relacionados
con la compilación y el código fuente que pueden borrarse cuando acaba el
proceso.</p>
</div>
<span class="target" id="dpkg-repack"></span><p id="index-5">No relacionado con la compilación, pero sí con la obtención de un paquete
<code class="docutils literal notranslate"><span class="pre">.deb</span></code> es el caso en que queremos reconstruir el paquete a partir de los
ficheros que tenemos instalados en el disco duro, bien porque no encontramos
cómo hacernos con el <code class="docutils literal notranslate"><span class="pre">.deb</span></code> original, bien porque hemos cambiado sus ficheros
de configuración y queremos empaquetarlo en el estado en el que está en nuestro
sistema para trasladarlo a otro. En ese caso es muy útil la orden
<strong class="program">dpkg-repack</strong> que hay que instalar primero:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get install dpkg-repack
<span class="gp">#</span> dpkg-repack pv
</pre></div>
</div>
</div>
<div class="section" id="destripando-paquetes">
<h2><span class="section-number">2.6.2.7. </span>Destripando paquetes<a class="headerlink" href="#destripando-paquetes" title="Enlazar permanentemente con este título">¶</a></h2>
<p>Los ficheros <code class="docutils literal notranslate"><span class="pre">.deb</span></code> son empaquetados comprimidos de ficheros que, además de
poder instalarse, pudeden descomprimirse y desempaquetarse a fin de poder
acceder a su interior. Para lograr esto, es conveniente instalar</p>
<span class="target" id="fakeroot"></span><dl class="simple" id="index-6">
<dt><strong class="program">fakeroot</strong></dt><dd><p>Simula que el usuario es el administrador dentro de un entorno en el que se
manipulan ficheros.</p>
</dd>
</dl>
<p>Para acceder al contenido de un <code class="docutils literal notranslate"><span class="pre">.deb</span></code>, lo primero es conseguir uno.
Consigámoslo, descargando el fichero con <strong class="program">apt-get</strong>, pero sin llegar a
instalarlo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> apt-get install -d pv
</pre></div>
</div>
<p>La orden habrá almacenado el fichero descargado en
<code class="file docutils literal notranslate"><span class="pre">/var/cache/apt/archives</span></code>. Podemos analizar el contenido de este fichero
haciendo uso del comando:<cite>ar</cite>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> ar t /var/cache/apt/archives/pv_*.deb
<span class="go">debian-binary</span>
<span class="go">control.tar.gz</span>
<span class="go">data.tar.xz</span>
</pre></div>
</div>
<p>Contiene tres ficheros, el primero guarda simplemente la versión del formato
<code class="docutils literal notranslate"><span class="pre">.deb</span></code> y los otros dos son archivos empaquetados y comprimidos, uno
(<code class="file docutils literal notranslate"><span class="pre">data.tar.xz</span></code>) guarda los ficheros en sí que constituyen el paquete  y el
otro (<code class="file docutils literal notranslate"><span class="pre">control.tar.gz</span></code>) los ficheros de metainformación, es decir, los
ficheros que sirven para identificar cuál es el paquete, qué ficheros debe
contener o qué acciones hay que realizar cuando se instala o se elimina el
paquete del sistema. No entraremos a describir cuáles son estos ficheros
control, pero puede leerse información al respecto <a class="reference external" href="https://debian-handbook.info/browse/stable/sect.package-meta-information.html">aquí</a>).</p>
<p>No obstante, no segujiremos por este camino, puesto que el propio
<strong class="command">dpkg</strong> tiene las herramientas necesarias para desempaquetar el fichero:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> /tmp
<span class="gp">$</span> mkdir CACA
<span class="gp">$</span> dpkg -x /var/cache/apt/archives/pv_*.deb CACA
<span class="gp">$</span> dpkg -e /var/cache/apt/archives/pv_*.deb CACA/DEBIAN
</pre></div>
</div>
<p>Usamos como directorio para almacenar el contenido <code class="file docutils literal notranslate"><span class="pre">/tmp/CACA</span></code>. La primera
operación descomprime los ficheros en sí dentro de tal directorio, de manera que
estos forman la misma estructura que tienen cuando se instalan en el sistema,
mientras que la segunda almacena dentro de un subdirectorio llamado
<code class="file docutils literal notranslate"><span class="pre">DEBIAN</span></code> los ficheros de metainformación. En este punto podríamos realizar
modificaciones de tanto de los ficheros de datos como de los de control (¡ojo!
que el fichero de control <code class="file docutils literal notranslate"><span class="pre">md5sums</span></code> almacena las comprobaciones de la
integridad de los ficheros).</p>
<p>Si en algún momnento quisiéramos reconstruir el fichero, podríamos hacer lo
siguiente:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> /tmp/CACA
<span class="gp">$</span> dpkg-deb -b . ../pv_1.5.7-2_amd64.deb
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>En realidad, conociendo cuáles son los ficheros de control y cómo se
escriben, es posible crear nuestros propios ficheros <code class="docutils literal notranslate"><span class="pre">.deb</span></code>. Basta con
reproducir la estructura que hemos visto al descomprimir el fichero y
empaquetar todo con <strong class="program">dpkg-deb</strong>.</p>
</div>
</div>
<div class="section" id="ejercicios-sobre-gestion-de-software">
<span id="ej-softw"></span><h2><span class="section-number">2.6.2.8. </span>Ejercicios sobre gestión de software<a class="headerlink" href="#ejercicios-sobre-gestion-de-software" title="Enlazar permanentemente con este título">¶</a></h2>
<ol class="arabic simple">
<li><p>Actualizar el sistema:</p>
<ol class="loweralpha simple">
<li><p>Sin más.</p></li>
<li><p>Eliminando también los paquetes que se vuelven innecesarios.</p></li>
</ol>
</li>
<li><p>Instalar las herramientas para soportar <abbr title="New-Technology FileSystem">NTFS</abbr>.</p></li>
<li><p>Instalar la versión ligera del servidor web <a class="reference internal" href="../../07.serre/02.web/02.nginx/index.html#n-ginx"><span class="std std-ref">nginx</span></a>.</p></li>
<li><p>En la misma orden desinstalar la versión anterior e instalar la versión
completa.</p></li>
<li><p>Averiguar a qué paquete pertenece el ejecutable <strong class="command">nginx</strong>.</p></li>
<li><p>Comprobar si tenemos instalado, el paquete <strong>gcc</strong>.</p></li>
<li><p>Consultar para qué sirve el paquete <strong>vlan</strong>.</p></li>
<li><p>Buscar algún paquete que nos permita jugar al <a class="reference external" href="https://es.wikipedia.org/wiki/Pac-Man">Pacman</a> (pero para consola de texto, porque
no tenemos entorno gráfico)</p></li>
<li><p>Desinstalar el juego anterior.</p></li>
<li><p>Hacer una actualización completa del sistema.</p></li>
</ol>
<p class="rubric">Notas al pie</p>
<dl class="footnote brackets">
<dt class="label" id="id13"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Existen otros farmatos de ficheros y, en general, cada distribución
<em>madre</em>  tiene su propio formato: <em>Red Hat</em> (y <em>SuSE</em>) usa ficheros <code class="docutils literal notranslate"><span class="pre">.rpm</span></code>,
<em>Archinux</em>, ficheros <code class="docutils literal notranslate"><span class="pre">.pkg.tar.xz</span></code>; <em>Gentoo</em>, paquetes <code class="docutils literal notranslate"><span class="pre">ebuild</span></code>; y
<em>Slackware</em>, <code class="docutils literal notranslate"><span class="pre">.tgz</span></code>.</p>
</dd>
<dt class="label" id="id14"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p>En realidad, la tradición se debe a que el segundo líder del proyecto
<em>debian</em>, Bruce Perens, participó en la realización de la película <em>Toy Story
2</em> e inició la costumbre a partir de la versión 1.1, a la que llamó <em>Buzz</em>.</p>
</dd>
<dt class="label" id="id15"><span class="brackets"><a class="fn-backref" href="#id3">3</a></span></dt>
<dd><p>La diferencia entre tener los nombres clave o los nombres de la rama está
exclusivamente en el momento en que se produzca un cambio de versión. Si, por
ejemplo, colocamos hoy el nombre de la actual distribución en pruebas
(<em>stretch</em>), tendremos instalada en nuestra máquina la distribuciín en pruebas,
pero después de que esta se congele y pase a ser la distribución estable,
pasaremos a tener instalada la estable. En cambio, si lo que colocamos es la
palabra <em>testing</em>, al abrirse de nuevo la distribución en pruebas a las
actualizaciones de <em>sid</em> nuestro sistema se actualizará y continuaremos, como
en un principio, teniendo instalada la distribución en pruebas.</p>
</dd>
<dt class="label" id="id16"><span class="brackets"><a class="fn-backref" href="#id4">4</a></span></dt>
<dd><p>En la distribución estable, al ser las actualizaciones sólo de seguridad
o de corrección de errores, no se producen casos de paquetes retenidos.</p>
</dd>
<dt class="label" id="id17"><span class="brackets"><a class="fn-backref" href="#id5">5</a></span></dt>
<dd><p>O sea, paquetes que no se encuentren en los repositorios, sino que los
hayamos descargado manualmente de la web. Por ejemplo, el programa
<strong class="program">autofirma</strong> que ofrece para <a class="reference external" href="https://firmaelectronica.gob.es/Home/Descargas.html">descarga el Gobierno de España</a>.</p>
</dd>
<dt class="label" id="id18"><span class="brackets"><a class="fn-backref" href="#id6">6</a></span></dt>
<dd><p>Acuérdese de proteger la expresión para no correr el riesgo de que la
pueda interpretrar el propio :program:` bash`.</p>
</dd>
<dt class="label" id="id19"><span class="brackets"><a class="fn-backref" href="#id7">7</a></span></dt>
<dd><p>Es el caso de la rama <em>experimental</em>.</p>
</dd>
<dt class="label" id="id20"><span class="brackets"><a class="fn-backref" href="#id8">8</a></span></dt>
<dd><p>Para saber cuáles son las opciones que tiene fijadas una rama se puede ir
al directorio <code class="file docutils literal notranslate"><span class="pre">/var/lib/apt/lists</span></code> dentro del cual encontraremos los
ficheros descargados por la orden <code class="code docutils literal notranslate"><span class="pre">apt-get</span> <span class="pre">update</span></code>. Cada línea del
<em>sources.list</em> genera varios ficheros uno de los cuales tiene por nombre
<code class="docutils literal notranslate"><span class="pre">*Release</span></code>. Dentro se podrá ver cuáles son las opciones de la rama.</p>
</dd>
<dt class="label" id="id21"><span class="brackets"><a class="fn-backref" href="#id9">9</a></span></dt>
<dd><p>Es el caso de la rama <em>backports</em>.</p>
</dd>
<dt class="label" id="id22"><span class="brackets"><a class="fn-backref" href="#id10">10</a></span></dt>
<dd><p>Como es habitual, también existe un directorio llamado
<code class="file docutils literal notranslate"><span class="pre">/etc/apt/preferences.d</span></code> en el que podemos crear diferentes ficheros
para hacer más modular la configuración.</p>
</dd>
<dt class="label" id="id23"><span class="brackets"><a class="fn-backref" href="#id11">11</a></span></dt>
<dd><p>Engorroso, porque para que una nueva versión del paquete no machacara
nuestra compilación, deberíamos marcar como <em>hold</em> el paquete y luego ir
periódicamente repitiendo la compilación según salgan nuevas fuentes. Tiene
algo más de sentido, si compilamos un paquete de una rama con versiones más
modernas (<em>testing</em>, si tenemos <em>stable</em>; o <em>sid</em>, si <em>testing</em>), porque
podremos compilar el paquete nuevo y, después, esperar sin miedo a que
nuestra rama alcance esa versión. Cuando la supere, se machacará nuestra
compilación, pero con una versión más moderna.</p>
</dd>
<dt class="label" id="id24"><span class="brackets"><a class="fn-backref" href="#id12">12</a></span></dt>
<dd><p>Los paquetes que se instalan mediante este procedimiento se marcan como
instalados manualmente, cuando es más conveniente que se marcaran como
instalados automáticamente para que después de la compilación, se borraran,
puesto que no se necesitan más. Para solucionarlo, se puede anterar la
confiruación de <em>apt</em> del siguiente modo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span> <span class="nb">echo</span> <span class="s1">&#39;APT::Get::Build-Dep-Automatic &quot;true&quot;;&#39;</span> &gt; /etc/apt/apt,conf.d/99buildep
</pre></div>
</div>
</dd>
</dl>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Tabla de contenido</a></h3>
  <ul>
<li><a class="reference internal" href="#">2.6.2. Gestión del software</a><ul>
<li><a class="reference internal" href="#vistazo-general">2.6.2.1. Vistazo general</a></li>
<li><a class="reference internal" href="#gestores-de-debian">2.6.2.2. Gestores de debian</a></li>
<li><a class="reference internal" href="#operaciones-basicas">2.6.2.3. Operaciones básicas</a></li>
<li><a class="reference internal" href="#apt-como-alternativa">2.6.2.4. <strong class="program">apt</strong> como alternativa</a></li>
<li><a class="reference internal" href="#otras-operaciones">2.6.2.5. Otras operaciones</a><ul>
<li><a class="reference internal" href="#acciones-sobre-paquetes">2.6.2.5.1. Acciones sobre paquetes</a></li>
<li><a class="reference internal" href="#acciones-sobre-el-sistema-de-paquetes">2.6.2.5.2. Acciones sobre el sistema de paquetes</a></li>
<li><a class="reference internal" href="#adicion-de-repositorios-extraoficiales">2.6.2.5.3. Adición de repositorios extraoficiales</a></li>
<li><a class="reference internal" href="#mezclando-ramas-y-arquitecturas">2.6.2.5.4. Mezclando ramas y arquitecturas</a><ul>
<li><a class="reference internal" href="#mezcla-de-arquitecturas">2.6.2.5.4.1. Mezcla de arquitecturas</a></li>
<li><a class="reference internal" href="#mezcla-de-ramas">2.6.2.5.4.2. Mezcla de ramas</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#compilacion-de-paquetes">2.6.2.6. Compilación de paquetes</a></li>
<li><a class="reference internal" href="#destripando-paquetes">2.6.2.7. Destripando paquetes</a></li>
<li><a class="reference internal" href="#ejercicios-sobre-gestion-de-software">2.6.2.8. Ejercicios sobre gestión de software</a></li>
</ul>
</li>
</ul>

  <h4>Tema anterior</h4>
  <p class="topless"><a href="07.idioma.html"
                        title="capítulo anterior"><span class="section-number">2.6.1. </span>Configuración del idioma</a></p>
  <h4>Próximo tema</h4>
  <p class="topless"><a href="09.procesos.html"
                        title="próximo capítulo"><span class="section-number">2.6.3. </span>Control de procesos</a></p>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/02.conbas/09.admbasica/08.paqueteria.rst.txt"
            rel="nofollow">Mostrar el código</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Búsqueda rápida</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Ir a" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="09.procesos.html" title="2.6.3. Control de procesos"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="07.idioma.html" title="2.6.1. Configuración del idioma"
             >anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" ><span class="section-number">2. </span>Conceptos básicos</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" ><span class="section-number">2.6. </span>Administración básica</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Derechos de autor CC BY 4.0, 2016-2020, José Miguel Sánchez Alés.
      Creado con <a href="http://sphinx-doc.org/">Sphinx</a> 2.4.3.
    </div>
  </body>
</html>