

<!DOCTYPE html>

<html lang="es" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>2.7.2. Control de procesos &#8212; documentación de Linuxnomicón - rolling</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b76e3c8a" />
    <link rel="stylesheet" type="text/css" href="../../_static/classic.css?v=514cf933" />
    <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    
    <script src="../../_static/documentation_options.js?v=a621b78a"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/translations.js?v=efdbd0b9"></script>
    
    <link rel="index" title="Índice" href="../../genindex.html" />
    <link rel="search" title="Búsqueda" href="../../search.html" />
    <link rel="next" title="2.7.3. Privilegios" href="10.priv.html" />
    <link rel="prev" title="2.7.1. Gestión del software" href="08.paqueteria.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="10.priv.html" title="2.7.3. Privilegios"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="08.paqueteria.html" title="2.7.1. Gestión del software"
             accesskey="P">anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" ><span class="section-number">2. </span>Conceptos básicos</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" accesskey="U"><span class="section-number">2.7. </span>Administración básica</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2.7.2. </span>Control de procesos</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="control-de-procesos">
<span id="procesos"></span><h1><span class="section-number">2.7.2. </span>Control de procesos<a class="headerlink" href="#control-de-procesos" title="Link to this heading">¶</a></h1>
<p><em>linux</em> es un sistema operativo multitarea, esto es, capaz de ejecutar varios
programas en paralelo. Al hilo de este asunto, cabe hacer una serie de
definiciones:</p>
<dl class="simple">
<dt><strong>Proceso</strong></dt><dd><p>Se denomina proceso, simplemente, a un programa que está en ejecución. Cada
procesos tiene una serie de propiedades que definen su estado. Una de ellas,
muy importante es el <abbr title="Process IDentifier">PID</abbr>.</p>
</dd>
</dl>
<dl class="simple" id="pid">
<dt><strong>PID</strong> (Process IDentifier)</dt><dd><p>Es el número asociada a un proceso que lo identifica de manera inequívoca.
Esto implica que es único.</p>
</dd>
<dt><strong>Demonio</strong> (<strong>servicio</strong> en la terminología de los sistemas <em>windows</em>)</dt><dd><p>Es un proceso que se ejecuta en segundo plano, es decir, que se ejecuta sin
que intervenga en su ejecución de manera interactiva el usuario.</p>
</dd>
<dt><strong>Prioridad</strong></dt><dd><p>Es la preferencia que el sistema le da a la ejecución de un proceso. Está
representada por un número entre <em>-20</em> (máxima prioridad) y <em>19</em> (mínima
prioridad). La prioridad normal es <em>0</em>.</p>
</dd>
</dl>
<p>Bajo este epígrafe trataremos el modo de conocer cuáles son los procesos que
ejecuta el sistema, qué recursos consumen, cómo cancelarlos o como traerlos a
primer plano y mandarlos a segundo plano. La gestión de los demonios, por ser
más un asunto de servidor, se dejará para más adelante.</p>
<section id="consulta">
<span id="consproc"></span><h2><span class="section-number">2.7.2.1. </span>Consulta<a class="headerlink" href="#consulta" title="Link to this heading">¶</a></h2>
<span id="ps"></span><dl id="index-0">
<dt><em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/ps">ps</a></em></dt><dd><p>Permite obtener información sobre los procesos que se ejecutan en el sistema.
Hay dos modos de pasarle opciones: siguiendo el estilo <em>BSD</em>, en que las
opciones no van precedidas de guión; y siguiendo el estilo <em>unix</em>, en que
son precedidas por uno. Por coherencia con el resto de comandos,
usaremos este segundo método<a class="footnote-reference brackets" href="#id4" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p>
<p>El modo más elemental de uso es aquel que muestra todos los procesos:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ps<span class="w"> </span>-e
<span class="go"> PID TTY          TIME CMD</span>
<span class="go">[...]</span>
<span class="go">518 ?        00:00:00 ntpd</span>
<span class="go">520 ?        00:00:00 samba</span>
<span class="go">522 ?        00:00:00 samba</span>
<span class="go">523 ?        00:00:00 samba</span>
<span class="go">524 ?        00:00:00 samba</span>
<span class="go">525 ?        00:00:00 samba</span>
<span class="go">526 ?        00:00:00 smbd</span>
<span class="go">527 ?        00:00:00 samba</span>
<span class="go">528 ?        00:00:00 samba</span>
<span class="go">529 ?        00:00:00 samba</span>
<span class="go">530 ?        00:00:00 samba</span>
<span class="go">531 ?        00:00:00 samba</span>
<span class="go">532 ?        00:00:00 winbindd</span>
<span class="go">533 ?        00:00:00 samba</span>
<span class="go">534 ?        00:00:00 samba</span>
<span class="go">535 ?        00:00:00 samba</span>
<span class="go">536 ?        00:00:00 samba</span>
<span class="go">541 ?        00:00:00 smbd-notifyd</span>
<span class="go">542 ?        00:00:00 cleanupd</span>
<span class="go">544 ?        00:00:00 winbindd</span>
<span class="go">545 ?        00:00:00 lpqd</span>
<span class="go">[...]</span>
</pre></div>
</div>
<p>o bien todos los procesos que están asociados a una terminal:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ps<span class="w"> </span>-a
<span class="go"> PID TTY          TIME CMD</span>
<span class="go">3068 pts/1    00:00:06 vim</span>
<span class="go">3913 pts/0    00:00:00 tmux: client</span>
<span class="go">4354 pts/5    00:00:00 su</span>
<span class="go">4368 pts/5    00:00:00 bash</span>
<span class="go">5490 pts/4    00:00:00 vim</span>
<span class="go">5654 pts/7    00:00:00 su</span>
<span class="go">5667 pts/7    00:00:00 bash</span>
<span class="go">5672 pts/3    00:00:00 ps</span>
</pre></div>
</div>
<p>En la salida se observan entre otros el <abbr title="Process IDentifier">PID</abbr> del proceso, la terminal
asociada y el ejecutable que lo originó. Puede obtenerse un formato
largo que da más información con <code class="docutils literal notranslate"><span class="pre">-f</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ps<span class="w"> </span>-ef
<span class="go">[...]</span>
<span class="go">ntp        518     1  0 11:08 ?        00:00:00 /usr/sbin/ntpd -p /var/run/ntpd.pid -g -u 107:111</span>
<span class="go">root       520     1  0 11:08 ?        00:00:00 /usr/sbin/samba</span>
<span class="go">root       522   520  0 11:08 ?        00:00:00 /usr/sbin/samba</span>
<span class="go">root       523   520  0 11:08 ?        00:00:00 /usr/sbin/samba</span>
<span class="go">root       524   520  0 11:08 ?        00:00:00 /usr/sbin/samba</span>
<span class="go">root       525   520  0 11:08 ?        00:00:00 /usr/sbin/samba</span>
<span class="go">root       526   522  0 11:08 ?        00:00:00 /usr/sbin/smbd -D --option=server role check:inhibit=yes --foreground</span>
<span class="go">root       527   520  0 11:08 ?        00:00:00 /usr/sbin/samba</span>
<span class="go">root       528   520  0 11:08 ?        00:00:00 /usr/sbin/samba</span>
<span class="go">root       529   520  0 11:08 ?        00:00:00 /usr/sbin/samba</span>
<span class="go">root       530   520  0 11:08 ?        00:00:00 /usr/sbin/samba</span>
<span class="go">root       531   520  0 11:08 ?        00:00:00 /usr/sbin/samba</span>
<span class="go">root       532   531  0 11:08 ?        00:00:00 /usr/sbin/winbindd -D --option=server role check:inhibit=yes --foreground</span>
<span class="go">root       533   520  0 11:08 ?        00:00:00 /usr/sbin/samba</span>
<span class="go">root       534   520  0 11:08 ?        00:00:00 /usr/sbin/samba</span>
<span class="go">root       535   520  0 11:08 ?        00:00:00 /usr/sbin/samba</span>
<span class="go">root       536   520  0 11:08 ?        00:00:00 /usr/sbin/samba</span>
<span class="go">root       541   526  0 11:08 ?        00:00:00 /usr/sbin/smbd -D --option=server role check:inhibit=yes --foreground</span>
<span class="go">root       542   526  0 11:08 ?        00:00:00 /usr/sbin/smbd -D --option=server role check:inhibit=yes --foreground</span>
<span class="go">root       544   532  0 11:08 ?        00:00:00 /usr/sbin/winbindd -D --option=server role check:inhibit=yes --foreground</span>
<span class="go">root       545   526  0 11:08 ?        00:00:00 /usr/sbin/smbd -D --option=server role check:inhibit=yes --foreground</span>
<span class="go">[...]</span>
</pre></div>
</div>
<p>Los procesos derivan unos de otros, de manera que un proceso tiene un
proceso padre. SI se quiere observar esta jerarquía de permisos puede
usarse la opción <code class="docutils literal notranslate"><span class="pre">-H</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ps<span class="w"> </span>-eH
<span class="go">[...]</span>
<span class="go">518 ?        00:00:00   ntpd</span>
<span class="go">520 ?        00:00:00   samba</span>
<span class="go">522 ?        00:00:00     samba</span>
<span class="go">526 ?        00:00:00       smbd</span>
<span class="go">541 ?        00:00:00         smbd-notifyd</span>
<span class="go">542 ?        00:00:00         cleanupd</span>
<span class="go">545 ?        00:00:00         lpqd</span>
<span class="go">523 ?        00:00:00     samba</span>
<span class="go">524 ?        00:00:00     samba</span>
<span class="go">525 ?        00:00:00     samba</span>
<span class="go">527 ?        00:00:00     samba</span>
<span class="go">528 ?        00:00:00     samba</span>
<span class="go">529 ?        00:00:00     samba</span>
<span class="go">530 ?        00:00:00     samba</span>
<span class="go">531 ?        00:00:00     samba</span>
<span class="go">532 ?        00:00:00       winbindd</span>
<span class="go">544 ?        00:00:00         winbindd</span>
<span class="go">533 ?        00:00:00     samba</span>
<span class="go">534 ?        00:00:00     samba</span>
<span class="go">535 ?        00:00:00     samba</span>
<span class="go">536 ?        00:00:00     samba</span>
<span class="go">[...]</span>
</pre></div>
</div>
<p>Alternativa a la opción <code class="docutils literal notranslate"><span class="pre">-H</span></code> es <code class="docutils literal notranslate"><span class="pre">--forest</span></code>, con la que obtenemos una
salida más vistosa y elocuente:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ps<span class="w"> </span>-e<span class="w"> </span>--forest
<span class="go">[...]</span>
<span class="go">518 ?        00:00:00 ntpd</span>
<span class="go">520 ?        00:00:00 samba</span>
<span class="go">522 ?        00:00:00  \_ samba</span>
<span class="go">526 ?        00:00:00  |   \_ smbd</span>
<span class="go">541 ?        00:00:00  |       \_ smbd-notifyd</span>
<span class="go">542 ?        00:00:00  |       \_ cleanupd</span>
<span class="go">545 ?        00:00:00  |       \_ lpqd</span>
<span class="go">523 ?        00:00:00  \_ samba</span>
<span class="go">524 ?        00:00:00  \_ samba</span>
<span class="go">525 ?        00:00:00  \_ samba</span>
<span class="go">527 ?        00:00:00  \_ samba</span>
<span class="go">528 ?        00:00:00  \_ samba</span>
<span class="go">529 ?        00:00:00  \_ samba</span>
<span class="go">530 ?        00:00:00  \_ samba</span>
<span class="go">531 ?        00:00:00  \_ samba</span>
<span class="go">532 ?        00:00:00  |   \_ winbindd</span>
<span class="go">544 ?        00:00:00  |       \_ winbindd</span>
<span class="go">533 ?        00:00:00  \_ samba</span>
<span class="go">534 ?        00:00:00  \_ samba</span>
<span class="go">535 ?        00:00:00  \_ samba</span>
<span class="go">536 ?        00:00:00  \_ samba</span>
<span class="go">[...]</span>
</pre></div>
</div>
<p>También hay formas de filtrar los procesos mostrados según distintos
criterios. Por ejemplo, para elegir los de un determinado usuario:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ps<span class="w"> </span>-u<span class="w"> </span>josem
</pre></div>
</div>
<p>o elegir procesos por nombre:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ps<span class="w"> </span>-C<span class="w"> </span>systemd
</pre></div>
</div>
<p>o por <abbr title="Process IDentifier">PID</abbr><a class="footnote-reference brackets" href="#id5" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ps<span class="w"> </span><span class="m">1000</span>
</pre></div>
</div>
<p>o mostrar los procesos de un determinado padre. Para ello se debe indicar el
<abbr title="Process IDentifier">PID</abbr> del proceso padre:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ps<span class="w"> </span>--ppid<span class="w"> </span><span class="m">1579</span>
</pre></div>
</div>
<p><strong class="command">ps</strong> permite incluir varias opciones de filtrado:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ps<span class="w"> </span>-C<span class="w"> </span>bash<span class="w"> </span>-u<span class="w"> </span>josem
</pre></div>
</div>
<p>incluso varias veces la misma opción:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ps<span class="w"> </span>-C<span class="w"> </span>bash<span class="w"> </span>-C<span class="w"> </span>system
</pre></div>
</div>
<p>pero nunca acomulan el efecto de filtrado, sino el resultado. Es decir, en el
ejemplo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ps<span class="w"> </span>-C<span class="w"> </span>bash<span class="w"> </span>-u<span class="w"> </span>josem
</pre></div>
</div>
<p>no devuelve los procesos de <strong class="program">bash</strong> que esté ejecutando el usuario
«josem», sino cualquier proceso de <strong class="program">bash</strong> (sea o no de «josem») más
cualquier proceso que pertenezca a «josem» (sea de <strong class="program">bash</strong> o de
cualquier otro programa). En el segundo ejemplo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ps<span class="w"> </span>-C<span class="w"> </span>bash<span class="w"> </span>-C<span class="w"> </span>system
</pre></div>
</div>
<p>la orden devuelve cualquier proceso de <strong class="program">bash</strong> o de <a class="reference internal" href="../../04.servidor/03.init/index.html#systemd"><span class="std std-ref">systemd</span></a>. Cuando el criterio es el mismo también se puede usar esta
alternativa:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ps<span class="w"> </span>-C<span class="w"> </span>systemd,bash
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>Tenga presente que si quiere que los criterios de filtrado sean
acomulativos, esto es, que el resultado cumpla ambos criterios, tendrá que
recurrir a <a class="reference internal" href="#pgrep"><span class="std std-ref">pgrep</span></a>.</p>
</div>
<p>También se puede definir exactamente qué campos se quieren obtener mediante
la opción <code class="docutils literal notranslate"><span class="pre">-o</span></code> seguida de los nombres de los campos (véase la página del
manual). Por ejemplo, esto mostraría para todos de los procesos el nombre del
usuario que lo ejecuta, el <em>pid</em>, el <em>ppid</em> y el ejecutable:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ps<span class="w"> </span>-eo<span class="w"> </span><span class="nv">user</span><span class="o">=</span>,pid<span class="o">=</span>,ppid<span class="o">=</span>,comm<span class="o">=</span>
</pre></div>
</div>
<p>El signo <em>igual</em>, indica que no se desea que <strong class="command">ps</strong> incluya para el
campo cabecera. Si todos los campos incluyen un igual, entonces no habrá
cabecera alguna.</p>
<p>Se pueden también ordenar los resultados con <code class="docutils literal notranslate"><span class="pre">-sort</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ps<span class="w"> </span>-eo<span class="w"> </span><span class="nv">user</span><span class="o">=</span>,pid<span class="o">=</span>,ppid<span class="o">=</span>,comm<span class="o">=</span><span class="w"> </span>--sort<span class="w"> </span>ppid,pid
</pre></div>
</div>
</dd>
</dl>
<span id="pstree"></span><dl class="simple" id="index-1">
<dt><em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/pstree">pstree</a></em></dt><dd><p>Muestra los procesos del sistema en forma de árbol, tal como hace el comando
<a class="reference internal" href="../02.informacion/03.ficheros.html#tree"><span class="std std-ref">tree</span></a> con los directorios y ficheros. Para constituir este árbol
debe saber que todo proceso tiene un proceso padre del que deriva. Por
ejemplo, si en una sesión de <strong class="program">bash</strong> ejecutamos este comando
<strong class="command">pstree</strong>, el proceso correspondiente a éste es hijo del proceso de
<strong class="command">bash</strong>.</p>
</dd>
</dl>
<span id="pgrep"></span><dl id="index-2">
<dt><em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/pgrep">pgrep</a></em></dt><dd><p>Permite obtener el <abbr title="Process IDentifier">PID</abbr> de un proceso atendiendo a distintos criterios.
Su uso más sencillo es obtener los <abbr title="Process IDentifier">PID</abbr> asociado al nombre de un programa.
Por ejemplo, esto devolvería todos los procesos que se corresponden con
sesiones de <strong class="program">bash</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pgrep<span class="w"> </span>bash
<span class="go">2966</span>
<span class="go">3004</span>
<span class="go">3084</span>
<span class="go">3588</span>
<span class="go">3811</span>
<span class="go">3967</span>
<span class="go">4368</span>
<span class="go">4546</span>
<span class="go">5529</span>
</pre></div>
</div>
<p>Puede no indicarse el nombre del programa, en cuyo caso se entenderá que
deseamos el de cualquier programa, o bien, utilizar una <a class="reference internal" href="../10.texto/01.regex.html#regex"><span class="std std-ref">expresión
regular</span></a> que nos permitirá hacer búsquedas más poderosas. Por
ejemplo, esta búsqueda:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pgrep<span class="w"> </span><span class="s1">&#39;sh$&#39;</span>
</pre></div>
</div>
<p>nos devolverá los <abbr title="Process IDentifier">PID</abbr> de todos los procesos cuyo nombre de programa acabe
en «sh».</p>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>En realidad el argumento de <strong class="command">pgrep</strong>  es simplemente un
patrón expresado en forma de <a class="reference internal" href="../10.texto/01.regex.html#tipos-regex"><span class="std std-ref">expresión regular extendida</span></a>, incluso en el primer ejemplo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pgrep<span class="w"> </span>bash
</pre></div>
</div>
<p>Por tanto, este primer ejemplo no devuelve los <abbr title="Process IDentifier">PID</abbr> de los procesos de
<strong class="program">bash</strong>, sino los <abbr title="Process IDentifier">PID</abbr> de cualquier programa que dentro de su
nombre incluya la cadena «bash».</p>
</div>
<p>En principio, la concordancia se realiza únicamente con el nombre del
proceso, pero puede buscarse concordancia con la orden completa (que
incluye parámetros) utilizando la opción <kbd class="kbd docutils literal notranslate">-f</kbd>. Por ejemplo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pgrep<span class="w"> </span>-f<span class="w"> </span><span class="s1">&#39;systemd.*user&#39;</span>
<span class="go">937523</span>
</pre></div>
</div>
<p>concordaría con procesos de <strong class="program">systemd</strong> propios de usuarios:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pgrep<span class="w"> </span>-af<span class="w"> </span><span class="s1">&#39;systemd.*user&#39;</span>
<span class="go">937523 /lib/systemd/systemd --user</span>
</pre></div>
</div>
<p>Para filtrar los resultados podemos añadir opciones que fija criterios
adicionales. Por ejemplo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pgrep<span class="w"> </span>-u<span class="w"> </span>usuario
<span class="go">1223</span>
<span class="go">1300</span>
<span class="go">1311</span>
<span class="go">1328</span>
<span class="go">1380</span>
<span class="go">1387</span>
</pre></div>
</div>
<p>permite obtener los <abbr title="Process IDentifier">PID</abbr> de todos los procesos (no hemos indicado qué
programa) que pertenezcan al usuario de nombre «usuario». O bien:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pgrep<span class="w"> </span>-P<span class="w"> </span><span class="m">1114</span>
<span class="go">1116</span>
<span class="go">2602</span>
</pre></div>
</div>
<p>devuelve los procesos cuyo proceso padre es el proceso 1114.</p>
<p>A diferencia de <a class="reference internal" href="#ps"><span class="std std-ref">ps</span></a> los criterios de filtro son acumulativos, por
lo que si se utilizan varios, <strong class="command">pgrep</strong> sólo devolverá aquellos que
cumplan con todos. En consecuencia:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pgrep<span class="w"> </span>-u<span class="w"> </span>usuario<span class="w"> </span>bash
</pre></div>
</div>
<p>devolverá los procesos de <strong class="program">bash</strong> a nombre del usuario «usuario».
Además, debe tenerse en cuenta que en las opciones (pero no en el patrón que
debe ser único), pueden indicarse varios criterios a la vez:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pgrep<span class="w"> </span>-u<span class="w"> </span>usuario,root<span class="w"> </span>bash
</pre></div>
</div>
<p>que devolverá los procesos de <strong class="program">bash</strong> a nombre de «usuario» o «root».</p>
<p>Otra opción interesante es <kbd class="kbd docutils literal notranslate">-c</kbd> que en vez de devolver los <abbr title="Process IDentifier">PID</abbr> de los
procesos, devuelve cuántos procesos en total. Por tanto, pasa saber cuántos
procesos está ejecutando el usuario «usuario»:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pgrep<span class="w"> </span>-cu<span class="w"> </span>usuario
<span class="go">6</span>
</pre></div>
</div>
<p>Lamentablemente, <strong class="command">pgrep</strong> sólo devuelve el <abbr title="Process IDentifier">PID</abbr> (y la orden completa
con <kbd class="kbd docutils literal notranslate">-a</kbd>) y no una información tan completa y configurable como <a class="reference internal" href="#ps"><span class="std std-ref">ps</span></a>.<a class="footnote-reference brackets" href="#id6" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a></p>
</dd>
</dl>
<span id="top"></span><dl id="index-3">
<dt><em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/top">top</a></em></dt><dd><p>Permite observar los procesos en tiempo real:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>top
</pre></div>
</div>
</dd>
</dl>
<span id="htop"></span><dl id="index-4">
<dt><em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/htop">htop</a></em></dt><dd><p>Es una aplicación que mejora la interfaz de <a class="reference internal" href="#top"><span class="std std-ref">top</span></a>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>htop
</pre></div>
</div>
<p>Es probable que no esté incluida en la instalación base y requiera su
instalación explícita.</p>
</dd>
</dl>
<span id="uptime"></span><dl id="index-5">
<dt><em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/uptime">uptime</a></em></dt><dd><p>Muestra el tiempo trascurrido desde el arranque. el número de usuarios
conectados y la carga media del sistema en el último minuto, los cinco
últimos minutos y los quince últimos minutos:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>uptime
<span class="go">00:07:44 up 116 days, 12:15,  2 users,  load average: 0,00, 0,03, 0,09</span>
</pre></div>
</div>
<p>Tiene algunas opciones. Con <code class="docutils literal notranslate"><span class="pre">-s</span></code> da una respuesta muy parecida a <a class="reference internal" href="../05.seguridad/05a.usuarios.html#who"><span class="std std-ref">who</span></a> con la opción <code class="docutils literal notranslate"><span class="pre">-b</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>uptime<span class="w"> </span>-s
<span class="go">2016-09-09 12:52:12</span>
</pre></div>
</div>
</dd>
</dl>
<span id="time"></span><dl id="index-6">
<dt><em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/time">time</a></em></dt><dd><p>Permite conocer el tiempo que tarda una orden en completarse:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">time</span><span class="w"> </span>sleep<span class="w"> </span><span class="m">2</span>

<span class="go">real    0m2.009s</span>
<span class="go">user    0m0.004s</span>
<span class="go">sys     0m0.000s</span>
</pre></div>
</div>
<p><strong>real</strong> es el tiempo trascurrido desde que comenzó la orden hasta que se
completo. <strong>user</strong> el tiempo de <abbr title="Central Processing Unit">CPU</abbr> fuera del <em>kernel</em> empleado y <strong>sys</strong>
el tiempo de <abbr title="Central Processing Unit">CPU</abbr> dentro del <strong>kernel</strong> empleado. Por tanto, la suma de las
dos últimas cantidad indica el tiempo total de <abbr title="Central Processing Unit">CPU</abbr> empleada.</p>
</dd>
</dl>
</section>
<section id="manipulacion">
<h2><span class="section-number">2.7.2.2. </span>Manipulación<a class="headerlink" href="#manipulacion" title="Link to this heading">¶</a></h2>
<p>Ya se ha explicado <a class="reference internal" href="../01.preliminares/index.html#ordenar"><span class="std std-ref">cómo dar órdenes</span></a>. Una orden provoca la
creación de un proceso durante un determiando tiempo. Ahora bien, es posible
modificar la forma en que se da la orden para lograr distintos fines.</p>
<span id="nice"></span><dl id="index-7">
<dt><em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/nice">nice</a></em></dt><dd><p>Modifica la prioridad de un proceso. Cuando se ejecuta una orden, la
prioridad del proceso es <em>0</em>. Sin embargo, <strong class="command">nice</strong> permite cambiar
esta prioridad. Para usuarios distintos del administrador sólo se puede
disminuir la prioridad, es decir, dar valores positivos.</p>
<p>Para usar <strong class="command">nice</strong> basta con anteponerlo al proceso que se quiere
ejecutar. Por ejemplo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>nice<span class="w"> </span>ffmpeg<span class="w"> </span>-i<span class="w"> </span>input.wmv<span class="w"> </span>-s<span class="w"> </span>hd720<span class="w"> </span>-c:v<span class="w"> </span>libx264<span class="w"> </span>-crf<span class="w"> </span><span class="m">23</span><span class="w"> </span>-c:a<span class="w"> </span>aac<span class="w"> </span>-strict<span class="w"> </span>-2<span class="w"> </span>output.mp4
</pre></div>
</div>
<p>recodifica una película en calidad HD720, haciendo que para este proceso
bastante costoso disminuya la prioridad. Cuando <strong class="command">nice</strong> se usa sin
indicar la prioridad, se supone que esta es <em>10</em>. Puede especificarse la
prioridad exacta con la opción <code class="docutils literal notranslate"><span class="pre">-n</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>nice<span class="w"> </span>-n10<span class="w"> </span>ffmpeg<span class="w"> </span><span class="o">[</span>...<span class="o">]</span>
</pre></div>
</div>
<p>Valores negativos hace el proceso más prioritario de lo normal, pero deben
adjudicarse como <em>root</em>.</p>
</dd>
</dl>
<span id="renice"></span><dl id="index-8">
<dt><em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/renice">renice</a></em></dt><dd><p>Modifica la prioridad de un proceso ya comenzado. Para seleccionar este
proceso necesitamos el <em>pid</em> del mismo, el cual podemos obtener a traves de
<strong class="command">ps</strong>, por ejemplo. Suponiendo que sea el <em>5789</em>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>renice<span class="w"> </span>-n<span class="w"> </span><span class="m">10</span><span class="w"> </span>-p<span class="w"> </span><span class="m">5789</span>
</pre></div>
</div>
</dd>
</dl>
<span id="kill"></span><dl id="index-9">
<dt><em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/kill">kill</a></em></dt><dd><p>Envía señales a los procesos, muy comúnmente para acabar con ellos, de ahí su
nombre. Hay una larga lista de señales que pueden obtenerse mediante la
opción <kbd class="kbd docutils literal notranslate">-L</kbd>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">kill</span><span class="w"> </span>-L
<span class="go"> 1) SIGHUP       2) SIGINT       3) SIGQUIT      4) SIGILL       5) SIGTRAP</span>
<span class="go"> 6) SIGABRT      7) SIGBUS       8) SIGFPE       9) SIGKILL     10) SIGUSR1</span>
<span class="go">11) SIGSEGV     12) SIGUSR2     13) SIGPIPE     14) SIGALRM     15) SIGTERM</span>
<span class="go">16) SIGSTKFLT   17) SIGCHLD     18) SIGCONT     19) SIGSTOP     20) SIGTSTP</span>
<span class="go">21) SIGTTIN     22) SIGTTOU     23) SIGURG      24) SIGXCPU     25) SIGXFSZ</span>
<span class="go">26) SIGVTALRM   27) SIGPROF     28) SIGWINCH    29) SIGIO       30) SIGPWR</span>
<span class="go">31) SIGSYS      34) SIGRTMIN    35) SIGRTMIN+1  36) SIGRTMIN+2  37) SIGRTMIN+3</span>
<span class="go">38) SIGRTMIN+4  39) SIGRTMIN+5  40) SIGRTMIN+6  41) SIGRTMIN+7  42) SIGRTMIN+8</span>
<span class="go">43) SIGRTMIN+9  44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12 47) SIGRTMIN+13</span>
<span class="go">48) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14 51) SIGRTMAX-13 52) SIGRTMAX-12</span>
<span class="go">53) SIGRTMAX-11 54) SIGRTMAX-10 55) SIGRTMAX-9  56) SIGRTMAX-8  57) SIGRTMAX-7</span>
<span class="go">58) SIGRTMAX-6  59) SIGRTMAX-5  60) SIGRTMAX-4  61) SIGRTMAX-3  62) SIGRTMAX-2</span>
<span class="go">63) SIGRTMAX-1  64) SIGRTMAX</span>
</pre></div>
</div>
<p>Las más usadas para acabar procesos son:</p>
<dl>
<dt><strong>SIGTERM</strong> (15)</dt><dd><p>Que le indica al proceso que haga un apagado suave e intente cerrar antes
todo los recursos que tenga abiertos. Es el apagado más recomentable,
aunque no siempre funciona, sobre todo si el proceso tiene algún hijo.
Es el apagado que <strong class="command">kill</strong>, <a class="reference internal" href="#pkill"><span class="std std-ref">pkill</span></a> o <a class="reference internal" href="#killall"><span class="std std-ref">killall</span></a> intentan por defecto si no se especifica otro concreto.</p>
</dd>
<dt><strong>SIGHUP</strong> (1)</dt><dd><p><em>HUP</em> proviene de <em>hang up</em>, esto es, colgar y es la señal que recibían
los programas cuando en accesos remotos por conexión serie el usuario
decide colgar. En sistemas modernos este acceso no es tan común y la señal
se ha reciclado y significa que la terminal dentro de la que corre el
programa se ha cerrado. En bastantes programas interactivos la señal puede
tener el efecto de un apagado suave como <em>SIGTERM</em>, pero en los
demonios, que como no son interactivos, no suelen ejecutarse en una
terminal, es común que se interprete como que es necesario volver a leer la
configuración y, en consecuencia, el programa no acabe. Por tanto, si
nuestra intención es acabar un proceso de forma suave, es más recomendable
la opción anterior.</p>
</dd>
<dt><strong>SIGINT</strong> (2)</dt><dd><p>Acaba taxativamente el proceso, aunque éste puede no hacer caso a la
señal. Equivale a <kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">Ctrl</kbd>+<kbd class="kbd docutils literal notranslate">C</kbd></kbd> sobre un proceso en primer plano.</p>
</dd>
<dt><strong>SIGKILL</strong> (9)</dt><dd><p>Provoca el apagado obligatorio, por lo que, aunque tiene las mismas
consecuencias de la señal anterior (puede quedar algo abierto), la señal
no puede ser obviada por el proceso.</p>
<p>Lo habitual, cuando se intenta acabar manualmente con un proceso, es intentar
el apagado suave (<em>SIGTERM</em>) y, si este no es posible, intentar el apagado
forzoso (<em>SIGKILL</em>). Por tanto, si quisiéramos acabar con los procesos de
<abbr title="Process IDentifier">PID</abbr> 1037 y 1000, haríamos:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">kill</span><span class="w"> </span><span class="m">1897</span><span class="w"> </span><span class="m">1000</span>
</pre></div>
</div>
<p>o bien:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">kill</span><span class="w"> </span>-15<span class="w"> </span><span class="m">1897</span><span class="w"> </span><span class="m">1000</span>
</pre></div>
</div>
<p>que es lo mismo. Y, si esto no funciona, no tendremos más remedio que hacer:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">kill</span><span class="w"> </span>-9<span class="w"> </span><span class="m">5675</span><span class="w"> </span><span class="m">6676</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>En ocasiones, es imposible acabar del todo con un proceso ni aun
con la señal <code class="docutils literal notranslate"><span class="pre">SIGKILL</span></code> (<em>9</em>). En estos casos, el proceso acaba en un estado
<em>zombi</em> por tiempo indefinido, que se nota con un <strong>Z</strong> al consultar el
proceso con <strong class="command">ps</strong>.</p>
</div>
</dd>
<dt><strong>SIGTSTP</strong> (20)</dt><dd><p>Suspende el proceso, esto es, lo deja en <a class="reference internal" href="../../guias/0222.som/02.ssoo/02.gestion/01.procesos.html#proc-status"><span class="std std-ref">estado «Suspendido»</span></a> a la espera de que otra orden de usuario vuelva a ponerlo
en ejecución. Equivale a <kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">Ctrl</kbd>+<kbd class="kbd docutils literal notranslate">Z</kbd></kbd> sobre un proceso en primer plano.</p>
</dd>
<dt><strong>SIGSTOP</strong> (19)</dt><dd><p>Como el anterior, pero la parada es más agresiva. Es preferible la orden
anterior.</p>
</dd>
<dt><strong>SIGCONT</strong> (18)</dt><dd><p>Reanima un proceso suspendido.</p>
</dd>
</dl>
<p>El uso de <strong class="command">kill</strong> es bastante sencillo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">kill</span><span class="w"> </span>-SEÑAL<span class="w"> </span>PID1<span class="w"> </span>PID2<span class="w"> </span>...
</pre></div>
</div>
<p>o sea, se indica la señal y se indican la relación de <abbr title="Process IDentifier">PID</abbr> correspondientes
a los procesos a los que se quiere enviar la señal. Para expresar la señal
podemos usar el número (p.e. <strong>9</strong>), su nombre (p.e. <em>SIGKILL</em>) o su nombre
abreviado (p.e. <em>KILL</em>).</p>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p><strong class="command">kill</strong> es una orden interna del intérprete, por lo que
depende de este. Usar el nombre completo (<em>SIGKILL</em>) funciona en la
versión de <strong class="command">bash</strong>, pero no en <strong class="command">dash</strong></p>
</div>
<p>También es posible utilizar en vez del <abbr title="Process IDentifier">PID</abbr> del proceso, su identificador de
trabajo en la sesión (véase <a class="reference internal" href="#jobs"><span class="std std-ref">jobs</span></a>), pero antecediéndolo con un
«%»:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sleep<span class="w"> </span><span class="m">1000</span><span class="w"> </span><span class="p">&amp;</span>
<span class="go">[1] 12699</span>
<span class="gp">$ </span><span class="nb">jobs</span>
<span class="go">[1]+  Ejecutando              sleep 1000 &amp;</span>
<span class="gp">$ </span><span class="nb">kill</span><span class="w"> </span>-TSTP<span class="w"> </span><span class="m">12699</span>
<span class="gp">$ </span><span class="nb">jobs</span>
<span class="go">[1]+  Detenido                sleep 1000</span>
<span class="gp">$ </span><span class="nb">kill</span><span class="w"> </span>-CONT<span class="w"> </span>%1
<span class="gp">$ </span><span class="nb">jobs</span>
<span class="go">[1]+  Ejecutando              sleep 1000 &amp;</span>
</pre></div>
</div>
</dd>
</dl>
<span id="pkill"></span><dl id="index-10">
<dt><em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/pkill">pkill</a></em></dt><dd><p>Es una orden que, como <a class="reference internal" href="#kill"><span class="std std-ref">kill</span></a>, permite enviar señales a los
procesos, pero para cuya selección se usa la sintaxis de <a class="reference internal" href="#pgrep"><span class="std std-ref">pgrep</span></a>. Por tanto, podremos referirlos mediante su nombre (no su <abbr title="Process IDentifier">PID</abbr>)
añadiendo criterios acomulativos de selección como con <strong class="command">pgrep</strong>, y
además, indicar qué señal enviar como con <strong class="command">kill</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp"># </span>pkill<span class="w"> </span>-15<span class="w"> </span>-uroot<span class="w"> </span>bash
</pre></div>
</div>
</dd>
</dl>
<span id="killall"></span><dl id="index-11">
<dt><em class="manpage"><a class="manpage reference external" href="https://manpages.debian.org/killall">killall</a></em></dt><dd><p>Cancela procesos identificándolos por su nombre. Pueden usarse las señales
indicadas anteriormente. Por ejemplo, esto cancela de forma suave todas las
sesiones de <strong class="program">bash</strong> abiertas que pueda cancelar quien lo ejecuta:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>killall<span class="w"> </span>bash
</pre></div>
</div>
<p>Tiene opciones (<kbd class="kbd docutils literal notranslate">-u</kbd>, <kbd class="kbd docutils literal notranslate">-g</kbd>, etc.) para ser más específico, pero no
dispone de tantas como <strong class="command">pkill</strong>.</p>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>killall es parte del paquete <a class="reference external" href="https://packages.debian.org/stable/psmisc">psmisc</a>, que puede no
encontrarse instalado por defecto.</p>
</div>
</dd>
</dl>
<p>Por lo general, cuando se ejecuta una orden, la <em>shell</em> espera hasta que esta
haya acabado para liberar la línea de comandos. Esto es debido a que la orden se
ejecuta en primer plano. Arrancada de este modo, podemos escribir <kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">Ctrl</kbd>+<kbd class="kbd docutils literal notranslate">C</kbd></kbd>
para cancelar la orden tal como haríamos con <strong class="command">kill</strong>; pero también
podemos escribir <kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">Ctrl</kbd>+<kbd class="kbd docutils literal notranslate">Z</kbd></kbd> para detener la orden. Si hacemos esto segundo,
la orden deja de ejecutarse, pero no están cancelada: simplemente queda a la
espera de que demos la orden de proseguir. Por ejemplo, supongamos que hacemos
una cuenta de 1 a 10 esperando un segundo entre número y número:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="o">(</span><span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">{</span><span class="m">1</span>..10<span class="o">}</span><span class="p">;</span><span class="w"> </span><span class="k">do</span><span class="w"> </span>sleep<span class="w"> </span><span class="m">1</span><span class="p">;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$i</span><span class="p">;</span><span class="w"> </span><span class="k">done</span><span class="o">)</span>
<span class="go">1</span>
<span class="go">^Z</span>
<span class="go">[1]+  Detenido                ( for i in {1..10};</span>
</pre></div>
</div>
<span id="jobs"></span><dl id="index-12">
<dt><strong class="command">jobs</strong> (orden interna de la <em>shell</em>)</dt><dd><p>Permite consultar la lista de trabajos activos en la sesión actual:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">jobs</span>
<span class="go">[1]+  Detenido                ( for i in {1..10};</span>
</pre></div>
</div>
</dd>
</dl>
<p>Por tanto, hay una tarea detenida. Si deseamos que prosiga, hay dos
posibilidades: que mandemos que se ejecute en primer plano…</p>
<span id="fg"></span><dl id="index-13">
<dt><strong class="command">fg</strong> (orden interna de la <em>shell</em>)</dt><dd><p>Manda una tarea a primer plano (y la activa en caso de que estuviera
suspendida). Para referirse a ella se debe especificar el número de trabajo
que proporciona <strong class="command">jobs</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">fg</span><span class="w"> </span>%1
<span class="go">2</span>
<span class="go">3</span>
<span class="go">...</span>
<span class="go">10</span>
<span class="gp">$</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Para refefir el proceso por su <abbr title="Process IDentifier">PID</abbr> en vez de por su número de
trabajo debe antecederse el número con <kbd class="kbd docutils literal notranslate">#</kbd> en vez de con <kbd class="kbd docutils literal notranslate">%</kbd>.</p>
</div>
</dd>
</dl>
<p>o mandamos que se ejecute en segundo plano…</p>
<span id="bg"></span><dl id="index-14">
<dt><strong class="command">bg</strong> (orden interna de la <em>shell</em>)</dt><dd><p>Manda una tarea a segundo plano. Para referirse a ella se debe especificar el
número de trabajo que proporciona <strong class="command">jobs</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">bg</span><span class="w"> </span>%1
</pre></div>
</div>
</dd>
</dl>
<p>Es posible también ejecutar una tarea en segundo plano acabando la orden con un
<em>&amp;</em>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sleep<span class="w"> </span><span class="m">60</span><span class="w"> </span><span class="p">&amp;</span>
<span class="go">[1] 15991</span>
<span class="gp">$ </span><span class="nb">jobs</span>
<span class="go">[1]+  Ejecutando              sleep 60 &amp;</span>
</pre></div>
</div>
</section>
<section id="ejercicios-sobre-gestion-de-procesos">
<span id="ej-procesos"></span><h2><span class="section-number">2.7.2.3. </span>Ejercicios sobre gestión de procesos<a class="headerlink" href="#ejercicios-sobre-gestion-de-procesos" title="Link to this heading">¶</a></h2>
<ol class="arabic">
<li><p>Mostrar los procesos ejecutados por el usuario «usuario».</p></li>
<li><p>Mostrar:</p>
<ol class="loweralpha simple">
<li><p>las shells que se están ejecutando en el sistema.</p></li>
<li><p>Lo mismo, pero sólo aquellas que ejecutan el usuario
«usuario» (en este segundo casa, basta con indicual
cuáles son los <abbr title="Process IDentifier">PID</abbr>)</p></li>
</ol>
</li>
<li><p>Mostrar todos los procesos ordenados por uso de la <abbr title="Central Processing Unit">CPU</abbr>.</p></li>
<li><p>Mostrar todos los procesos indicando el <abbr title="Process IDentifier">PID</abbr>, el <abbr title="User IDentifier">UID</abbr> del propietario, la
memoria utilizada, la prioridad y el comando completo.</p></li>
<li><p>¿Cúantos procesos tiene corriendo en el sistema el usuario «usuario»?</p></li>
<li><p>¿Desde cuándo lleva encencida la máquina?</p></li>
<li><p>Ejecutar el comando sleep 1000, suspenderlo y ponerlo a trabajar en segundo
plano; volverlo a traer a primer plano y, por último, cancelarlo</p></li>
<li><p>Ejecutar el comando sleep 1000, suspenderlo, ponerlo a trabajar en segundo
plano y, sin traerlo a primer plano, acabar con él.</p></li>
<li><p>Indicar qué tiempo tarda el ordenador en buscar dentro del directorio de
configuraciones el fichero dhclient.conf.</p></li>
<li><p>La orden:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>programa_muy_pesado
</pre></div>
</div>
<p>tarda mucho en ejcutarse y consume mucho procesamiento, y hace que la
película que estamos viendo mientras esperamos a que se complete, vaya a
tirones. ¿Cömo puedo ejecutarla para poder ver la película sin problemas?</p>
</li>
</ol>
<p class="rubric">Notas al pie</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id4" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>Aunque lo habitual es verlo explicado al estilo BSD:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>BSD</p></th>
<th class="head"><p>UNIX</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="code docutils literal notranslate"><span class="pre">ax</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">-ef</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="code docutils literal notranslate"><span class="pre">axf</span></code></p></td>
<td><p><code class="code docutils literal notranslate"><span class="pre">-ef</span> <span class="pre">--forest</span></code></p></td>
</tr>
</tbody>
</table>
</aside>
<aside class="footnote brackets" id="id5" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>Para utilizar el criterio del <abbr title="Process IDentifier">PID</abbr> pueden utilizarse la opción
<kbd class="kbd docutils literal notranslate">-p</kbd>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ps<span class="w"> </span>-p<span class="w"> </span><span class="m">1000</span>
</pre></div>
</div>
</aside>
<aside class="footnote brackets" id="id6" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">3</a><span class="fn-bracket">]</span></span>
<p>Como <a class="reference internal" href="#ps"><span class="std std-ref">ps</span></a> da más posibilidades de formateo, es muy útil aunar
ambos comandos. Por ejemplo:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ps<span class="w"> </span>-f<span class="w"> </span><span class="k">$(</span>pgrep<span class="w"> </span>-u<span class="w"> </span>usuario<span class="w"> </span>bash<span class="k">)</span>
</pre></div>
</div>
<p>en donde hemos usado <strong class="command">pgrep</strong> para obtener la lista de <abbr title="Process IDentifier">PID</abbr> de los
procesos que nos interesan.</p>
</aside>
</aside>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../index.html">Tabla de contenido</a></h3>
    <ul>
<li><a class="reference internal" href="#">2.7.2. Control de procesos</a><ul>
<li><a class="reference internal" href="#consulta">2.7.2.1. Consulta</a></li>
<li><a class="reference internal" href="#manipulacion">2.7.2.2. Manipulación</a></li>
<li><a class="reference internal" href="#ejercicios-sobre-gestion-de-procesos">2.7.2.3. Ejercicios sobre gestión de procesos</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Tema anterior</h4>
    <p class="topless"><a href="08.paqueteria.html"
                          title="capítulo anterior"><span class="section-number">2.7.1. </span>Gestión del software</a></p>
  </div>
  <div>
    <h4>Próximo tema</h4>
    <p class="topless"><a href="10.priv.html"
                          title="próximo capítulo"><span class="section-number">2.7.3. </span>Privilegios</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/02.conbas/09.admbasica/09.procesos.rst.txt"
            rel="nofollow">Mostrar el código</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Búsqueda rápida</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Ir a" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="10.priv.html" title="2.7.3. Privilegios"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="08.paqueteria.html" title="2.7.1. Gestión del software"
             >anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" ><span class="section-number">2. </span>Conceptos básicos</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="index.html" ><span class="section-number">2.7. </span>Administración básica</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">2.7.2. </span>Control de procesos</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright CC BY 4.0, 2016-2023, José Miguel Sánchez Alés.
      Creado usando <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>