


<!DOCTYPE html>

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>3.1. Conceptos básicos &#8212; documentación de Linuxnomicón - rolling</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/classic.css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/translations.js"></script>
    
    <link rel="index" title="Índice" href="../genindex.html" />
    <link rel="search" title="Búsqueda" href="../search.html" />
    <link rel="next" title="3.2. Entrada/Salida" href="02.io.html" />
    <link rel="prev" title="3. Programación de scripts" href="index.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice General"
             accesskey="I">índice</a></li>
        <li class="right" >
          <a href="02.io.html" title="3.2. Entrada/Salida"
             accesskey="N">siguiente</a> |</li>
        <li class="right" >
          <a href="index.html" title="3. Programación de scripts"
             accesskey="P">anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" accesskey="U"><span class="section-number">3. </span>Programación de <em>scripts</em></a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3.1. </span>Conceptos básicos</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="conceptos-basicos">
<h1><span class="section-number">3.1. </span>Conceptos básicos<a class="headerlink" href="#conceptos-basicos" title="Enlace permanente a este encabezado">¶</a></h1>
<p>Bajo este epígrafe se revisan algunos conceptos básicos del lenguaje de la
<em>shell</em>.</p>
<section id="sabores">
<h2><span class="section-number">3.1.1. </span>Sabores<a class="headerlink" href="#sabores" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Lo primero. cuando decidimos introducirnos en la programación <em>shell</em>, es tener
presente que no aprenderemos el «<em>lenguaje de la shell</em>», sino «<em>el lenguaje de
una de las shells</em>», porque en el mundo <em>UNIX</em> hay multitud de intérpretes de
comandos:</p>
<ul>
<li><p>Compatibles con <strong class="command">sh</strong>, es decir, con la <em>Bourne shell</em> original, que
fue la <em>shell</em> de <em>UNIX v7</em><a class="footnote-reference brackets" href="#id14" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>, y, más específicamente, con el
<a class="reference external" href="https://en.wikipedia.org/wiki/POSIX">estándar POSIX</a><a class="footnote-reference brackets" href="#id15" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a> derivado de ella:</p>
<dl class="simple">
<dt><strong class="command">ksh</strong> (<em>KornShell</em>)</dt><dd><p>Añadió a la <em>Bourne SHell</em> original extensiones, muchas inspiradas en
<strong class="command">csh</strong>, lo que le valió para que su versión de 1988 (<em>ksh88</em>) se
tomara como base para establecer el estándar <em>POSIX</em>. De hecho, las variantes
de esta familia de <em>shells</em> derivan de <em>ksh88</em> y no del <strong class="command">sh</strong>
original. Versiones posteriores añaden extensiones al estándar. Es la <em>shell</em>
predeterminada en <a class="reference external" href="https://www.openbsd.org/">OpenBSD</a>.</p>
</dd>
<dt><strong class="command">ash</strong> (<em>Almquist shell</em>)</dt><dd><p>Es una implementación libre del estándar citado con algunos pocos añadidos.
Es la <em>shell</em> predeterminada para los usuarios (pero no para <em>root</em>) en
<a class="reference external" href="https://www.freebsd.org/doc/en_US.ISO8859-1/books/handbook/">FreeBSD</a> Su
variante para <em>Debian</em> se llama <strong class="command">dash</strong> (la «d» significa <em>Debian</em>),
que es, desde <a class="reference external" href="https://www.debian.org/News/2011/20110205a">Squeeze</a>, la <em>shell</em> a la que apunta preferentemente
<code class="file docutils literal notranslate"><span class="pre">/bin/sh</span></code><a class="footnote-reference brackets" href="#id16" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a>. En <em>ubuntu</em> se optó por ella, incluso antes de que lo
hiciera <em>Debian</em><a class="footnote-reference brackets" href="#id17" id="id4" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a>.</p>
</dd>
<dt><strong class="command">bash</strong> (<em>GNU Bourne shell</em>)</dt><dd><p>Es la <em>shell</em> del <a class="reference external" href="https://www.gnu.org">proyecto GNU</a> Añade extensiones al
estándar <em>POSIX</em>. Es el intérprete interactivo predeterminado en la mayoría
de los sistemas <em>linux</em> , y lo es de <em>MacOsX</em> desde la versión 10.3.</p>
</dd>
<dt><strong class="command">busybox</strong></dt><dd><p>Es un programa que incluye en un sólo ejecutable muchos de los programas
básicos del mundo <em>UNIX</em> (<a class="reference internal" href="../02.conbas/02.informacion/03.ficheros.html#cat"><span class="std std-ref">cat</span></a>, <a class="reference internal" href="../02.conbas/10.texto/02.busqueda.html#grep"><span class="std std-ref">grep</span></a>, <a class="reference internal" href="../02.conbas/02.informacion/03.ficheros.html#find"><span class="std std-ref">find</span></a>, etc.<a class="footnote-reference brackets" href="#id18" id="id5" role="doc-noteref"><span class="fn-bracket">[</span>5<span class="fn-bracket">]</span></a>) y entre ellos la propia <em>shell</em>. En lo relativo a la
<em>shell</em> es descendiente directo de <strong class="program">dash</strong>). Su importancia estriba
en que muchos de los sistemas que tienen un linux empotrado (como los
dispositivos de red), lo incluyen por ligereza y ahorro de espacio<a class="footnote-reference brackets" href="#id19" id="id6" role="doc-noteref"><span class="fn-bracket">[</span>6<span class="fn-bracket">]</span></a>.
También hay algunas distribuciones mínimas de <em>linux</em> que lo incorporan como
la excelente <a class="reference external" href="http://www.slitaz.org/">SliTaZ</a>. <em>Debian</em> dispone un paquete
para su instalación.</p>
</dd>
<dt><strong class="command">zsh</strong></dt><dd><p>Compatible con el estándar <em>POSIX</em> cuando se ejecuta como <code class="file docutils literal notranslate"><span class="pre">/bin/sh</span></code> y
procura la compatibilidad con <strong class="command">bash</strong>, aunque esta no es total.
También tiene un módulo de compatibilidad con <strong class="command">ksh</strong>.</p>
</dd>
</dl>
</li>
<li><p>Compatibles con <strong class="command">csh</strong> (<em>C shell</em>), que no son en absoluto compatibles
con <strong class="command">sh</strong>. Procuran tener una sintaxis más cercana al lenguaje <em>C</em>. El
único descendiente reseñable de la versión tradicional es <strong class="command">tcsh</strong>.
<strong class="command">tcsh</strong> fue la <em>shell</em> predeterminada para <em>Mac Os X</em> hasta la versión
10.2; y lo es del administrador en <em>FreeBSD</em>.</p></li>
<li><p>Compatibles con <strong class="command">rc</strong>, la <em>shell</em> de <a class="reference external" href="https://es.wikipedia.org/wiki/Plan_9_from_Bell_Labs">Plan 9</a>.</p></li>
<li><p>Otros intérpretes no pertenecientes a ninguna de estas familias como
por ejemplo, <a class="reference external" href="https://fishshell.com/">fish</a> o <a class="reference external" href="https://xon.sh/">xonsh</a><a class="footnote-reference brackets" href="#id20" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>7<span class="fn-bracket">]</span></a>.</p></li>
</ul>
<p>Un esquema revelador del parentesco entre todas estas <em>shells</em> es el siguiente<a class="footnote-reference brackets" href="#id21" id="id8" role="doc-noteref"><span class="fn-bracket">[</span>8<span class="fn-bracket">]</span></a>:</p>
<img alt="../_images/unix-shells.svg" src="../_images/unix-shells.svg" /><div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>Échele una lectura a esta <a class="reference external" href="https://unix.stackexchange.com/questions/145522/what-does-it-mean-to-be-sh-compatible">interesante respuesta de
unix.stackexchange.com</a>
y, si tiene problemas de insomnio, a este <a class="reference external" href="https://www.in-ulm.de/~mascheck/various/shells/">documento sobre las distintas
shell</a>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>En estos apuntes nos centraremos en el estándar <em>POSIX</em> y en las
extensiones de <strong class="command">bash</strong>. Durante el desarrollo de los apuntes, se
procurará dejar claro qué forma parte del estándar y qué es una extensión
de <strong class="program">bash</strong> incompatible; y se usarán como <em>shells</em> de referencia
<strong class="command">dash</strong>, <strong class="command">busybox</strong> y <strong class="command">bash</strong>. De las tres, sólo
<strong class="command">busybox</strong> no está instalada por defecto en <em>Debian</em>, pero está
empaquetada, por lo que es muy fácil su instalación. Si tras escribir un
<em>script</em> deseamos comprobar si es compatible con él, basta con ejecutarlo
así:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>busybox<span class="w"> </span>sh<span class="w"> </span>nombre_del_script.sh
</pre></div>
</div>
<p>Una herramienta muy útil para saber si estamos usando una extensión ajena al
estándar y que, además, aporta otras notificaciones interesantes es
<a class="reference external" href="https://github.com/koalaman/shellcheck">shellcheck</a>.</p>
</div>
<p class="rubric">¿Qué <em>shell</em> debo usar para programar <em>scripts</em>?</p>
<p>Ciñéndonos a la familia de <em>shells</em> derivadas de la <em>Bourne Shell</em>, nuestra
elección puede basarse en algunos criterios:</p>
<ul>
<li><p>Ceñirse al estándar tiene dos ventajas:</p>
<ul>
<li><p><strong class="program">bash</strong> es una <em>shell</em> con esteroides: tiene extensiones que pueden
facilitarnos la tarea, pero eso la hace más pesada lo que deriva en un
consumo de más recursos y una menor velocidad.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Una interesante comparación entre el rendimiento de distintas
<em>shells</em> puiede encontrarse en <a class="reference external" href="https://unix.stackexchange.com/questions/148035/is-dash-or-some-other-shell-faster-than-bash">esta respuesta de unix.stackexchange.com</a>.
Usando el <em>script</em> de referencia, la <em>shell</em> más rápida es
<strong class="program">dash</strong> y tras ella <strong class="program">busybox</strong>. El <em>script</em> no usa
órdenes externas a la <em>shell</em>, lo que favorecería el rendimiento de
<strong class="program">busybox</strong>, que implementa internamente muchas de ellas, por lo
que en el caso de un <em>script</em> real es posible que se volvieran las
tornas.</p>
</div>
</li>
<li><p><strong class="program">bash</strong> no está presente en todos los <em>linux</em>. Si nos ceñimos a las
distribuciones más usadas, sí; pero en algunos <em>linux</em> como los empotrados
en dispositivos de red lo habitual es encontrarse con <strong class="program">busybox</strong>.
Ceñirnos al estándar <em>POSIX</em> nos asegura que nuestro <em>script</em> se ejecutará
en practicamente todos los linux.</p></li>
</ul>
</li>
<li><p>Las extensiones al estándar añaden muchísimas comodidades al uso interactivo
(de ahí que en <em>Debian</em>, por ejemplo, se use <strong class="command">bash</strong> para tal fin),
pero no tantas a la programación: las más sobresalientes son los <em>arrays</em>, la
orden <a class="reference internal" href="03.control.html#sh-regex"><span class="std std-ref">[[</span></a> y algunas redirecciones (<a class="reference internal" href="../02.conbas/08.redirecciones/01basica.html#bash-here-string"><span class="std std-ref">here string</span></a>). Lo que es definitivamente una mala idea es usar
sintaxis que rompa gratuitamente la compatibilidad (p.e. la palabra
<code class="docutils literal notranslate"><span class="pre">function</span></code> que permite usar <strong class="command">bash</strong> en la declaración de funciones).</p>
<p>La regla más juiciosa es introducir incompatibilidad si esta realmenta nos
facilita y simplifica la programación.</p>
</li>
<li><p>El propósito del <em>script</em> es importante. Un <em>script</em> que pueda llegar a correr
en un sistema empotrado es obvio que no puede escribirse en <strong class="program">bash</strong>;
si lo hacemos con la intención de que lo usen terceros, también tiene interés
que procuremos la mayor portabilidad posible<a class="footnote-reference brackets" href="#id22" id="id9" role="doc-noteref"><span class="fn-bracket">[</span>9<span class="fn-bracket">]</span></a>.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>Es muy importante tener presente que, cuando programamos con la
<em>shell</em>, lo más habitual es que necesitemos usar órdenes externas a la propia
<em>shell</em>, como <a class="reference internal" href="../02.conbas/10.texto/02.busqueda.html#grep"><span class="std std-ref">grep</span></a> o <a class="reference internal" href="../02.conbas/10.texto/03.manipulacion.html#sed"><span class="std std-ref">sed</span></a>. Estas órdenes
<strong>también</strong> forman parte del estándar y sus implementaciones, como en el caso
de la propia <em>shell</em>, pueden incluir extensiones ajenas al estándar<a class="footnote-reference brackets" href="#id23" id="id10" role="doc-noteref"><span class="fn-bracket">[</span>10<span class="fn-bracket">]</span></a>. Así
pues, la incompatibilidad puede producirse en la invocación de una orden y no
en la programación <em>shell</em> en sí.</p>
<p>Lo cierto es que en los sistemas <em>linux</em>, lo habitual para estas herramientas
básicas es encontrarse o una implementación independiente (muy comúnmente la
del proyecto <abbr title="GNU is not UNIX">GNU</abbr>) o, en <em>linux</em> empotrados, la
implementación del proyecto <strong class="program">busybox</strong>.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>Puede <a class="reference external" href="http://pubs.opengroup.org/onlinepubs/9699919799/">consultar en línea el estándar POSIX</a>.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">Ver también</p>
<p>El manual de <a class="reference external" href="https://www.gnu.org/software/autoconf/autoconf.html">autoconf</a> tiene un apartado a
discutir sobre <a class="reference external" href="https://www.gnu.org/software/autoconf/manual/autoconf.html#Portable-Shell">cómo escribir script portables</a></p>
</div>
</section>
<section id="caracteristicas">
<h2><span class="section-number">3.1.2. </span>Características<a class="headerlink" href="#caracteristicas" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Antes de empezar, es útil saber que el lenguaje de la [Bourne] <em>shell</em> es:</p>
<ol class="arabic simple">
<li><p>Imperativo de <strong>programación estructurada</strong>.</p></li>
<li><p>Puramente <strong>interpretado</strong>. Esto significa que el programa al ejecutarse,
se interpreta línea a línea, sin compilaciones previas a <em>bytecode</em> como
hacen otros lenguajes interprados. Obviamente, esto lo hace una
interpetación muy lenta.</p></li>
<li><p>De tipado <strong>dinámico</strong> y <strong>débil</strong>. Es débil hasta el punto de que el uso de
variables inexistentes no provoca error alguno<a class="footnote-reference brackets" href="#id24" id="id11" role="doc-noteref"><span class="fn-bracket">[</span>11<span class="fn-bracket">]</span></a>.</p></li>
</ol>
</section>
<section id="linea-de-shebang">
<h2><span class="section-number">3.1.3. </span>Línea de <em>shebang</em><a class="headerlink" href="#linea-de-shebang" title="Enlace permanente a este encabezado">¶</a></h2>
<p><em class="dfn">SheBang</em> es el nombre con el que se conoce a los caracteres <code class="docutils literal notranslate"><span class="pre">#!</span></code>, que
indican cuál es el intérprete con el que debe interpretarse el contenido del
fichero. La línea que contiene la <em>shebang</em>, debe ser siempre la primera
del fichero. Por ejemplo, suponiendo que tengamos el fichero ejecutable
<code class="file docutils literal notranslate"><span class="pre">caca.sed</span></code> con este contenido:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span>#!/bin/sed -f
<span class="linenos">2</span>
<span class="linenos">3</span>/^[^#]/!d
</pre></div>
</div>
<p>Al ejecutarlo como:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>./caca.sed<span class="w"> </span>&lt;<span class="w"> </span>/etc/ssh/sshd_config
</pre></div>
</div>
<p>la <em>shell</em> tomará <a class="reference internal" href="../02.conbas/10.texto/03.manipulacion.html#sed"><span class="std std-ref">sed</span></a>, ya que es el que indica la <em>shebang</em> que
debe usarse e interpretará con él el contenido (la línea <strong>3</strong>). La consecuencia
es que lograremos lo mismo que habiendo hecho:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>sed<span class="w"> </span><span class="s1">&#39;/^[^#]/!d&#39;</span><span class="w"> </span>/etc/ssh/sshd_config
</pre></div>
</div>
<p>Por tanto cuando escribamos un <em>script</em> en el lenguaje de la <em>shell</em> debemos
especificar cuál es el lenguaje de la <em>shell</em> con el que debe interpretarse:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="ch">#!/bin/sh</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Hola, mundo&quot;</span>
</pre></div>
</div>
<p>Y en este punto es importante reparar en qué <em>shell</em> se invoca: en <em>Debian</em>, tal
y como se ha escrito, se invocará a <strong class="command">sh</strong>, o sea, a <strong class="command">dash</strong> y no
a <strong class="command">bash</strong>. Es importante tener esto presente: si se mantiene la
compatibilidad con el estándar <em>POSIX</em> entonces puede escribirse
<code class="code docutils literal notranslate"><span class="pre">#!/bin/sh</span></code>, pero si se usan extensiones de <strong class="command">bash</strong>, entonces
habrá que especificarse que se use <strong class="command">bash</strong> con <code class="code docutils literal notranslate"><span class="pre">#!/bin/bash</span></code>.</p>
</section>
<section id="variables">
<span id="sh-variables"></span><h2><span class="section-number">3.1.4. </span>Variables<a class="headerlink" href="#variables" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Ya se trataron someramente <a class="reference internal" href="../02.conbas/07.avanzada/08.interpretaciones.html#variables"><span class="std std-ref">las variables en la shell</span></a>: las variables
y las variables de entorno, las variables predefinidas y la definición de
variables de usuario.</p>
<p>A lo expuesto en aquel momento, hay que añadir la posibilidad que se brinda de
obtener el valor modificado de la variable. Algunas posibilidades están
recogidas en el estándar y otras las define <strong class="command">bash</strong>. Para ilustrar todo
ello, tomemos la siguiente variable:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nv">MIVAR</span><span class="o">=</span><span class="s2">&quot;dgdg.sqwer.xxxss.9&quot;</span>
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">MIVAR</span><span class="si">}</span>
dgdg.sqwer.xxxss.9
</pre></div>
</div>
<p>En el <em>estándar</em> se recogen las siguientes modificaciones:</p>
<ul>
<li><p>Mostrar el valor de la variable o un valor alternativo, si esta no tiene
valor:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">MIVAR</span><span class="k">:-</span><span class="nv">Alternativo</span><span class="si">}</span>
dgdg.sqwer.xxxss.9
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">NODEFINIDA</span><span class="k">:-</span><span class="nv">Alternativo</span><span class="si">}</span>
Alternativo
</pre></div>
</div>
</li>
<li><p>Una variante de esto, que, además de mostrar el texto alternativo, asigna el
valor a la variable:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">MIVAR</span><span class="p">:=Alternativo</span><span class="si">}</span>
dgdg.sqwer.xxxss.9
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">MIVAR</span><span class="si">}</span>
dgdg.sqwer.xxxss.9
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">NODEFINIDA</span><span class="p">:=Alternativo</span><span class="si">}</span>
Alternativo
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">NODEFINIDA</span><span class="si">}</span>
Alternativo
</pre></div>
</div>
</li>
<li><p>Mostrar el valor alternativo, sólo en caso de que la varible tenga valor:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nv">DOMINIO</span><span class="o">=</span>aula.ies
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>www<span class="si">${</span><span class="nv">DOMINIO</span><span class="p">:+.</span><span class="nv">$DOMINIO</span><span class="si">}</span>
www.aula.ies
$<span class="w"> </span><span class="nv">DOMINIO</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span>www<span class="si">${</span><span class="nv">DOMINIO</span><span class="p">:+.</span><span class="nv">$DOMINIO</span><span class="si">}</span>
www
</pre></div>
</div>
</li>
<li><p>Eliminar la más corta parte final del valor que coincide con la subcadena
suministrada:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">MIVAR</span><span class="p">%.9</span><span class="si">}</span>
dgdg.sqwer.xxxss
</pre></div>
</div>
<p>Es habitual usar comodines en este caso:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">MIVAR</span><span class="p">%.*</span><span class="si">}</span>
dgdg.sqwer.xxxss
</pre></div>
</div>
</li>
<li><p>Eliminar la más larga parte final del valor que coincide con la cadena
suministrada:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">MIVAR</span><span class="p">%%.*</span><span class="si">}</span>
dgdg
</pre></div>
</div>
</li>
<li><p>Eliminar la más corta parte inicial del valor que coincide con la cadena
suministrada:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">MIVAR</span><span class="p">#dg</span><span class="si">}</span>
dg.sqwer.xxxss.9
</pre></div>
</div>
<p>Es habitual usar comodines en este caso:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">MIVAR</span><span class="p">#*.</span><span class="si">}</span>
sqwer.xxxss.9
</pre></div>
</div>
</li>
<li><p>Eliminar la más larga parte inicial del valor que coincide con la cadena
suministrada:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">MIVAR</span><span class="p">##*.</span><span class="si">}</span>
<span class="m">9</span>
</pre></div>
</div>
</li>
</ul>
<p><strong class="command">bash</strong> y <strong class="command">busybox</strong>, además, añaden las siguientes sustituciones:</p>
<ul>
<li><p>Modificar la primera ocurrencia de una subcadena:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">MIVAR</span><span class="p">/dg/123</span><span class="si">}</span>
123dg.sqwer.xxxss.9
</pre></div>
</div>
</li>
<li><p>Modificar todas las ocurrencias de una subcadena:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">MIVAR</span><span class="p">//dg/123</span><span class="si">}</span>
<span class="m">123123</span>.sqwer.xxxss.9
</pre></div>
</div>
</li>
<li><p>Extraer una subcadena del valor, fijando la posición inicial y la longitud (la
primera posición es <strong>0</strong>):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">MIVAR</span><span class="p">:</span><span class="nv">3</span><span class="p">:</span><span class="nv">6</span><span class="si">}</span><span class="w">  </span><span class="c1"># A partir de la posición 3, seis caracteres.</span>
g.sqwe
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">MIVAR</span><span class="p">:</span><span class="nv">3</span><span class="si">}</span>
g.sqwer.xxxss.9
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">MIVAR</span><span class="p">::</span><span class="nv">3</span><span class="si">}</span>
dgd
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>Estas posibilidades de modificación evitan el uso de órdenes externas
como <strong class="command">grep</strong>, <strong class="command">sed</strong>, <strong class="command">cut</strong> o <strong class="command">expr</strong>. El
último ejemplo puede resolverse así:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$MIVAR</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-c1-3
dgd
</pre></div>
</div>
</div>
<p>Además, <strong class="program">bash</strong> exclusivamente introduce el concepto de <em class="dfn">expansión
indirecta</em>, que permite obtener el valor de una variable cuyo valor es otra
variable:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nv">saludar</span><span class="o">=</span><span class="s2">&quot;Hola&quot;</span>
$<span class="w"> </span><span class="nv">despedir</span><span class="o">=</span><span class="s2">&quot;Adiós&quot;</span>
$<span class="w"> </span><span class="nv">accion</span><span class="o">=</span><span class="s2">&quot;saludar&quot;</span>
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="p">!accion</span><span class="si">}</span>
Hola
</pre></div>
</div>
<p>Para lograr esto mismo en el estándar POSIX no habría más remedio que recurrir a
<a class="reference internal" href="06.misc/02.eval.html#eval"><span class="std std-ref">eval</span></a>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">eval</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="se">\$</span><span class="nv">$accion</span>
Hola
</pre></div>
</div>
<p class="rubric">Ámbito</p>
<p>Quien tenga unos conocimientos mínimos de programación sabe que al declarar o
usar variables dentro de un programa es muy importante saber cuál es su
<em class="dfn">ámbito</em>, esto es, la zona del programa en la que tienen existencia. Las
reglas en programación <em>shell</em> son las siguientes:</p>
<ol class="arabic">
<li><p>Las variables son todas de ámbito global y tienen existencia en todo el
<em>script</em> a partir de la línea en que son definidas por primera vez (en la
<em>shell</em> basta darles valor para definirlas).</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>En el estándar <em>POSIX</em> no existen variables locales, aunque
practicamente todas las implementaciones de la <em>Bourne shell</em> habilitan
algún mecanismo para definir variables locales a la función. Lo veremos
más adelante.</p>
</div>
</li>
<li><p>Son heredadas por las <em>subshells</em> que podamos crear dentro del <em>script</em>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nv">a</span><span class="o">=</span><span class="m">2</span><span class="p">;</span><span class="w"> </span><span class="o">(</span><span class="nb">echo</span><span class="w"> </span><span class="nv">$a</span><span class="o">)</span>
<span class="m">2</span>
</pre></div>
</div>
<p>Ahora bien:</p>
</li>
<li><p>Si queremos hacerlas accesibles a programas ejecutados en el <em>script</em>, es
necesarios exportarlas usando la palabra reservada <a class="reference internal" href="../02.conbas/07.avanzada/08.interpretaciones.html#export"><span class="std std-ref">export</span></a>.</p></li>
<li><p>Es imposible exportar variables de un <em>subshell</em> a la <em>shell</em> superior:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="o">(</span><span class="nv">b</span><span class="o">=</span><span class="m">2</span><span class="o">)</span><span class="p">;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$b</span><span class="w">  </span><span class="c1"># b no está definida.</span>

$<span class="w"> </span><span class="nv">b</span><span class="o">=</span><span class="m">1</span><span class="p">;</span><span class="w"> </span><span class="o">(</span><span class="nv">b</span><span class="o">=</span><span class="m">2</span><span class="o">)</span><span class="p">;</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$b</span>
<span class="m">1</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="sustituciones-en-linea">
<h2><span class="section-number">3.1.5. </span>Sustituciones en línea<a class="headerlink" href="#sustituciones-en-linea" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Deben repasarse los <a class="reference internal" href="../02.conbas/07.avanzada/08.interpretaciones.html#comodines"><span class="std std-ref">comodines</span></a>, los <a class="reference internal" href="../02.conbas/07.avanzada/08.interpretaciones.html#sh-espacio"><span class="std std-ref">caracteres de
espaciado</span></a>, los <a class="reference internal" href="../02.conbas/07.avanzada/08.interpretaciones.html#sh-expandibles"><span class="std std-ref">expandibles</span></a> y la
<a class="reference internal" href="../02.conbas/07.avanzada/08.interpretaciones.html#sh-ev-arit"><span class="std std-ref">evaluación aritmética</span></a>. Por supuesto, también es necesario
saber <a class="reference internal" href="../02.conbas/07.avanzada/08.interpretaciones.html#sh-no-subs"><span class="std std-ref">cómo evitar estas sustituciones</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>En <strong class="command">bash</strong> (no así en <strong class="program">dash</strong> ni <strong class="program">busybox</strong>)
los <a class="reference internal" href="../02.conbas/07.avanzada/08.interpretaciones.html#alias"><span class="std std-ref">alias</span></a> no se expanden a menos que se habilite:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">shopt</span><span class="w"> </span>-s<span class="w"> </span>expand_aliases
</pre></div>
</div>
</div>
<div class="admonition warning">
<p class="admonition-title">Advertencia</p>
<p>Uno de los aspectos más engorrosos y molestos de la programación
con las <em>shells</em> derivadas de la <em>Bourne shell</em> es «el infierno de los
espacios». El espacio es un carácter medianamente habitual que puede aparecer
en nombres de ficheros o directorios, pero a la vez es uno de los caracteres
que usa la <em>shell</em> (junto a la tabulación y el cambio de línea) para separar
los argumentos que se pasan a los programas. Para ilustrarlo, echemos un ojo
a la siguiente sesión:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>touch<span class="w"> </span><span class="s2">&quot;Nombre con espacios&quot;</span>
<span class="gp">$ </span><span class="nv">a</span><span class="o">=</span><span class="s2">&quot;Nombre con espacios&quot;</span>
<span class="gp">$ </span>rm<span class="w"> </span><span class="nv">$a</span>
<span class="go">rm: no se puede borrar &#39;Nombre&#39;: No existe el fichero o el directorio</span>
<span class="go">rm: no se puede borrar &#39;con&#39;: No existe el fichero o el directorio</span>
<span class="go">rm: no se puede borrar &#39;espacios&#39;: No existe el fichero o el directorio</span>
<span class="gp">$ </span>rm<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$a</span><span class="s2">&quot;</span><span class="w">  </span><span class="c1"># En este caso la solución es fácil.</span>
</pre></div>
</div>
<p>Como los <em>script</em> consisten por lo general en estructurar llamadas más o
menos complejas a unos cuantos programas y, además, las llamadas a las
<a class="reference internal" href="05.funciones.html#sh-func"><span class="std std-ref">funciones</span></a> son sintácticamente iguales que las llamadas a
estos programas, nos encontramos constantemente con el problema de delimitar
cuál es un argumento y cuál el siguiente<a class="footnote-reference brackets" href="#id25" id="id12" role="doc-noteref"><span class="fn-bracket">[</span>12<span class="fn-bracket">]</span></a>.</p>
<p>Este <em>infierno</em> es una fuente inagotable de errores, que para evitsrse
provocan que, en ocasiones, haya que complicar el código.</p>
</div>
</section>
<section id="concatenacion-de-ordenes">
<h2><span class="section-number">3.1.6. </span>Concatenación de órdenes<a class="headerlink" href="#concatenacion-de-ordenes" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Para escribir varias órdenes en una línea, <a class="reference internal" href="../02.conbas/07.avanzada/07.concatenacion.html#sh-concat"><span class="std std-ref">consulte aquí</span></a>.</p>
</section>
<section id="operaciones">
<h2><span class="section-number">3.1.7. </span>Operaciones<a class="headerlink" href="#operaciones" title="Enlace permanente a este encabezado">¶</a></h2>
<p>Para la realización de operaciones podemos valernos de las siguientes
herramientas:</p>
<dl>
<dt><strong>Operaciones aritméticas</strong></dt><dd><p>Para operaciones con enteros lo mejor es usar la <a class="reference internal" href="../02.conbas/07.avanzada/08.interpretaciones.html#sh-ev-arit"><span class="std std-ref">evaluación aritmética</span></a>. Para operaciones con números en coma flotante, debemos usar
un comando externo como <a class="reference external" href="http://pubs.opengroup.org/onlinepubs/9699919799/utilities/bc.html">bc</a>, aunque
pueden no estar incluido en el sistema. Una alternativa más pesada, pero que
sí debería existir en todo sistema es <a class="reference internal" href="../02.conbas/10.texto/03.manipulacion.html#awk"><span class="std std-ref">awk</span></a>.</p>
</dd>
<dt><strong>Operaciones lógicas</strong></dt><dd><p>Revise más adelante el apartado dedicado a la <a class="reference internal" href="03.control.html#sh-if"><span class="std std-ref">sentencia condicional</span></a>.</p>
</dd>
<dt><strong>Transformaciones de cadenas</strong></dt><dd><ul class="simple">
<li><p>Para las que implican la eliminación de caracteres al principio o al final,
podemos usar algunos modificadores del valor de una variable como <kbd class="kbd docutils literal notranslate">#</kbd>,
<kbd class="kbd docutils literal notranslate">##</kbd>, <kbd class="kbd docutils literal notranslate">%</kbd> o <kbd class="kbd docutils literal notranslate">%%</kbd></p></li>
<li><p>Para modificar algunos caracteres de la cadena original, puede usarse
<a class="reference internal" href="../02.conbas/10.texto/03.manipulacion.html#tr"><span class="std std-ref">tr</span></a> o <a class="reference internal" href="../02.conbas/10.texto/03.manipulacion.html#sed"><span class="std std-ref">sed</span></a> dependiendo del caso: el primero sólo
puede hacer transformaciones de un carácter a un carácter. Una alternativa
es usar la extensión de <strong class="program">bash</strong> vista anteriormente, pero ello
restará portabilidad al código.</p></li>
</ul>
<span class="target" id="expr"></span><ul id="index-0">
<li><p>Para obtener una subcadena a partir de una posición inicial y final,
<strong class="program">bash</strong> proporciona un extensión al estándar vista más arriba, pero
que debería evitarse si no se quiere sacrificar la portabilidad. Las
alternativas en el estándar son el uso de <a class="reference internal" href="../02.conbas/10.texto/03.manipulacion.html#cut"><span class="std std-ref">cut</span></a> o
<strong class="command">expr</strong>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nv">a</span><span class="o">=</span><span class="m">0123456789</span>
<span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span><span class="si">${</span><span class="nv">a</span><span class="p">:</span><span class="nv">1</span><span class="p">:</span><span class="nv">3</span><span class="si">}</span><span class="w">            </span><span class="c1"># ¡No es estándar!</span>
<span class="go">123</span>
<span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$a</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-c2-4<span class="w">    </span><span class="c1"># Menos eficiente (tubería/subshell)</span>
<span class="go">123</span>
<span class="gp">$ </span>expr<span class="w"> </span>substr<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$a</span><span class="s2">&quot;</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">     </span><span class="c1"># 3 representa la longitud</span>
<span class="go">123</span>
</pre></div>
</div>
</li>
<li><p>Obtener una subcadena utilizando expresiones regulares, puede hacerse por
varias vías: <a class="reference internal" href="../02.conbas/10.texto/02.busqueda.html#grep"><span class="std std-ref">grep</span></a>, <a class="reference internal" href="../02.conbas/10.texto/03.manipulacion.html#awk"><span class="std std-ref">awk</span></a>, <a class="reference internal" href="../02.conbas/10.texto/03.manipulacion.html#sed"><span class="std std-ref">sed</span></a> o
<a class="reference external" href="http://pubs.opengroup.org/onlinepubs/9699919799/utilities/expr.html">expr:</a></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nv">a</span><span class="o">=</span><span class="s2">&quot;Quiero rescatar este 123 escondido&quot;</span>
<span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$a</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>-Eo<span class="w"> </span><span class="s1">&#39;[0-9]+&#39;</span>
<span class="go">123</span>
<span class="gp">$ </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;</span><span class="nv">$a</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>sed<span class="w"> </span>-r<span class="w"> </span><span class="s1">&#39;s:[^0-9]*([0-9]+).*:\1:&#39;</span>
<span class="go">123</span>
<span class="gp">$ </span>expr<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$a</span><span class="s2">&quot;</span><span class="w"> </span>:<span class="w"> </span><span class="s1">&#39;[^0-9]*\([0-9]\+\)&#39;</span><span class="w">  </span><span class="c1"># ¡Cuidado! Hay que usar BRE, no ERE.</span>
<span class="go">123</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Nota</p>
<p>El uso de <strong class="command">expr</strong> con expresiones regulares es bastante
limitado. Nos sirve básicamente para dos tareas:</p>
<ul>
<li><p>Extraer una cadena como se ha visto en el caso anterior, para lo cual
hay que usar la captura (o sea, los paréntesis).</p></li>
<li><p>Comprobar la existencia de una cadena que cumpla el patrón referido. En
ese caso, no hay que capturar y el resultado será la posición del último
carácter de concordancia. Si no hay concordancia, se imprime 0, ya que
el primer índice es 1. Por ejemplo:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>expr<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$a</span><span class="s2">&quot;</span><span class="w"> </span>:<span class="w"> </span><span class="s1">&#39;[^0-9]*[0-9]\+&#39;</span><span class="w">  </span><span class="c1"># Ahora no capturamos</span>
<span class="m">24</span>
$<span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="nv">$?</span>
<span class="m">0</span>
</pre></div>
</div>
<p>Ya que <strong>24</strong> es la posición en la que se encuentra el <em>3</em>. Ahora
bien, en caso de que simplemente se quiera comprobar una concordancia,
lo más eficiente es atender al valor de retorno.</p>
</li>
</ul>
</div>
</li>
</ul>
</dd>
</dl>
<p class="rubric">Notas al pie</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id14" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>Antes de la <em>Bourne SHell</em>, <em>UNIX</em> disponía de la <a class="reference external" href="https://en.wikipedia.org/wiki/Thompson_shell">Thompson shell</a>. (<em>Thompson</em> porque su
autor fue <a class="reference external" href="https://es.wikipedia.org/wiki/Ken_Thompson">Ken Thompson</a>, el
cocreador del propio <em>UNIX</em>).</p>
</aside>
<aside class="footnote brackets" id="id15" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>El estándar POSIX incluye las características del <em>Bourne shell</em> original
y añade otras. Se puede consultar tal estándar (que engloba más
características que la <em>shell</em>) a través de <a class="reference external" href="http://pubs.opengroup.org/onlinepubs/9699919799/">este enlace</a>.</p>
</aside>
<aside class="footnote brackets" id="id16" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">3</a><span class="fn-bracket">]</span></span>
<p>Que <code class="file docutils literal notranslate"><span class="pre">/bin/sh</span></code> apunte a <strong class="program">dash</strong> implica que éste es el
intérprete del sistema y que los <em>scripts</em> escritos para ser interpretados
por la <em>shell</em> genérica, será interpretados con él, En cambio, el intérprete
de usuario, o sea, la <em>shell</em> interactiva que usamos al abrir una terminal
sigue siendo <strong class="command">bash</strong>.</p>
</aside>
<aside class="footnote brackets" id="id17" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id4">4</a><span class="fn-bracket">]</span></span>
<p>En un principio la <em>shell</em> preferente de <em>Debian</em> era <strong class="command">bash</strong>,
aunque el <a class="reference external" href="https://www.debian.org/doc/debian-policy/">manual de principios de Debian</a> establecía que no debían usarse
las extensiones de <strong class="command">bash</strong> para escribir los <em>scripts</em> incluidos en
los paquetes. Una vez que estuvo disponible <strong class="program">dash</strong>, tardó un tiempo
en adoptarse oficialmente; <em>ubuntu</em>, simplemente, lo hizo antes.</p>
</aside>
<aside class="footnote brackets" id="id18" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id5">5</a><span class="fn-bracket">]</span></span>
<p>Véase <a class="reference external" href="https://busybox.net/">su página oficial</a> para más información.</p>
</aside>
<aside class="footnote brackets" id="id19" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id6">6</a><span class="fn-bracket">]</span></span>
<p>En estos sistemas con un linux mínimo, la mayoría de las aplicaciones
básicas son, simplemente, enlaces simbólicos a <strong class="command">busybox</strong>.</p>
</aside>
<aside class="footnote brackets" id="id20" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id7">7</a><span class="fn-bracket">]</span></span>
<p><strong class="command">xonsh</strong> es un curiosísima <em>shell</em> creada en <a class="reference external" href="http://python.org">Python</a> y cuya sintaxis es, básicamente, la de <em>Python</em>. Una
charla muy ilustrativa sobre ella se dio <a class="reference external" href="https://www.youtube.com/watch?v=uaje5I22kgE">en la PyCon 2016</a>.</p>
</aside>
<aside class="footnote brackets" id="id21" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id8">8</a><span class="fn-bracket">]</span></span>
<p>El enlace original al gráfico es <a class="reference external" href="https://tangentsoft.com/misc/unix-shells.svg">éste</a>.</p>
</aside>
<aside class="footnote brackets" id="id22" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id9">9</a><span class="fn-bracket">]</span></span>
<p>Nótese que la compatibilidad de un <em>script</em> no sólo estriba en qué
<em>shell</em> se haya usado para escribirlo, sino también en qué haga. Si para su
tarea usa cartacterísticas de <a class="reference internal" href="../04.servidor/03.init/index.html#systemd"><span class="std std-ref">systemd</span></a>, entonces no podrá más
que correr en linux modernos. Incluso los ficheros que lean pueden introducir
incompatibilidad, ya que las distribuciones no ponen los ficheros de
configuración en las mismas rutas.</p>
</aside>
<aside class="footnote brackets" id="id23" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id10">10</a><span class="fn-bracket">]</span></span>
<p>Por ejemplo, la opción <code class="docutils literal notranslate"><span class="pre">-o</span></code> de <a class="reference internal" href="../02.conbas/10.texto/02.busqueda.html#grep"><span class="std std-ref">grep</span></a> no <a class="reference external" href="http://pubs.opengroup.org/onlinepubs/9699919799/utilities/grep.html">está recogida en
el estándar POSIX</a></p>
</aside>
<aside class="footnote brackets" id="id24" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id11">11</a><span class="fn-bracket">]</span></span>
<p>Esto puede ser una posible fuente de errores para dedos torpones y
morcillones que se equivocan al digitalizar nombres. Véase <a class="reference internal" href="06.misc/06.debug.html#sh-debug"><span class="std std-ref">el apartado
dedicado a depuración</span></a> para ver cómo minimizar estos
inconvenientes.</p>
</aside>
<aside class="footnote brackets" id="id25" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id12">12</a><span class="fn-bracket">]</span></span>
<p>En un lenguaje (digamos que) normal este problema no existe, ya que no se
ejecutan otros programas directamente y las llamadas a funciones tienen la
sintaxis <kbd class="kbd compound docutils literal notranslate"><kbd class="kbd docutils literal notranslate">nombre(x,</kbd> <kbd class="kbd docutils literal notranslate">y,</kbd> <kbd class="kbd docutils literal notranslate">z)</kbd></kbd> con lo que en lo referente a los argumentos
está perfectamente claro cuál es cuál.</p>
</aside>
</aside>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../index.html">Tabla de contenido</a></h3>
    <ul>
<li><a class="reference internal" href="#">3.1. Conceptos básicos</a><ul>
<li><a class="reference internal" href="#sabores">3.1.1. Sabores</a></li>
<li><a class="reference internal" href="#caracteristicas">3.1.2. Características</a></li>
<li><a class="reference internal" href="#linea-de-shebang">3.1.3. Línea de <em>shebang</em></a></li>
<li><a class="reference internal" href="#variables">3.1.4. Variables</a></li>
<li><a class="reference internal" href="#sustituciones-en-linea">3.1.5. Sustituciones en línea</a></li>
<li><a class="reference internal" href="#concatenacion-de-ordenes">3.1.6. Concatenación de órdenes</a></li>
<li><a class="reference internal" href="#operaciones">3.1.7. Operaciones</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Tema anterior</h4>
    <p class="topless"><a href="index.html"
                          title="capítulo anterior"><span class="section-number">3. </span>Programación de <em>scripts</em></a></p>
  </div>
  <div>
    <h4>Próximo tema</h4>
    <p class="topless"><a href="02.io.html"
                          title="próximo capítulo"><span class="section-number">3.2. </span>Entrada/Salida</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>Esta página</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/03.scripts/01.vistos.rst.txt"
            rel="nofollow">Mostrar el código</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Búsqueda rápida</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Ir a" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navegación</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Índice General"
             >índice</a></li>
        <li class="right" >
          <a href="02.io.html" title="3.2. Entrada/Salida"
             >siguiente</a> |</li>
        <li class="right" >
          <a href="index.html" title="3. Programación de scripts"
             >anterior</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">documentación de Linuxnomicón - rolling</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="index.html" ><span class="section-number">3. </span>Programación de <em>scripts</em></a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3.1. </span>Conceptos básicos</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Derechos de autor CC BY 4.0, 2016-2023, José Miguel Sánchez Alés.
      Creado usando <a href="https://www.sphinx-doc.org/">Sphinx</a> 5.3.0.
    </div>
  </body>
</html>