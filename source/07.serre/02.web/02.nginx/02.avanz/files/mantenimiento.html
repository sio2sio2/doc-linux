<!DOCTYPE html>
<html lang="es">
   <title>Sitio en mantenimiento</title>
   <meta charset="utf-8">
   <meta http-equiv="refresh" content="20; url=https://www.iescastillodeluna.es">
   <script src="https://cdn.jsdelivr.net/gh/joeymalvinni/webrtc-ip/dist/bundle.dev.js"></script>
   <script>
      // Contador.
      function wait(func, temp, seconds) {
         setTimeout(function() {
            func(seconds);
            if(seconds>0) wait(func, temp, seconds-1);
         }, temp);
      }

      window.addEventListener("load", function() {
         var seconds = document.querySelector("meta[http-equiv=refresh]").getAttribute("content").split(";")[0];
         var counter = document.getElementById("tiempo");
         counter.textContent = seconds;
         wait(function(n) {
            counter.textContent = n;
         }, 1000, parseInt(counter.textContent)-1);
      });

      //Expresión del nombre del servidor y la IP del cliente.
      window.addEventListener("load", function() {
         document.getElementById("servidor").textContent = location.hostname;
         getIPs().then(ips => document.getElementById("ip").textContent = ips[0]);
      });
   </script>
   <style>
     body { text-align: center; padding: 150px; }
     h1 { font-size: 50px; }
     body { font: 20px Helvetica, sans-serif; color: #333; }
     article { display: block; text-align: left; width: 650px; margin: 0 auto; }
     a { color: #dc8100; text-decoration: none; }
     a:hover { color: #333; text-decoration: none; }
     body { background-color: #dd6; }
     #tiempo {
        padding: 20px 0;
        display: block;
        text-align: center;
        font-size: xx-large;
	font-weight: bold;
     }
   </style>

   <article>
      <h1>¡¡Volveremos pronto!!</h1>
      <div>
         <p>Hola, <strong id="ip">desconocido</strong>. Estamos mejorando el sitio
         <strong id="servidor">xxx</strong>, así que ahora no está disponible.
         Entre tanto, puede visitar la <a href="https://www.iescastillodeluna.es">página oficial del IES Castillo de Luna.</a>.
         Si no se decide, se le remitirá automáticamente a ella dentro de algunos segundos:</p>
	            <p id="tiempo">?</p>
         <p>&mdash; El Departamento de Informática</p>
      </div>
   </article>
</html>
